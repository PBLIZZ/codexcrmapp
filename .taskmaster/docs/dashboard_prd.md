# PRD: Dashboard Implementation & Final Layout Polish

**Version:** 1.6  
**Status:** Finalized  
**Author:** AI Assistant & Peter James Blizzard  
**Date:** June 11, 2025  

**Goal:** To implement the primary Dashboard view using the new, refactored layout architecture, create all necessary components, and apply final aesthetic polishes to the application shell.

## 1. Vision & Philosophy

The Dashboard will serve as the practitioner's daily starting point. It's not a static page but an active, intelligent hub that surfaces what's most important right now. It will use a modular, card-based layout to present actionable insights, motivational content, and key performance indicators. The entire application shell will receive a final polish to create a modern, "floating" UI aesthetic.

## 2. Scope & Requirements (Sequenced for Task Parsing)

### Task Group 1: Finalize the Core Layout System

**REQ-1.1 (Task 1): Finalize MainLayout.tsx for Floating Sidebar**
- **Description:** Modify the main layout to support the "floating" sidebar aesthetic by adding padding around the `<SidebarInset>`.
- **Implementation File:** `apps/web/components/layout/MainLayout.tsx`
- **Details:**
  - The root div inside MainLayout should have a background color or gradient (e.g., `bg-muted/40`) to be visible behind the floating sidebar and content.
  - The `<SidebarInset>` component should have padding applied (e.g., `p-2` or `p-4`) so its content doesn't touch the edges of the main area. This creates the "margin" effect.

**REQ-1.2 (Task 2): Finalize sidebar.tsx for Floating Style**
- **Description:** Modify the sidebar.tsx component to give the sidebar itself rounded corners, making it appear to float.
- **Implementation File:** `apps/web/components/ui/sidebar.tsx`
- **Details:**
  - Locate the `<div data-sidebar="sidebar" ...>` element within the Sidebar component.
  - Add `rounded-lg` or `rounded-xl` to its class list to round the corners.

### Task Group 2: Implement the Dashboard Page and Components

**REQ-2.1 (Task 3): Create DashboardSidebar.tsx using Demo Content**
- **Description:** Create the specific sidebar for the Dashboard section. For now, it will use the placeholder navigation components (NavMain, NavProjects) that were downloaded with the sidebar-07 block.
- **Implementation File:** `apps/web/components/layout/sidebars/DashboardSidebar.tsx`
- **Details:**
  - This component will be rendered by the AppSidebarController.
  - It will be built using the `<SidebarHeader>`, `<SidebarContent>`, and `<SidebarFooter>` primitives from ui/sidebar.tsx.
  - The `<SidebarContent>` will import and render `<NavMain />` and `<NavProjects />`.
  - The header will contain the brand logo/name and the `<SidebarTrigger>`.
  - The footer will contain the `<UserNav />`.

**REQ-2.2 (Task 4): Create the Dashboard Page Entry Point (page.tsx)**
- **Description:** Create the main server component for the dashboard route (/), which will now serve as the application's homepage. This replaces the old redirect logic.
- **Implementation File:** `apps/web/app/page.tsx`
- **Details:**
  - This file will define the structure of the dashboard page.
  - It will import and render the `<PageHeader>` component, passing the appropriate breadcrumbs (`[{ label: "Dashboard" }]`).
  - It will import and render the new `<DashboardWidgets />` component inside its `<main>` content area.

**REQ-2.3 (Task 5): Create DashboardWidgets.tsx Container**
- **Description:** A container component that lays out the five primary dashboard widgets.
- **Implementation File:** `apps/web/app/dashboard/components/DashboardWidgets.tsx`
- **Details:**
  - It will use a responsive CSS grid (`grid-cols-1 lg:grid-cols-3`) to arrange the widgets.
  - It will import and render each of the five individual widget components.

**REQ-2.4 (Task 6): Implement the 5 Dashboard Widget Components**
- **Description:** Create the five individual, self-contained widget components.
- **Location:** Create a new folder `apps/web/app/dashboard/components/widgets/`.
- **Component Files & Details:**
  - **AiClientInsights.tsx:** Uses shadcn/ui `<Carousel>` to display swipeable, actionable insights. Fetches data from a tRPC endpoint (`api.insights.getContactInsights`). Runs on demand when user pulls down on the widget to refresh and is based on a summary of client interactions with the business. Use mock data for now.
  - **DailyInspirationCard.tsx:** A simple, styled card displaying a quote generated by AI to motivate the practitioner. A detailed prompt needs to be created for the llm and scheduled to run daily. This falls under 'packages/jobs' and is something that can be ran in the background. 
  - **ai-task-panel.tsx:** A detailed panel of actionable tasks for the practitioner awaiting approval populated from a tRPC endpoint (`api.tasks.getPendingApproval`), which in turn is populated by AI. The panel should be scrollable and have a pull-to-refresh functionality. 
  - **business-metrics.tsx:** A detailed panel of business metrics populated from a tRPC endpoint (`api.metrics.getBusinessMetrics`), which in turn is populated by AI.  
  - **calendar-preview.tsx:** A widget that lists the next 3-5 appointments for the day. Fetches data from `api.calendar.getUpcoming.useQuery`, which in turn is populated by AI. Use mock data for now.
  - **quick-actions.tsx:** A helpful selection of useful actions represented as buttons.  
  - **TherapistCheckIn.tsx:** A client component with state for tracking user input (mood, client connections) using Button components for interaction.

### Task Group 3: Finalize Header & Documentation

**REQ-3.1 (Task 7): Update MainSectionNav.tsx**
- **Description:** Update the main header navigation to include the new "Marketing" section.
- **Implementation File:** `apps/web/components/layout/MainSectionNav.tsx`
- **Details:**
  - Add `{ title: 'Marketing', href: '/marketing', icon: megaphone }` to the mainNavItems array.

**REQ-3.2 (Task 8): Create Marketing Placeholder Page**
- **Description:** Create the placeholder page for the new Marketing section.
- **Implementation File:** `apps/web/app/marketing/page.tsx`
- **Details:**
  - The page should render the `<PageHeader>` with the correct breadcrumb.
  - The main content should display a "Coming Soon" message and a brief preview of future marketing features. These can be found by looking at 'https://omnipotency.ai' for a glimpse of what's to come. 

**REQ-3.3 (Task 9): Create a Project README.md**
- **Description:** Create a README.md file in the apps/web directory to document the new architecture for future developers and a specific README.md for the dashboard section detailing every file and folder in the dashboard section and the flow of data between them.
- **Implementation File:** `apps/web/README.md`, `apps/web/app/dashboard/README.md`
- **Details:**
  - Briefly explain the role of MainLayout, AppContent, AppSidebarController, and PageHeader.
  - Explain the file structure, reference the general principles for naming conventions. '.taskmaster/docs/general-principles-for-naming-conventions.md'
  - Explain how to add a new section to the app (i.e., create a sidebar content file, a page file, and add it to the controller and header nav).