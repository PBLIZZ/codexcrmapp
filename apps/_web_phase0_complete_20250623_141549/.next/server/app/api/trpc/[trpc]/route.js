/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/trpc/[trpc]/route";
exports.ids = ["app/api/trpc/[trpc]/route"];
exports.modules = {

/***/ "(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation@0.57.2_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/platform/node sync recursive":
/*!*************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@opentelemetry+instrumentation@0.57.2_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/ sync ***!
  \*************************************************************************************************************************************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation@0.57.2_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/platform/node sync recursive";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main sync recursive":
/*!*****************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/ sync ***!
  \*****************************************************************************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/../../node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main sync recursive";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/next@15.3.1_@babel+core@7.27.4_@opentelemetry+api@1.9.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=%2FUsers%2Fpeterjamesblizzard%2Fprojects%2Fapp_codexcrmapp%2Fapps%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpeterjamesblizzard%2Fprojects%2Fapp_codexcrmapp%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@15.3.1_@babel+core@7.27.4_@opentelemetry+api@1.9.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=%2FUsers%2Fpeterjamesblizzard%2Fprojects%2Fapp_codexcrmapp%2Fapps%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpeterjamesblizzard%2Fprojects%2Fapp_codexcrmapp%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/../../node_modules/.pnpm/next@15.3.1_@babel+core@7.27.4_@opentelemetry+api@1.9.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/../../node_modules/.pnpm/next@15.3.1_@babel+core@7.27.4_@opentelemetry+api@1.9.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../node_modules/.pnpm/next@15.3.1_@babel+core@7.27.4_@opentelemetry+api@1.9.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_peterjamesblizzard_projects_app_codexcrmapp_apps_web_app_api_trpc_trpc_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/trpc/[trpc]/route.ts */ \"(rsc)/./app/api/trpc/[trpc]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/trpc/[trpc]/route\",\n        pathname: \"/api/trpc/[trpc]\",\n        filename: \"route\",\n        bundlePath: \"app/api/trpc/[trpc]/route\"\n    },\n    resolvedPagePath: \"/Users/peterjamesblizzard/projects/app_codexcrmapp/apps/web/app/api/trpc/[trpc]/route.ts\",\n    nextConfigOutput,\n    userland: _Users_peterjamesblizzard_projects_app_codexcrmapp_apps_web_app_api_trpc_trpc_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTUuMy4xX0BiYWJlbCtjb3JlQDcuMjcuNF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjBfcmVhY3QtZG9tQDE5LjEuMF9yZWFjdEAxOS4xLjBfX3JlYWN0QDE5LjEuMC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZ0cnBjJTJGJTVCdHJwYyU1RCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdHJwYyUyRiU1QnRycGMlNUQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ0cnBjJTJGJTVCdHJwYyU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnBldGVyamFtZXNibGl6emFyZCUyRnByb2plY3RzJTJGYXBwX2NvZGV4Y3JtYXBwJTJGYXBwcyUyRndlYiUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZwZXRlcmphbWVzYmxpenphcmQlMkZwcm9qZWN0cyUyRmFwcF9jb2RleGNybWFwcCUyRmFwcHMlMkZ3ZWImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ3dDO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvcGV0ZXJqYW1lc2JsaXp6YXJkL3Byb2plY3RzL2FwcF9jb2RleGNybWFwcC9hcHBzL3dlYi9hcHAvYXBpL3RycGMvW3RycGNdL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS90cnBjL1t0cnBjXS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3RycGMvW3RycGNdXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS90cnBjL1t0cnBjXS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9wZXRlcmphbWVzYmxpenphcmQvcHJvamVjdHMvYXBwX2NvZGV4Y3JtYXBwL2FwcHMvd2ViL2FwcC9hcGkvdHJwYy9bdHJwY10vcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/next@15.3.1_@babel+core@7.27.4_@opentelemetry+api@1.9.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=%2FUsers%2Fpeterjamesblizzard%2Fprojects%2Fapp_codexcrmapp%2Fapps%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpeterjamesblizzard%2Fprojects%2Fapp_codexcrmapp%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/next@15.3.1_@babel+core@7.27.4_@opentelemetry+api@1.9.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@15.3.1_@babel+core@7.27.4_@opentelemetry+api@1.9.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/../../packages/server/src/context.ts":
/*!********************************************!*\
  !*** ../../packages/server/src/context.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createContext: () => (/* binding */ createContext)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/../../node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/../../node_modules/.pnpm/next@15.3.1_@babel+core@7.27.4_@opentelemetry+api@1.9.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _supabaseAdmin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./supabaseAdmin */ \"(rsc)/../../packages/server/src/supabaseAdmin.ts\");\n\n\n\n/** Builds tRPC context for each request */ async function createContext({ req: _req }) {\n    // Create a supabase client using Next.js cookies() for proper SSR support\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://ppzaajcutzyluffvbnrg.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBwemFhamN1dHp5bHVmZnZibnJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ5OTQyNTgsImV4cCI6MjA2MDU3MDI1OH0.sFYgJ0f9HR1siApbUgFMMt8b5JlJYc3dp_rDqcig2bw\", {\n        cookies: {\n            getAll () {\n                return cookieStore.getAll();\n            },\n            setAll (cookiesToSet) {\n                try {\n                    cookiesToSet.forEach(({ name, value, options })=>cookieStore.set(name, value, options));\n                } catch  {\n                // The `setAll` method was called from a Server Component.\n                // This can be ignored if you have middleware refreshing\n                // user sessions.\n                }\n            }\n        }\n    });\n    try {\n        // Use getUser() as the primary authentication method (recommended by Supabase)\n        const { data: { user }, error: userError } = await supabase.auth.getUser();\n        if (userError) {\n            console.error('tRPC context error getting user:', userError.message);\n        }\n        // Only get session if needed for specific session-related data\n        let session = null;\n        if (user) {\n            const { data: { session: sessionData }, error: sessionError } = await supabase.auth.getSession();\n            if (sessionError) {\n                console.error('tRPC context error getting session:', sessionError.message);\n            } else {\n                session = sessionData;\n            }\n        }\n        console.error('tRPC context auth status:', {\n            authenticated: !!user,\n            userId: user?.id,\n            email: user?.email,\n            cookiesFound: !!user\n        });\n        return {\n            user,\n            session,\n            supabaseAdmin: _supabaseAdmin__WEBPACK_IMPORTED_MODULE_2__.supabaseAdmin,\n            supabaseUser: supabase\n        };\n    } catch (error) {\n        console.error('tRPC context error:', error);\n        return {\n            user: null,\n            session: null,\n            supabaseAdmin: _supabaseAdmin__WEBPACK_IMPORTED_MODULE_2__.supabaseAdmin,\n            supabaseUser: supabase\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2VydmVyL3NyYy9jb250ZXh0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBbUQ7QUFFWjtBQUVTO0FBVWhELHlDQUF5QyxHQUNsQyxlQUFlRyxjQUFjLEVBQ2xDQyxLQUFLQyxJQUFJLEVBR1Y7SUFDQywwRUFBMEU7SUFDMUUsTUFBTUMsY0FBYyxNQUFNTCxxREFBT0E7SUFFakMsTUFBTU0sV0FBV1AsaUVBQWtCQSxDQUNqQ1EsMENBQW9DLEVBQ3BDQSxrTkFBeUMsRUFDekM7UUFDRVAsU0FBUztZQUNQVztnQkFDRSxPQUFPTixZQUFZTSxNQUFNO1lBQzNCO1lBQ0FDLFFBQU9DLFlBQVk7Z0JBQ2pCLElBQUk7b0JBQ0ZBLGFBQWFDLE9BQU8sQ0FBQyxDQUFDLEVBQUVDLElBQUksRUFBRUMsS0FBSyxFQUFFQyxPQUFPLEVBQUUsR0FDNUNaLFlBQVlhLEdBQUcsQ0FBQ0gsTUFBTUMsT0FBT0M7Z0JBRWpDLEVBQUUsT0FBTTtnQkFDTiwwREFBMEQ7Z0JBQzFELHdEQUF3RDtnQkFDeEQsaUJBQWlCO2dCQUNuQjtZQUNGO1FBQ0Y7SUFDRjtJQUdGLElBQUk7UUFDRiwrRUFBK0U7UUFDL0UsTUFBTSxFQUNKRSxNQUFNLEVBQUVDLElBQUksRUFBRSxFQUNkQyxPQUFPQyxTQUFTLEVBQ2pCLEdBQUcsTUFBTWhCLFNBQVNpQixJQUFJLENBQUNDLE9BQU87UUFDL0IsSUFBSUYsV0FBVztZQUNiRyxRQUFRSixLQUFLLENBQUMsb0NBQW9DQyxVQUFVSSxPQUFPO1FBQ3JFO1FBRUEsK0RBQStEO1FBQy9ELElBQUlDLFVBQVU7UUFDZCxJQUFJUCxNQUFNO1lBQ1IsTUFBTSxFQUNKRCxNQUFNLEVBQUVRLFNBQVNDLFdBQVcsRUFBRSxFQUM5QlAsT0FBT1EsWUFBWSxFQUNwQixHQUFHLE1BQU12QixTQUFTaUIsSUFBSSxDQUFDTyxVQUFVO1lBQ2xDLElBQUlELGNBQWM7Z0JBQ2hCSixRQUFRSixLQUFLLENBQ1gsdUNBQ0FRLGFBQWFILE9BQU87WUFFeEIsT0FBTztnQkFDTEMsVUFBVUM7WUFDWjtRQUNGO1FBRUFILFFBQVFKLEtBQUssQ0FBQyw2QkFBNkI7WUFDekNVLGVBQWUsQ0FBQyxDQUFDWDtZQUNqQlksUUFBUVosTUFBTWE7WUFDZEMsT0FBT2QsTUFBTWM7WUFDYkMsY0FBYyxDQUFDLENBQUNmO1FBQ2xCO1FBRUEsT0FBTztZQUNMQTtZQUNBTztZQUNBMUIsYUFBYUEsMkRBQUFBO1lBQ2JtQyxjQUFjOUI7UUFDaEI7SUFDRixFQUFFLE9BQU9lLE9BQU87UUFDZEksUUFBUUosS0FBSyxDQUFDLHVCQUF1QkE7UUFFckMsT0FBTztZQUNMRCxNQUFNO1lBQ05PLFNBQVM7WUFDVDFCLGFBQWFBLDJEQUFBQTtZQUNibUMsY0FBYzlCO1FBQ2hCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3BldGVyamFtZXNibGl6emFyZC9wcm9qZWN0cy9hcHBfY29kZXhjcm1hcHAvcGFja2FnZXMvc2VydmVyL3NyYy9jb250ZXh0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zc3InO1xuaW1wb3J0IHR5cGUgeyBTZXNzaW9uLCBVc2VyIH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xuXG5pbXBvcnQgeyBzdXBhYmFzZUFkbWluIH0gZnJvbSAnLi9zdXBhYmFzZUFkbWluJztcblxuLyoqIFNoYXBlIG9mIHRoZSB0UlBDIGNvbnRleHQgb2JqZWN0ICovXG5leHBvcnQgaW50ZXJmYWNlIENvbnRleHQge1xuICB1c2VyOiBVc2VyIHwgbnVsbDtcbiAgc2Vzc2lvbjogU2Vzc2lvbiB8IG51bGw7XG4gIHN1cGFiYXNlQWRtaW46IHR5cGVvZiBzdXBhYmFzZUFkbWluO1xuICBzdXBhYmFzZVVzZXI6IFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZVNlcnZlckNsaWVudD47XG59XG5cbi8qKiBCdWlsZHMgdFJQQyBjb250ZXh0IGZvciBlYWNoIHJlcXVlc3QgKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDb250ZXh0KHtcbiAgcmVxOiBfcmVxLFxufToge1xuICByZXE6IFJlcXVlc3Q7XG59KTogUHJvbWlzZTxDb250ZXh0PiB7XG4gIC8vIENyZWF0ZSBhIHN1cGFiYXNlIGNsaWVudCB1c2luZyBOZXh0LmpzIGNvb2tpZXMoKSBmb3IgcHJvcGVyIFNTUiBzdXBwb3J0XG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xuXG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU2VydmVyQ2xpZW50KFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxuICAgIHtcbiAgICAgIGNvb2tpZXM6IHtcbiAgICAgICAgZ2V0QWxsKCkge1xuICAgICAgICAgIHJldHVybiBjb29raWVTdG9yZS5nZXRBbGwoKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0QWxsKGNvb2tpZXNUb1NldCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb29raWVzVG9TZXQuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSwgb3B0aW9ucyB9KSA9PlxuICAgICAgICAgICAgICBjb29raWVTdG9yZS5zZXQobmFtZSwgdmFsdWUsIG9wdGlvbnMpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgLy8gVGhlIGBzZXRBbGxgIG1ldGhvZCB3YXMgY2FsbGVkIGZyb20gYSBTZXJ2ZXIgQ29tcG9uZW50LlxuICAgICAgICAgICAgLy8gVGhpcyBjYW4gYmUgaWdub3JlZCBpZiB5b3UgaGF2ZSBtaWRkbGV3YXJlIHJlZnJlc2hpbmdcbiAgICAgICAgICAgIC8vIHVzZXIgc2Vzc2lvbnMuXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9XG4gICk7XG5cbiAgdHJ5IHtcbiAgICAvLyBVc2UgZ2V0VXNlcigpIGFzIHRoZSBwcmltYXJ5IGF1dGhlbnRpY2F0aW9uIG1ldGhvZCAocmVjb21tZW5kZWQgYnkgU3VwYWJhc2UpXG4gICAgY29uc3Qge1xuICAgICAgZGF0YTogeyB1c2VyIH0sXG4gICAgICBlcnJvcjogdXNlckVycm9yLFxuICAgIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcbiAgICBpZiAodXNlckVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCd0UlBDIGNvbnRleHQgZXJyb3IgZ2V0dGluZyB1c2VyOicsIHVzZXJFcnJvci5tZXNzYWdlKTtcbiAgICB9XG5cbiAgICAvLyBPbmx5IGdldCBzZXNzaW9uIGlmIG5lZWRlZCBmb3Igc3BlY2lmaWMgc2Vzc2lvbi1yZWxhdGVkIGRhdGFcbiAgICBsZXQgc2Vzc2lvbiA9IG51bGw7XG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZGF0YTogeyBzZXNzaW9uOiBzZXNzaW9uRGF0YSB9LFxuICAgICAgICBlcnJvcjogc2Vzc2lvbkVycm9yLFxuICAgICAgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbigpO1xuICAgICAgaWYgKHNlc3Npb25FcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICd0UlBDIGNvbnRleHQgZXJyb3IgZ2V0dGluZyBzZXNzaW9uOicsXG4gICAgICAgICAgc2Vzc2lvbkVycm9yLm1lc3NhZ2VcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlc3Npb24gPSBzZXNzaW9uRGF0YTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmVycm9yKCd0UlBDIGNvbnRleHQgYXV0aCBzdGF0dXM6Jywge1xuICAgICAgYXV0aGVudGljYXRlZDogISF1c2VyLFxuICAgICAgdXNlcklkOiB1c2VyPy5pZCxcbiAgICAgIGVtYWlsOiB1c2VyPy5lbWFpbCxcbiAgICAgIGNvb2tpZXNGb3VuZDogISF1c2VyLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXIsXG4gICAgICBzZXNzaW9uLFxuICAgICAgc3VwYWJhc2VBZG1pbixcbiAgICAgIHN1cGFiYXNlVXNlcjogc3VwYWJhc2UsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCd0UlBDIGNvbnRleHQgZXJyb3I6JywgZXJyb3IpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXI6IG51bGwsXG4gICAgICBzZXNzaW9uOiBudWxsLFxuICAgICAgc3VwYWJhc2VBZG1pbixcbiAgICAgIHN1cGFiYXNlVXNlcjogc3VwYWJhc2UsXG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNyZWF0ZVNlcnZlckNsaWVudCIsImNvb2tpZXMiLCJzdXBhYmFzZUFkbWluIiwiY3JlYXRlQ29udGV4dCIsInJlcSIsIl9yZXEiLCJjb29raWVTdG9yZSIsInN1cGFiYXNlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiZ2V0QWxsIiwic2V0QWxsIiwiY29va2llc1RvU2V0IiwiZm9yRWFjaCIsIm5hbWUiLCJ2YWx1ZSIsIm9wdGlvbnMiLCJzZXQiLCJkYXRhIiwidXNlciIsImVycm9yIiwidXNlckVycm9yIiwiYXV0aCIsImdldFVzZXIiLCJjb25zb2xlIiwibWVzc2FnZSIsInNlc3Npb24iLCJzZXNzaW9uRGF0YSIsInNlc3Npb25FcnJvciIsImdldFNlc3Npb24iLCJhdXRoZW50aWNhdGVkIiwidXNlcklkIiwiaWQiLCJlbWFpbCIsImNvb2tpZXNGb3VuZCIsInN1cGFiYXNlVXNlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../packages/server/src/context.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/server/src/index.ts":
/*!******************************************!*\
  !*** ../../packages/server/src/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appRouter: () => (/* reexport safe */ _root__WEBPACK_IMPORTED_MODULE_0__.appRouter),\n/* harmony export */   createContext: () => (/* reexport safe */ _context__WEBPACK_IMPORTED_MODULE_1__.createContext),\n/* harmony export */   hasRole: () => (/* reexport safe */ _trpc__WEBPACK_IMPORTED_MODULE_2__.hasRole),\n/* harmony export */   middleware: () => (/* reexport safe */ _trpc__WEBPACK_IMPORTED_MODULE_2__.middleware),\n/* harmony export */   protectedProcedure: () => (/* reexport safe */ _trpc__WEBPACK_IMPORTED_MODULE_2__.protectedProcedure),\n/* harmony export */   publicProcedure: () => (/* reexport safe */ _trpc__WEBPACK_IMPORTED_MODULE_2__.publicProcedure),\n/* harmony export */   rateLimit: () => (/* reexport safe */ _trpc__WEBPACK_IMPORTED_MODULE_2__.rateLimit),\n/* harmony export */   router: () => (/* reexport safe */ _trpc__WEBPACK_IMPORTED_MODULE_2__.router)\n/* harmony export */ });\n/* harmony import */ var _root__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./root */ \"(rsc)/../../packages/server/src/root.ts\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context */ \"(rsc)/../../packages/server/src/context.ts\");\n/* harmony import */ var _trpc__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./trpc */ \"(rsc)/../../packages/server/src/trpc.ts\");\n// Main exports from the server package\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2VydmVyL3NyYy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBLHVDQUF1QztBQUNoQjtBQUNHO0FBQ0giLCJzb3VyY2VzIjpbIi9Vc2Vycy9wZXRlcmphbWVzYmxpenphcmQvcHJvamVjdHMvYXBwX2NvZGV4Y3JtYXBwL3BhY2thZ2VzL3NlcnZlci9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTWFpbiBleHBvcnRzIGZyb20gdGhlIHNlcnZlciBwYWNrYWdlXG5leHBvcnQgKiBmcm9tICcuL3Jvb3QnO1xuZXhwb3J0ICogZnJvbSAnLi9jb250ZXh0JztcbmV4cG9ydCAqIGZyb20gJy4vdHJwYyc7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../packages/server/src/index.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/server/src/root.ts":
/*!*****************************************!*\
  !*** ../../packages/server/src/root.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appRouter: () => (/* binding */ appRouter)\n/* harmony export */ });\n/* harmony import */ var _routers_contact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./routers/contact */ \"(rsc)/../../packages/server/src/routers/contact.ts\");\n/* harmony import */ var _routers_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./routers/group */ \"(rsc)/../../packages/server/src/routers/group.ts\");\n/* harmony import */ var _routers_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./routers/storage */ \"(rsc)/../../packages/server/src/routers/storage.ts\");\n/* harmony import */ var _routers_dashboard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./routers/dashboard */ \"(rsc)/../../packages/server/src/routers/dashboard.ts\");\n/* harmony import */ var _routers_import__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./routers/import */ \"(rsc)/../../packages/server/src/routers/import.ts\");\n/* harmony import */ var _trpc__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./trpc */ \"(rsc)/../../packages/server/src/trpc.ts\");\n\n\n\n\n\n\nconst appRouter = (0,_trpc__WEBPACK_IMPORTED_MODULE_5__.router)({\n    clients: _routers_contact__WEBPACK_IMPORTED_MODULE_0__.contactRouter,\n    groups: _routers_group__WEBPACK_IMPORTED_MODULE_1__.groupRouter,\n    storage: _routers_storage__WEBPACK_IMPORTED_MODULE_2__.storageRouter,\n    dashboard: _routers_dashboard__WEBPACK_IMPORTED_MODULE_3__.dashboardRouter,\n    import: _routers_import__WEBPACK_IMPORTED_MODULE_4__.importRouter\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2VydmVyL3NyYy9yb290LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBa0Q7QUFDSjtBQUNJO0FBQ0k7QUFDTjtBQUNoQjtBQUV6QixNQUFNTSxZQUFZRCw2Q0FBTUEsQ0FBQztJQUM5QkUsU0FBU1AsMkRBQWFBO0lBQ3RCUSxRQUFRUCx1REFBV0E7SUFDbkJRLFNBQVNQLDJEQUFhQTtJQUN0QlEsV0FBV1AsK0RBQWVBO0lBQzFCUSxRQUFRUCx5REFBWUE7QUFDdEIsR0FBRyIsInNvdXJjZXMiOlsiL1VzZXJzL3BldGVyamFtZXNibGl6emFyZC9wcm9qZWN0cy9hcHBfY29kZXhjcm1hcHAvcGFja2FnZXMvc2VydmVyL3NyYy9yb290LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbnRhY3RSb3V0ZXIgfSBmcm9tICcuL3JvdXRlcnMvY29udGFjdCc7XG5pbXBvcnQgeyBncm91cFJvdXRlciB9IGZyb20gJy4vcm91dGVycy9ncm91cCc7XG5pbXBvcnQgeyBzdG9yYWdlUm91dGVyIH0gZnJvbSAnLi9yb3V0ZXJzL3N0b3JhZ2UnO1xuaW1wb3J0IHsgZGFzaGJvYXJkUm91dGVyIH0gZnJvbSAnLi9yb3V0ZXJzL2Rhc2hib2FyZCc7XG5pbXBvcnQgeyBpbXBvcnRSb3V0ZXIgfSBmcm9tICcuL3JvdXRlcnMvaW1wb3J0JztcbmltcG9ydCB7IHJvdXRlciB9IGZyb20gJy4vdHJwYyc7XG5cbmV4cG9ydCBjb25zdCBhcHBSb3V0ZXIgPSByb3V0ZXIoe1xuICBjbGllbnRzOiBjb250YWN0Um91dGVyLCAvLyBSZW5hbWVkIGZyb20gJ2NvbnRhY3RzJyB0byBhdm9pZCB0UlBDIGNsaWVudCBjb25mbGljdHNcbiAgZ3JvdXBzOiBncm91cFJvdXRlciwgLy8gR3JvdXBzIG1hbmFnZW1lbnQgcm91dGVyXG4gIHN0b3JhZ2U6IHN0b3JhZ2VSb3V0ZXIsIC8vIFN0b3JhZ2Ugcm91dGVyIGZvciBmaWxlIHVwbG9hZHMgKHBob3RvcylcbiAgZGFzaGJvYXJkOiBkYXNoYm9hcmRSb3V0ZXIsIC8vIERhc2hib2FyZCBtZXRyaWNzIGFnZ3JlZ2F0aW9uXG4gIGltcG9ydDogaW1wb3J0Um91dGVyLCAvLyBJbXBvcnQgZnVuY3Rpb25hbGl0eSBmb3IgQ1NWIHVwbG9hZHNcbn0pO1xuZXhwb3J0IHR5cGUgQXBwUm91dGVyID0gdHlwZW9mIGFwcFJvdXRlcjtcbiJdLCJuYW1lcyI6WyJjb250YWN0Um91dGVyIiwiZ3JvdXBSb3V0ZXIiLCJzdG9yYWdlUm91dGVyIiwiZGFzaGJvYXJkUm91dGVyIiwiaW1wb3J0Um91dGVyIiwicm91dGVyIiwiYXBwUm91dGVyIiwiY2xpZW50cyIsImdyb3VwcyIsInN0b3JhZ2UiLCJkYXNoYm9hcmQiLCJpbXBvcnQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../packages/server/src/root.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/server/src/routers/contact.ts":
/*!****************************************************!*\
  !*** ../../packages/server/src/routers/contact.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   contactRouter: () => (/* binding */ contactRouter)\n/* harmony export */ });\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/../../node_modules/.pnpm/@trpc+server@11.4.2_typescript@5.8.3/node_modules/@trpc/server/dist/tracked-gU3ttYjg.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/../../node_modules/.pnpm/zod@3.25.67/node_modules/zod/dist/esm/index.js\");\n/* harmony import */ var _trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../trpc */ \"(rsc)/../../packages/server/src/trpc.ts\");\n\n\n\nconst contactInputSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().uuid().optional(),\n    full_name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().min(1, 'Full name is required'),\n    email: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().email('Invalid email address').optional().nullable(),\n    phone: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    phone_country_code: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    company_name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    job_title: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    address_street: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    address_city: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    address_postal_code: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    address_country: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    website: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().url({\n        message: \"Invalid URL\"\n    }).optional().nullable(),\n    profile_image_url: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    notes: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    tags: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional().nullable(),\n    social_handles: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional().nullable(),\n    source: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    last_contacted_at: zod__WEBPACK_IMPORTED_MODULE_0__.z.preprocess((arg)=>{\n        if (arg === '' || arg === null || arg === undefined) return null;\n        if (typeof arg === 'string' || arg instanceof Date) {\n            const date = new Date(arg);\n            return isNaN(date.getTime()) ? null : date;\n        }\n        return null;\n    }, zod__WEBPACK_IMPORTED_MODULE_0__.z.date().optional().nullable()),\n    enriched_data: zod__WEBPACK_IMPORTED_MODULE_0__.z.any().optional().nullable(),\n    enrichment_status: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable()\n});\n// Defines tRPC procedures for contacts.\nconst contactRouter = (0,_trpc__WEBPACK_IMPORTED_MODULE_1__.router)({\n    // ===== Protected Procedures (require authentication) =====\n    // Protected procedure for listing authenticated user's contacts\n    list: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        search: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        groupId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    })).query(async ({ ctx, input })=>{\n        const { search, groupId } = input;\n        const userId = ctx.user?.id;\n        if (!userId) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        // If a groupId is provided, we start from group_members and expand contacts.\n        // This is the most efficient way to filter by group.\n        if (groupId) {\n            // First, get the contact IDs that belong to this group\n            const { data: groupMembers, error: memberError } = await ctx.supabaseUser.from('group_members').select('contact_id').eq('group_id', groupId);\n            if (memberError) {\n                console.error(\"Error fetching group members:\", memberError);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                    code: 'INTERNAL_SERVER_ERROR',\n                    message: `Failed to retrieve group members: ${memberError.message}`\n                });\n            }\n            // If no contacts in the group, return empty array\n            if (!groupMembers || groupMembers.length === 0) {\n                return [];\n            }\n            // Extract contact IDs\n            const contactIds = groupMembers.map((member)=>member.contact_id);\n            // Now query contacts with both group filtering (via IDs) and search\n            let contactsQuery = ctx.supabaseUser.from('contacts').select('*').in('id', contactIds);\n            // Add search filter if provided\n            if (search) {\n                contactsQuery = contactsQuery.or(`full_name.ilike.%${search}%,email.ilike.%${search}%`);\n            }\n            // Add ordering\n            contactsQuery = contactsQuery.order('created_at', {\n                ascending: false\n            });\n            // Execute the query\n            const { data: contacts, error } = await contactsQuery;\n            if (error) {\n                console.error(\"Error fetching contacts for group:\", error);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                    code: 'INTERNAL_SERVER_ERROR',\n                    message: `Failed to retrieve contacts for group: ${error.message}`\n                });\n            }\n            return contacts || [];\n        } else {\n            let query = ctx.supabaseUser.from('contacts').select('*');\n            // Conditionally add the search filter\n            if (search) {\n                query = query.or(`full_name.ilike.%${search}%,email.ilike.%${search}%`);\n            }\n            // Add default ordering\n            query = query.order('created_at', {\n                ascending: false\n            });\n            const { data: contacts, error } = await query;\n            if (error) {\n                console.error(\"Error fetching all contacts:\", error);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                    code: 'INTERNAL_SERVER_ERROR',\n                    message: `Failed to retrieve contacts: ${error.message}`\n                });\n            }\n            return contacts || [];\n        }\n    }),\n    // Fetch a single contact by ID\n    getById: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        contactId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().uuid()\n    })).query(async ({ input, ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        const { data, error } = await ctx.supabaseUser.from('contacts').select('*').eq('id', input.contactId).single();\n        if (error) {\n            console.error('Error fetching contact by id:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch contact',\n                cause: error\n            });\n        }\n        return data;\n    }),\n    save: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(contactInputSchema) // Uses the schema defined above this router\n    .mutation(async ({ input, ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        const contactId = input.id;\n        const fieldsToSave = {\n            full_name: input.full_name,\n            email: input.email || null,\n            phone: input.phone || null,\n            phone_country_code: input.phone_country_code || null,\n            company_name: input.company_name || null,\n            job_title: input.job_title || null,\n            address_street: input.address_street || null,\n            address_city: input.address_city || null,\n            address_postal_code: input.address_postal_code || null,\n            address_country: input.address_country || null,\n            website: input.website || null,\n            profile_image_url: input.profile_image_url || null,\n            notes: input.notes || null,\n            tags: input.tags || null,\n            social_handles: input.social_handles || null,\n            source: input.source || null,\n            last_contacted_at: input.last_contacted_at || null,\n            enriched_data: input.enriched_data || null,\n            enrichment_status: input.enrichment_status || null\n        };\n        let dataObject = null;\n        // Supabase errors have a 'code' property (string) among others\n        let dbError = null;\n        try {\n            if (contactId) {\n                // UPDATE LOGIC\n                console.warn(`Attempting contact update for id: ${contactId}`, fieldsToSave);\n                let attemptFields = {\n                    ...fieldsToSave\n                };\n                do {\n                    const updateOp = await ctx.supabaseUser.from('contacts').update(attemptFields).match({\n                        id: contactId,\n                        user_id: ctx.user.id\n                    }).select().single();\n                    dataObject = updateOp.data;\n                    dbError = updateOp.error;\n                    if (dbError) {\n                        const columnMatch = dbError.message.match(/Could not find the '(.+)' column/);\n                        if (columnMatch && Object.hasOwn(attemptFields, columnMatch[1])) {\n                            console.warn(`${columnMatch[1]} column missing, retrying update without it`);\n                            delete attemptFields[columnMatch[1]];\n                            continue;\n                        }\n                    }\n                    break;\n                }while (dbError !== null);\n            } else {\n                // INSERT LOGIC\n                const insertPayload = {\n                    ...fieldsToSave,\n                    user_id: ctx.user.id\n                };\n                console.warn('[DEBUG] Attempting contact insert:', insertPayload);\n                const insertOp = await ctx.supabaseUser.from('contacts').insert(insertPayload).select('id, created_at, updated_at, user_id, email, full_name, profile_image_url') // Select minimal essential fields\n                .single();\n                dataObject = insertOp.data;\n                dbError = insertOp.error;\n                if (!dbError && !dataObject) {\n                    console.warn(\"Contact insert: Supabase insert succeeded but .select() returned no data (RLS visibility issue?). Constructing response from input.\");\n                    // The insert was likely successful, but RLS prevents reading it back immediately.\n                    // We return the input data merged with user_id, but server-generated fields like 'id' and 'created_at' will be missing.\n                    // The client should be aware or refetch if these are critical immediately.\n                    dataObject = {\n                        ...insertPayload,\n                        id: undefined,\n                        created_at: undefined,\n                        updated_at: undefined\n                    };\n                }\n            }\n            if (dbError) {\n                console.error('Supabase save error:', JSON.stringify(dbError, null, 2), {\n                    input,\n                    contactId\n                });\n                if (dbError.code === '23505') {\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                        code: 'CONFLICT',\n                        message: `A contact with this email (${input.email}) already exists.`,\n                        cause: dbError\n                    });\n                }\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                    code: 'INTERNAL_SERVER_ERROR',\n                    message: `Database error: ${dbError.message}`,\n                    cause: dbError\n                });\n            }\n            if (!dataObject) {\n                console.error('Supabase save returned no data and no explicit error after processing.', {\n                    input,\n                    contactId\n                });\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                    code: 'INTERNAL_SERVER_ERROR',\n                    message: 'Failed to save contact: No data returned from database operation.'\n                });\n            }\n            console.warn('Contact save successful:', dataObject);\n            return dataObject;\n        } catch (error) {\n            if (error instanceof _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError) {\n                throw error;\n            }\n            console.error('Unhandled error in contact save procedure:', error, {\n                input,\n                contactId\n            });\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'An unexpected error occurred while saving the contact.',\n                cause: error instanceof Error ? error : undefined\n            });\n        }\n    }),\n    delete: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        contactId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().uuid()\n    })).mutation(async ({ input, ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        const { error } = await ctx.supabaseUser.from('contacts').delete().match({\n            id: input.contactId,\n            user_id: ctx.user.id\n        });\n        if (error) {\n            console.error('Error deleting contact:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to delete contact',\n                cause: error\n            });\n        }\n        return {\n            success: true,\n            contactId: input.contactId\n        };\n    }),\n    // Update just the notes field of a contact\n    updateNotes: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        contactId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().uuid(),\n        notes: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).mutation(async ({ input, ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        const { contactId, notes } = input;\n        try {\n            // Verify the contact belongs to the user\n            const { data: existingContact, error: fetchError } = await ctx.supabaseAdmin.from('contacts').select('id').eq('id', contactId).eq('user_id', ctx.user.id).single();\n            if (fetchError || !existingContact) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                    code: 'NOT_FOUND',\n                    message: 'Contact not found or you do not have permission to update it'\n                });\n            }\n            // Update only the notes field\n            const { error: updateError } = await ctx.supabaseAdmin.from('contacts').update({\n                notes,\n                updated_at: new Date()\n            }).eq('id', contactId).eq('user_id', ctx.user.id);\n            if (updateError) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                    code: 'INTERNAL_SERVER_ERROR',\n                    message: `Failed to update contact notes: ${updateError.message}`\n                });\n            }\n            return {\n                success: true\n            };\n        } catch (error) {\n            if (error instanceof _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError) {\n                throw error;\n            }\n            console.error('Unhandled error in updateNotes procedure:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to update contact notes due to an unexpected error'\n            });\n        }\n    }),\n    // Get total count of contacts for the authenticated user\n    getTotalContactsCount: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.query(async ({ ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        // Use count with head: true for efficiency - doesn't return the body, just the count\n        const { count, error } = await ctx.supabaseUser.from('contacts').select('*', {\n            count: 'exact',\n            head: true\n        });\n        if (error) {\n            console.error(\"Failed to get total contact count:\", error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Could not retrieve contact count.'\n            });\n        }\n        return {\n            count: count ?? 0\n        };\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2VydmVyL3NyYy9yb3V0ZXJzL2NvbnRhY3QudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF5QztBQUNqQjtBQUc2QjtBQUVyRCxNQUFNSSxxQkFBcUJILHlDQUFRLENBQUM7SUFDbENLLElBQUlMLHlDQUFRLEdBQUdPLElBQUksR0FBR0MsUUFBUTtJQUM5QkMsV0FBV1QseUNBQVEsR0FBR1UsR0FBRyxDQUFDLEdBQUc7SUFDN0JDLE9BQU9YLHlDQUFRLEdBQUdXLEtBQUssQ0FBQyx5QkFBeUJILFFBQVEsR0FBR0ksUUFBUTtJQUNwRUMsT0FBT2IseUNBQVEsR0FBR1EsUUFBUSxHQUFHSSxRQUFRO0lBQ3JDRSxvQkFBb0JkLHlDQUFRLEdBQUdRLFFBQVEsR0FBR0ksUUFBUTtJQUNsREcsY0FBY2YseUNBQVEsR0FBR1EsUUFBUSxHQUFHSSxRQUFRO0lBQzVDSSxXQUFXaEIseUNBQVEsR0FBR1EsUUFBUSxHQUFHSSxRQUFRO0lBQ3pDSyxnQkFBZ0JqQix5Q0FBUSxHQUFHUSxRQUFRLEdBQUdJLFFBQVE7SUFDOUNNLGNBQWNsQix5Q0FBUSxHQUFHUSxRQUFRLEdBQUdJLFFBQVE7SUFDNUNPLHFCQUFxQm5CLHlDQUFRLEdBQUdRLFFBQVEsR0FBR0ksUUFBUTtJQUNuRFEsaUJBQWlCcEIseUNBQVEsR0FBR1EsUUFBUSxHQUFHSSxRQUFRO0lBQy9DUyxTQUFTckIseUNBQVEsR0FBR3NCLEdBQUcsQ0FBQztRQUFFQyxTQUFTO0lBQWMsR0FBR2YsUUFBUSxHQUFHSSxRQUFRO0lBQ3ZFWSxtQkFBbUJ4Qix5Q0FBUSxHQUFHUSxRQUFRLEdBQUdJLFFBQVE7SUFDakRhLE9BQU96Qix5Q0FBUSxHQUFHUSxRQUFRLEdBQUdJLFFBQVE7SUFDckNjLE1BQU0xQix3Q0FBTyxDQUFDQSx5Q0FBUSxJQUFJUSxRQUFRLEdBQUdJLFFBQVE7SUFDN0NnQixnQkFBZ0I1Qix3Q0FBTyxDQUFDQSx5Q0FBUSxJQUFJUSxRQUFRLEdBQUdJLFFBQVE7SUFDdkRp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RjtZQUVBLE9BQU87Z0JBQUUyRSxTQUFTO1lBQUs7UUFDekIsRUFBRSxPQUFPN0MsT0FBTztZQUNkLElBQUlBLGlCQUFpQnRELG1EQUFTQSxFQUFFO2dCQUM5QixNQUFNc0Q7WUFDUjtZQUNBTSxRQUFRTixLQUFLLENBQUMsNkNBQTZDQTtZQUMzRCxNQUFNLElBQUl0RCxtREFBU0EsQ0FBQztnQkFDbEJtRCxNQUFNO2dCQUNOM0IsU0FBUztZQUNYO1FBQ0Y7SUFDRjtJQUVGLHlEQUF5RDtJQUN6RGlGLHVCQUF1QnRHLHFEQUFrQkEsQ0FBQzRDLEtBQUssQ0FBQyxPQUFPLEVBQUVDLEdBQUcsRUFBRTtRQUM1RCxJQUFJLENBQUNBLElBQUlFLElBQUksRUFBRTtZQUNiLE1BQU0sSUFBSWxELG1EQUFTQSxDQUFDO2dCQUFFbUQsTUFBTTtZQUFlO1FBQzdDO1FBRUEscUZBQXFGO1FBQ3JGLE1BQU0sRUFBRXVELEtBQUssRUFBRXBELEtBQUssRUFBRSxHQUFHLE1BQU1OLElBQUlRLFlBQVksQ0FDNUNDLElBQUksQ0FBQyxZQUNMQyxNQUFNLENBQUMsS0FBSztZQUFFZ0QsT0FBTztZQUFTQyxNQUFNO1FBQUs7UUFFNUMsSUFBSXJELE9BQU87WUFDVE0sUUFBUU4sS0FBSyxDQUFDLHNDQUFzQ0E7WUFDcEQsTUFBTSxJQUFJdEQsbURBQVNBLENBQUM7Z0JBQ2xCbUQsTUFBTTtnQkFDTjNCLFNBQVM7WUFDWDtRQUNGO1FBRUEsT0FBTztZQUFFa0YsT0FBT0EsU0FBUztRQUFFO0lBQzdCO0FBQ0YsR0FBRyIsInNvdXJjZXMiOlsiL1VzZXJzL3BldGVyamFtZXNibGl6emFyZC9wcm9qZWN0cy9hcHBfY29kZXhjcm1hcHAvcGFja2FnZXMvc2VydmVyL3NyYy9yb3V0ZXJzL2NvbnRhY3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVFJQQ0Vycm9yIH0gZnJvbSAnQHRycGMvc2VydmVyJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuXG5pbXBvcnQgeyBzdXBhYmFzZUFkbWluIGFzIF9zdXBhYmFzZUFkbWluIH0gZnJvbSAnLi4vc3VwYWJhc2VBZG1pbic7XG5pbXBvcnQgeyByb3V0ZXIsIHByb3RlY3RlZFByb2NlZHVyZSB9IGZyb20gJy4uL3RycGMnO1xuXG5jb25zdCBjb250YWN0SW5wdXRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGlkOiB6LnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpLFxuICBmdWxsX25hbWU6IHouc3RyaW5nKCkubWluKDEsICdGdWxsIG5hbWUgaXMgcmVxdWlyZWQnKSxcbiAgZW1haWw6IHouc3RyaW5nKCkuZW1haWwoJ0ludmFsaWQgZW1haWwgYWRkcmVzcycpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgcGhvbmU6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICBwaG9uZV9jb3VudHJ5X2NvZGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLCAvLyBOZXdcbiAgY29tcGFueV9uYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgam9iX3RpdGxlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgYWRkcmVzc19zdHJlZXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLCAvLyBOZXdcbiAgYWRkcmVzc19jaXR5OiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSwgLy8gTmV3XG4gIGFkZHJlc3NfcG9zdGFsX2NvZGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLCAvLyBOZXdcbiAgYWRkcmVzc19jb3VudHJ5OiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSwgLy8gTmV3XG4gIHdlYnNpdGU6IHouc3RyaW5nKCkudXJsKHsgbWVzc2FnZTogXCJJbnZhbGlkIFVSTFwiIH0pLm9wdGlvbmFsKCkubnVsbGFibGUoKSwgLy8gTmV3XG4gIHByb2ZpbGVfaW1hZ2VfdXJsOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSwgLy8gUmV2ZXJ0ZWQ6IE5vIHN0cmljdCBVUkwgdmFsaWRhdGlvbiB0byBzdXBwb3J0IHVwbG9hZCBwYXRoc1xuICBub3Rlczogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gIHRhZ3M6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLCAvLyBOZXdcbiAgc29jaWFsX2hhbmRsZXM6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLCAvLyBOZXdcbiAgc291cmNlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgbGFzdF9jb250YWN0ZWRfYXQ6IHoucHJlcHJvY2VzcygoYXJnKSA9PiB7XG4gICAgaWYgKGFyZyA9PT0gJycgfHwgYXJnID09PSBudWxsIHx8IGFyZyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gbnVsbDtcbiAgICBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHwgYXJnIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGFyZyk7XG4gICAgICByZXR1cm4gaXNOYU4oZGF0ZS5nZXRUaW1lKCkpID8gbnVsbCA6IGRhdGU7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9LCB6LmRhdGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCkpLFxuICBlbnJpY2hlZF9kYXRhOiB6LmFueSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSwgLy8gTmV3XG4gIGVucmljaG1lbnRfc3RhdHVzOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSwgLy8gTmV3XG59KTtcblxuLy8gRGVmaW5lcyB0UlBDIHByb2NlZHVyZXMgZm9yIGNvbnRhY3RzLlxuZXhwb3J0IGNvbnN0IGNvbnRhY3RSb3V0ZXIgPSByb3V0ZXIoe1xuICAvLyA9PT09PSBQcm90ZWN0ZWQgUHJvY2VkdXJlcyAocmVxdWlyZSBhdXRoZW50aWNhdGlvbikgPT09PT1cblxuICAvLyBQcm90ZWN0ZWQgcHJvY2VkdXJlIGZvciBsaXN0aW5nIGF1dGhlbnRpY2F0ZWQgdXNlcidzIGNvbnRhY3RzXG4gIGxpc3Q6IHByb3RlY3RlZFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgc2VhcmNoOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIGdyb3VwSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSwgLy8gUmVtb3ZlIFVVSUQgdmFsaWRhdGlvbiB0byBoYW5kbGUgYWxsIGdyb3VwIElEIGZvcm1hdHNcbiAgICAgIH0pXG4gICAgKVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IHsgc2VhcmNoLCBncm91cElkIH0gPSBpbnB1dDtcbiAgICAgIGNvbnN0IHVzZXJJZCA9IGN0eC51c2VyPy5pZDtcblxuICAgICAgaWYgKCF1c2VySWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdVTkFVVEhPUklaRUQnIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBhIGdyb3VwSWQgaXMgcHJvdmlkZWQsIHdlIHN0YXJ0IGZyb20gZ3JvdXBfbWVtYmVycyBhbmQgZXhwYW5kIGNvbnRhY3RzLlxuICAgICAgLy8gVGhpcyBpcyB0aGUgbW9zdCBlZmZpY2llbnQgd2F5IHRvIGZpbHRlciBieSBncm91cC5cbiAgICAgIGlmIChncm91cElkKSB7XG4gICAgICAgIC8vIEZpcnN0LCBnZXQgdGhlIGNvbnRhY3QgSURzIHRoYXQgYmVsb25nIHRvIHRoaXMgZ3JvdXBcbiAgICAgICAgY29uc3QgeyBkYXRhOiBncm91cE1lbWJlcnMsIGVycm9yOiBtZW1iZXJFcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlVXNlclxuICAgICAgICAgIC5mcm9tKCdncm91cF9tZW1iZXJzJylcbiAgICAgICAgICAuc2VsZWN0KCdjb250YWN0X2lkJylcbiAgICAgICAgICAuZXEoJ2dyb3VwX2lkJywgZ3JvdXBJZCk7XG5cbiAgICAgICAgaWYgKG1lbWJlckVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGdyb3VwIG1lbWJlcnM6XCIsIG1lbWJlckVycm9yKTtcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICAgICAgbWVzc2FnZTogYEZhaWxlZCB0byByZXRyaWV2ZSBncm91cCBtZW1iZXJzOiAke21lbWJlckVycm9yLm1lc3NhZ2V9YCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIG5vIGNvbnRhY3RzIGluIHRoZSBncm91cCwgcmV0dXJuIGVtcHR5IGFycmF5XG4gICAgICAgIGlmICghZ3JvdXBNZW1iZXJzIHx8IGdyb3VwTWVtYmVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFeHRyYWN0IGNvbnRhY3QgSURzXG4gICAgICAgIGNvbnN0IGNvbnRhY3RJZHMgPSBncm91cE1lbWJlcnMubWFwKChtZW1iZXI6IHsgY29udGFjdF9pZDogc3RyaW5nIH0pID0+IG1lbWJlci5jb250YWN0X2lkKTtcblxuICAgICAgICAvLyBOb3cgcXVlcnkgY29udGFjdHMgd2l0aCBib3RoIGdyb3VwIGZpbHRlcmluZyAodmlhIElEcykgYW5kIHNlYXJjaFxuICAgICAgICBsZXQgY29udGFjdHNRdWVyeSA9IGN0eC5zdXBhYmFzZVVzZXJcbiAgICAgICAgICAuZnJvbSgnY29udGFjdHMnKVxuICAgICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAgIC5pbignaWQnLCBjb250YWN0SWRzKTtcblxuICAgICAgICAvLyBBZGQgc2VhcmNoIGZpbHRlciBpZiBwcm92aWRlZFxuICAgICAgICBpZiAoc2VhcmNoKSB7XG4gICAgICAgICAgY29udGFjdHNRdWVyeSA9IGNvbnRhY3RzUXVlcnkub3IoXG4gICAgICAgICAgICBgZnVsbF9uYW1lLmlsaWtlLiUke3NlYXJjaH0lLGVtYWlsLmlsaWtlLiUke3NlYXJjaH0lYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgb3JkZXJpbmdcbiAgICAgICAgY29udGFjdHNRdWVyeSA9IGNvbnRhY3RzUXVlcnkub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG5cbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgcXVlcnlcbiAgICAgICAgY29uc3QgeyBkYXRhOiBjb250YWN0cywgZXJyb3IgfSA9IGF3YWl0IGNvbnRhY3RzUXVlcnk7XG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGNvbnRhY3RzIGZvciBncm91cDpcIiwgZXJyb3IpO1xuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIHJldHJpZXZlIGNvbnRhY3RzIGZvciBncm91cDogJHtlcnJvci5tZXNzYWdlfWAsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29udGFjdHMgfHwgW107XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGdyb3VwSWQgaXMgcHJvdmlkZWQsIHdlIHF1ZXJ5IHRoZSBjb250YWN0cyB0YWJsZSBkaXJlY3RseS5cbiAgICAgIGVsc2Uge1xuICAgICAgICBsZXQgcXVlcnkgPSBjdHguc3VwYWJhc2VVc2VyLmZyb20oJ2NvbnRhY3RzJykuc2VsZWN0KCcqJyk7XG5cbiAgICAgICAgLy8gQ29uZGl0aW9uYWxseSBhZGQgdGhlIHNlYXJjaCBmaWx0ZXJcbiAgICAgICAgaWYgKHNlYXJjaCkge1xuICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkub3IoXG4gICAgICAgICAgICBgZnVsbF9uYW1lLmlsaWtlLiUke3NlYXJjaH0lLGVtYWlsLmlsaWtlLiUke3NlYXJjaH0lYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgZGVmYXVsdCBvcmRlcmluZ1xuICAgICAgICBxdWVyeSA9IHF1ZXJ5Lm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuXG4gICAgICAgIGNvbnN0IHsgZGF0YTogY29udGFjdHMsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcblxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgYWxsIGNvbnRhY3RzOlwiLCBlcnJvcik7XG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gcmV0cmlldmUgY29udGFjdHM6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250YWN0cyB8fCBbXTtcbiAgICAgIH1cbiAgICB9KSxcbiAgLy8gRmV0Y2ggYSBzaW5nbGUgY29udGFjdCBieSBJRFxuICBnZXRCeUlkOiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBjb250YWN0SWQ6IHouc3RyaW5nKCkudXVpZCgpIH0pKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIGlmICghY3R4LnVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdVTkFVVEhPUklaRUQnIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlVXNlclxuICAgICAgICAuZnJvbSgnY29udGFjdHMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdpZCcsIGlucHV0LmNvbnRhY3RJZClcbiAgICAgICAgLnNpbmdsZSgpO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNvbnRhY3QgYnkgaWQ6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIGNvbnRhY3QnLFxuICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KSxcblxuICBzYXZlOiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAuaW5wdXQoY29udGFjdElucHV0U2NoZW1hKSAvLyBVc2VzIHRoZSBzY2hlbWEgZGVmaW5lZCBhYm92ZSB0aGlzIHJvdXRlclxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIGlmICghY3R4LnVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdVTkFVVEhPUklaRUQnIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb250YWN0SWQgPSBpbnB1dC5pZDtcbiAgICAgIGNvbnN0IGZpZWxkc1RvU2F2ZSA9IHtcbiAgICAgICAgZnVsbF9uYW1lOiBpbnB1dC5mdWxsX25hbWUsXG4gICAgICAgIGVtYWlsOiBpbnB1dC5lbWFpbCB8fCBudWxsLFxuICAgICAgICBwaG9uZTogaW5wdXQucGhvbmUgfHwgbnVsbCxcbiAgICAgICAgcGhvbmVfY291bnRyeV9jb2RlOiBpbnB1dC5waG9uZV9jb3VudHJ5X2NvZGUgfHwgbnVsbCxcbiAgICAgICAgY29tcGFueV9uYW1lOiBpbnB1dC5jb21wYW55X25hbWUgfHwgbnVsbCxcbiAgICAgICAgam9iX3RpdGxlOiBpbnB1dC5qb2JfdGl0bGUgfHwgbnVsbCxcbiAgICAgICAgYWRkcmVzc19zdHJlZXQ6IGlucHV0LmFkZHJlc3Nfc3RyZWV0IHx8IG51bGwsXG4gICAgICAgIGFkZHJlc3NfY2l0eTogaW5wdXQuYWRkcmVzc19jaXR5IHx8IG51bGwsXG4gICAgICAgIGFkZHJlc3NfcG9zdGFsX2NvZGU6IGlucHV0LmFkZHJlc3NfcG9zdGFsX2NvZGUgfHwgbnVsbCxcbiAgICAgICAgYWRkcmVzc19jb3VudHJ5OiBpbnB1dC5hZGRyZXNzX2NvdW50cnkgfHwgbnVsbCxcbiAgICAgICAgd2Vic2l0ZTogaW5wdXQud2Vic2l0ZSB8fCBudWxsLFxuICAgICAgICBwcm9maWxlX2ltYWdlX3VybDogaW5wdXQucHJvZmlsZV9pbWFnZV91cmwgfHwgbnVsbCxcbiAgICAgICAgbm90ZXM6IGlucHV0Lm5vdGVzIHx8IG51bGwsXG4gICAgICAgIHRhZ3M6IGlucHV0LnRhZ3MgfHwgbnVsbCxcbiAgICAgICAgc29jaWFsX2hhbmRsZXM6IGlucHV0LnNvY2lhbF9oYW5kbGVzIHx8IG51bGwsXG4gICAgICAgIHNvdXJjZTogaW5wdXQuc291cmNlIHx8IG51bGwsXG4gICAgICAgIGxhc3RfY29udGFjdGVkX2F0OiBpbnB1dC5sYXN0X2NvbnRhY3RlZF9hdCB8fCBudWxsLFxuICAgICAgICBlbnJpY2hlZF9kYXRhOiBpbnB1dC5lbnJpY2hlZF9kYXRhIHx8IG51bGwsXG4gICAgICAgIGVucmljaG1lbnRfc3RhdHVzOiBpbnB1dC5lbnJpY2htZW50X3N0YXR1cyB8fCBudWxsLFxuICAgICAgfTtcblxuICAgICAgbGV0IGRhdGFPYmplY3Q6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbCA9IG51bGw7XG4gICAgICAvLyBTdXBhYmFzZSBlcnJvcnMgaGF2ZSBhICdjb2RlJyBwcm9wZXJ0eSAoc3RyaW5nKSBhbW9uZyBvdGhlcnNcbiAgICAgIGxldCBkYkVycm9yOiB7IG1lc3NhZ2U6IHN0cmluZzsgY29kZT86IHN0cmluZzsgZGV0YWlscz86IHN0cmluZzsgaGludD86IHN0cmluZyB9IHwgbnVsbCA9IG51bGw7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChjb250YWN0SWQpIHtcbiAgICAgICAgICAvLyBVUERBVEUgTE9HSUNcbiAgICAgICAgICBjb25zb2xlLndhcm4oYEF0dGVtcHRpbmcgY29udGFjdCB1cGRhdGUgZm9yIGlkOiAke2NvbnRhY3RJZH1gLCBmaWVsZHNUb1NhdmUpO1xuICAgICAgICAgIGxldCBhdHRlbXB0RmllbGRzID0geyAuLi5maWVsZHNUb1NhdmUgfTtcblxuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZU9wID0gYXdhaXQgY3R4LnN1cGFiYXNlVXNlclxuICAgICAgICAgICAgICAuZnJvbSgnY29udGFjdHMnKVxuICAgICAgICAgICAgICAudXBkYXRlKGF0dGVtcHRGaWVsZHMpXG4gICAgICAgICAgICAgIC5tYXRjaCh7IGlkOiBjb250YWN0SWQsIHVzZXJfaWQ6IGN0eC51c2VyLmlkIH0pXG4gICAgICAgICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAgICAgICAuc2luZ2xlKCk7XG4gICAgICAgICAgICBkYXRhT2JqZWN0ID0gdXBkYXRlT3AuZGF0YTtcbiAgICAgICAgICAgIGRiRXJyb3IgPSB1cGRhdGVPcC5lcnJvcjtcblxuICAgICAgICAgICAgaWYgKGRiRXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc3QgY29sdW1uTWF0Y2ggPSBkYkVycm9yLm1lc3NhZ2UubWF0Y2goL0NvdWxkIG5vdCBmaW5kIHRoZSAnKC4rKScgY29sdW1uLyk7XG4gICAgICAgICAgICAgIGlmIChjb2x1bW5NYXRjaCAmJiBPYmplY3QuaGFzT3duKGF0dGVtcHRGaWVsZHMsIGNvbHVtbk1hdGNoWzFdIGFzIGtleW9mIHR5cGVvZiBhdHRlbXB0RmllbGRzKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgJHtjb2x1bW5NYXRjaFsxXX0gY29sdW1uIG1pc3NpbmcsIHJldHJ5aW5nIHVwZGF0ZSB3aXRob3V0IGl0YCk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIChhdHRlbXB0RmllbGRzIGFzIGFueSlbY29sdW1uTWF0Y2hbMV1dO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhazsgXG4gICAgICAgICAgfSB3aGlsZSAoZGJFcnJvciAhPT0gbnVsbCk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJTlNFUlQgTE9HSUNcbiAgICAgICAgICBjb25zdCBpbnNlcnRQYXlsb2FkID0geyAuLi5maWVsZHNUb1NhdmUsIHVzZXJfaWQ6IGN0eC51c2VyLmlkIH07XG4gICAgICAgICAgY29uc29sZS53YXJuKCdbREVCVUddIEF0dGVtcHRpbmcgY29udGFjdCBpbnNlcnQ6JywgaW5zZXJ0UGF5bG9hZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgaW5zZXJ0T3AgPSBhd2FpdCBjdHguc3VwYWJhc2VVc2VyXG4gICAgICAgICAgICAuZnJvbSgnY29udGFjdHMnKVxuICAgICAgICAgICAgLmluc2VydChpbnNlcnRQYXlsb2FkKVxuICAgICAgICAgICAgLnNlbGVjdCgnaWQsIGNyZWF0ZWRfYXQsIHVwZGF0ZWRfYXQsIHVzZXJfaWQsIGVtYWlsLCBmdWxsX25hbWUsIHByb2ZpbGVfaW1hZ2VfdXJsJykgLy8gU2VsZWN0IG1pbmltYWwgZXNzZW50aWFsIGZpZWxkc1xuICAgICAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICAgICAgZGF0YU9iamVjdCA9IGluc2VydE9wLmRhdGE7XG4gICAgICAgICAgZGJFcnJvciA9IGluc2VydE9wLmVycm9yO1xuXG4gICAgICAgICAgaWYgKCFkYkVycm9yICYmICFkYXRhT2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJDb250YWN0IGluc2VydDogU3VwYWJhc2UgaW5zZXJ0IHN1Y2NlZWRlZCBidXQgLnNlbGVjdCgpIHJldHVybmVkIG5vIGRhdGEgKFJMUyB2aXNpYmlsaXR5IGlzc3VlPykuIENvbnN0cnVjdGluZyByZXNwb25zZSBmcm9tIGlucHV0LlwiKTtcbiAgICAgICAgICAgIC8vIFRoZSBpbnNlcnQgd2FzIGxpa2VseSBzdWNjZXNzZnVsLCBidXQgUkxTIHByZXZlbnRzIHJlYWRpbmcgaXQgYmFjayBpbW1lZGlhdGVseS5cbiAgICAgICAgICAgIC8vIFdlIHJldHVybiB0aGUgaW5wdXQgZGF0YSBtZXJnZWQgd2l0aCB1c2VyX2lkLCBidXQgc2VydmVyLWdlbmVyYXRlZCBmaWVsZHMgbGlrZSAnaWQnIGFuZCAnY3JlYXRlZF9hdCcgd2lsbCBiZSBtaXNzaW5nLlxuICAgICAgICAgICAgLy8gVGhlIGNsaWVudCBzaG91bGQgYmUgYXdhcmUgb3IgcmVmZXRjaCBpZiB0aGVzZSBhcmUgY3JpdGljYWwgaW1tZWRpYXRlbHkuXG4gICAgICAgICAgICBkYXRhT2JqZWN0ID0geyAuLi5pbnNlcnRQYXlsb2FkLCBpZDogdW5kZWZpbmVkLCBjcmVhdGVkX2F0OiB1bmRlZmluZWQsIHVwZGF0ZWRfYXQ6IHVuZGVmaW5lZCB9OyBcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGJFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHNhdmUgZXJyb3I6JywgSlNPTi5zdHJpbmdpZnkoZGJFcnJvciwgbnVsbCwgMiksIHsgaW5wdXQsIGNvbnRhY3RJZCB9KTtcbiAgICAgICAgICBpZiAoZGJFcnJvci5jb2RlID09PSAnMjM1MDUnKSB7IC8vIFBvc3RncmVTUUwgdW5pcXVlX3Zpb2xhdGlvblxuICAgICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICAgIGNvZGU6ICdDT05GTElDVCcsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGBBIGNvbnRhY3Qgd2l0aCB0aGlzIGVtYWlsICgke2lucHV0LmVtYWlsfSkgYWxyZWFkeSBleGlzdHMuYCxcbiAgICAgICAgICAgICAgY2F1c2U6IGRiRXJyb3IsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBEYXRhYmFzZSBlcnJvcjogJHtkYkVycm9yLm1lc3NhZ2V9YCxcbiAgICAgICAgICAgIGNhdXNlOiBkYkVycm9yLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFkYXRhT2JqZWN0KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2Ugc2F2ZSByZXR1cm5lZCBubyBkYXRhIGFuZCBubyBleHBsaWNpdCBlcnJvciBhZnRlciBwcm9jZXNzaW5nLicsIHsgaW5wdXQsIGNvbnRhY3RJZCB9KTtcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBzYXZlIGNvbnRhY3Q6IE5vIGRhdGEgcmV0dXJuZWQgZnJvbSBkYXRhYmFzZSBvcGVyYXRpb24uJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS53YXJuKCdDb250YWN0IHNhdmUgc3VjY2Vzc2Z1bDonLCBkYXRhT2JqZWN0KTtcbiAgICAgICAgcmV0dXJuIGRhdGFPYmplY3Q7XG5cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFRSUENFcnJvcikge1xuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuaGFuZGxlZCBlcnJvciBpbiBjb250YWN0IHNhdmUgcHJvY2VkdXJlOicsIGVycm9yLCB7IGlucHV0LCBjb250YWN0SWQgfSk7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkIHdoaWxlIHNhdmluZyB0aGUgY29udGFjdC4nLFxuICAgICAgICAgIGNhdXNlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiB1bmRlZmluZWQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLFxuXG4gIGRlbGV0ZTogcHJvdGVjdGVkUHJvY2VkdXJlXG4gICAgLmlucHV0KHoub2JqZWN0KHsgY29udGFjdElkOiB6LnN0cmluZygpLnV1aWQoKSB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICBpZiAoIWN0eC51c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnVU5BVVRIT1JJWkVEJyB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlVXNlclxuICAgICAgICAuZnJvbSgnY29udGFjdHMnKVxuICAgICAgICAuZGVsZXRlKClcbiAgICAgICAgLm1hdGNoKHsgaWQ6IGlucHV0LmNvbnRhY3RJZCwgdXNlcl9pZDogY3R4LnVzZXIuaWQgfSk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBjb250YWN0OicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBkZWxldGUgY29udGFjdCcsXG4gICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGNvbnRhY3RJZDogaW5wdXQuY29udGFjdElkIH07XG4gICAgfSksXG5cbiAgLy8gVXBkYXRlIGp1c3QgdGhlIG5vdGVzIGZpZWxkIG9mIGEgY29udGFjdFxuICB1cGRhdGVOb3RlczogcHJvdGVjdGVkUHJvY2VkdXJlXG4gICAgLmlucHV0KHoub2JqZWN0KHtcbiAgICAgIGNvbnRhY3RJZDogei5zdHJpbmcoKS51dWlkKCksXG4gICAgICBub3Rlczogei5zdHJpbmcoKVxuICAgIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIGlmICghY3R4LnVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdVTkFVVEhPUklaRUQnIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7IGNvbnRhY3RJZCwgbm90ZXMgfSA9IGlucHV0O1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICAvLyBWZXJpZnkgdGhlIGNvbnRhY3QgYmVsb25ncyB0byB0aGUgdXNlclxuICAgICAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nQ29udGFjdCwgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IGN0eC5zdXBhYmFzZUFkbWluXG4gICAgICAgICAgLmZyb20oJ2NvbnRhY3RzJylcbiAgICAgICAgICAuc2VsZWN0KCdpZCcpXG4gICAgICAgICAgLmVxKCdpZCcsIGNvbnRhY3RJZClcbiAgICAgICAgICAuZXEoJ3VzZXJfaWQnLCBjdHgudXNlci5pZClcbiAgICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgICAgaWYgKGZldGNoRXJyb3IgfHwgIWV4aXN0aW5nQ29udGFjdCkge1xuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogJ05PVF9GT1VORCcsXG4gICAgICAgICAgICBtZXNzYWdlOiAnQ29udGFjdCBub3QgZm91bmQgb3IgeW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gdXBkYXRlIGl0JyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBvbmx5IHRoZSBub3RlcyBmaWVsZFxuICAgICAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlQWRtaW5cbiAgICAgICAgICAuZnJvbSgnY29udGFjdHMnKVxuICAgICAgICAgIC51cGRhdGUoeyBub3RlcywgdXBkYXRlZF9hdDogbmV3IERhdGUoKSB9KVxuICAgICAgICAgIC5lcSgnaWQnLCBjb250YWN0SWQpXG4gICAgICAgICAgLmVxKCd1c2VyX2lkJywgY3R4LnVzZXIuaWQpO1xuXG4gICAgICAgIGlmICh1cGRhdGVFcnJvcikge1xuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIHVwZGF0ZSBjb250YWN0IG5vdGVzOiAke3VwZGF0ZUVycm9yLm1lc3NhZ2V9YCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFRSUENFcnJvcikge1xuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuaGFuZGxlZCBlcnJvciBpbiB1cGRhdGVOb3RlcyBwcm9jZWR1cmU6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHVwZGF0ZSBjb250YWN0IG5vdGVzIGR1ZSB0byBhbiB1bmV4cGVjdGVkIGVycm9yJyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSksXG5cbiAgLy8gR2V0IHRvdGFsIGNvdW50IG9mIGNvbnRhY3RzIGZvciB0aGUgYXV0aGVudGljYXRlZCB1c2VyXG4gIGdldFRvdGFsQ29udGFjdHNDb3VudDogcHJvdGVjdGVkUHJvY2VkdXJlLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgaWYgKCFjdHgudXNlcikge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdVTkFVVEhPUklaRUQnIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBVc2UgY291bnQgd2l0aCBoZWFkOiB0cnVlIGZvciBlZmZpY2llbmN5IC0gZG9lc24ndCByZXR1cm4gdGhlIGJvZHksIGp1c3QgdGhlIGNvdW50XG4gICAgY29uc3QgeyBjb3VudCwgZXJyb3IgfSA9IGF3YWl0IGN0eC5zdXBhYmFzZVVzZXJcbiAgICAgIC5mcm9tKCdjb250YWN0cycpXG4gICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBnZXQgdG90YWwgY29udGFjdCBjb3VudDpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICBtZXNzYWdlOiAnQ291bGQgbm90IHJldHJpZXZlIGNvbnRhY3QgY291bnQuJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4geyBjb3VudDogY291bnQgPz8gMCB9O1xuICB9KSxcbn0pO1xuIl0sIm5hbWVzIjpbIlRSUENFcnJvciIsInoiLCJyb3V0ZXIiLCJwcm90ZWN0ZWRQcm9jZWR1cmUiLCJjb250YWN0SW5wdXRTY2hlbWEiLCJvYmplY3QiLCJpZCIsInN0cmluZyIsInV1aWQiLCJvcHRpb25hbCIsImZ1bGxfbmFtZSIsIm1pbiIsImVtYWlsIiwibnVsbGFibGUiLCJwaG9uZSIsInBob25lX2NvdW50cnlfY29kZSIsImNvbXBhbnlfbmFtZSIsImpvYl90aXRsZSIsImFkZHJlc3Nfc3RyZWV0IiwiYWRkcmVzc19jaXR5IiwiYWRkcmVzc19wb3N0YWxfY29kZSIsImFkZHJlc3NfY291bnRyeSIsIndlYnNpdGUiLCJ1cmwiLCJtZXNzYWdlIiwicHJvZmlsZV9pbWFnZV91cmwiLCJub3RlcyIsInRhZ3MiLCJhcnJheSIsInNvY2lhbF9oYW5kbGVzIiwic291cmNlIiwibGFzdF9jb250YWN0ZWRfYXQiLCJwcmVwcm9jZXNzIiwiYXJnIiwidW5kZWZpbmVkIiwiRGF0ZSIsImRhdGUiLCJpc05hTiIsImdldFRpbWUiLCJlbnJpY2hlZF9kYXRhIiwiYW55IiwiZW5yaWNobWVudF9zdGF0dXMiLCJjb250YWN0Um91dGVyIiwibGlzdCIsImlucHV0Iiwic2VhcmNoIiwiZ3JvdXBJZCIsInF1ZXJ5IiwiY3R4IiwidXNlcklkIiwidXNlciIsImNvZGUiLCJkYXRhIiwiZ3JvdXBNZW1iZXJzIiwiZXJyb3IiLCJtZW1iZXJFcnJvciIsInN1cGFiYXNlVXNlciIsImZyb20iLCJzZWxlY3QiLCJlcSIsImNvbnNvbGUiLCJsZW5ndGgiLCJjb250YWN0SWRzIiwibWFwIiwibWVtYmVyIiwiY29udGFjdF9pZCIsImNvbnRhY3RzUXVlcnkiLCJpbiIsIm9yIiwib3JkZXIiLCJhc2NlbmRpbmciLCJjb250YWN0cyIsImdldEJ5SWQiLCJjb250YWN0SWQiLCJzaW5nbGUiLCJjYXVzZSIsInNhdmUiLCJtdXRhdGlvbiIsImZpZWxkc1RvU2F2ZSIsImRhdGFPYmplY3QiLCJkYkVycm9yIiwid2FybiIsImF0dGVtcHRGaWVsZHMiLCJ1cGRhdGVPcCIsInVwZGF0ZSIsIm1hdGNoIiwidXNlcl9pZCIsImNvbHVtbk1hdGNoIiwiT2JqZWN0IiwiaGFzT3duIiwiaW5zZXJ0UGF5bG9hZCIsImluc2VydE9wIiwiaW5zZXJ0IiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJKU09OIiwic3RyaW5naWZ5IiwiRXJyb3IiLCJkZWxldGUiLCJzdWNjZXNzIiwidXBkYXRlTm90ZXMiLCJleGlzdGluZ0NvbnRhY3QiLCJmZXRjaEVycm9yIiwic3VwYWJhc2VBZG1pbiIsInVwZGF0ZUVycm9yIiwiZ2V0VG90YWxDb250YWN0c0NvdW50IiwiY291bnQiLCJoZWFkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../packages/server/src/routers/contact.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/server/src/routers/dashboard.ts":
/*!******************************************************!*\
  !*** ../../packages/server/src/routers/dashboard.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dashboardRouter: () => (/* binding */ dashboardRouter)\n/* harmony export */ });\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/../../node_modules/.pnpm/@trpc+server@11.4.2_typescript@5.8.3/node_modules/@trpc/server/dist/tracked-gU3ttYjg.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/../../node_modules/.pnpm/zod@3.25.67/node_modules/zod/dist/esm/index.js\");\n/* harmony import */ var _trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../trpc */ \"(rsc)/../../packages/server/src/trpc.ts\");\n\n\n\n// Define Zod schemas for validation\nconst dateRangeSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    startDate: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().datetime().optional(),\n    endDate: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().datetime().optional()\n});\n// Define the dashboard router\nconst dashboardRouter = (0,_trpc__WEBPACK_IMPORTED_MODULE_1__.router)({\n    // Get contact metrics\n    contactMetrics: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(dateRangeSchema.optional()).query(async ({ ctx, input })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        try {\n            // Default to last 30 days if no date range provided\n            const endDate = input?.endDate ? new Date(input.endDate) : new Date();\n            const startDate = input?.startDate ? new Date(input.startDate) : new Date(endDate.getTime() - 30 * 24 * 60 * 60 * 1000);\n            const startDateStr = startDate.toISOString();\n            const endDateStr = endDate.toISOString();\n            // Get total contacts count\n            const { count: totalContacts, error: countError } = await ctx.supabaseUser.from('contacts').select('*', {\n                count: 'exact',\n                head: true\n            });\n            if (countError) throw countError;\n            // Get new contacts in date range\n            const { data: newContacts, error: newContactsError } = await ctx.supabaseUser.from('contacts').select('id').gte('created_at', startDateStr).lte('created_at', endDateStr);\n            if (newContactsError) throw newContactsError;\n            // Get contacts by wellness journey stage\n            const { data: journeyStages, error: journeyError } = await ctx.supabaseUser.rpc('get_contacts_by_journey_stage');\n            if (journeyError) throw journeyError;\n            // Get contacts with recent activity\n            const { data: recentActivity, error: activityError } = await ctx.supabaseUser.from('contacts').select('id, full_name, last_contacted_at').order('last_contacted_at', {\n                ascending: false\n            }).limit(5);\n            if (activityError) throw activityError;\n            return {\n                totalContacts: totalContacts || 0,\n                newContacts: newContacts?.length || 0,\n                journeyStageDistribution: journeyStages || [],\n                recentActivity: recentActivity || []\n            };\n        } catch (error) {\n            console.error('Error fetching contact metrics:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch contact metrics',\n                cause: error\n            });\n        }\n    }),\n    // Get session metrics\n    sessionMetrics: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(dateRangeSchema.optional()).query(async ({ ctx, input })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        try {\n            // Default to last 30 days if no date range provided\n            const endDate = input?.endDate ? new Date(input.endDate) : new Date();\n            const startDate = input?.startDate ? new Date(input.startDate) : new Date(endDate.getTime() - 30 * 24 * 60 * 60 * 1000);\n            const startDateStr = startDate.toISOString();\n            const endDateStr = endDate.toISOString();\n            // Get total sessions count\n            const { count: totalSessions, error: countError } = await ctx.supabaseUser.from('sessions').select('*', {\n                count: 'exact',\n                head: true\n            });\n            if (countError) throw countError;\n            // Get sessions in date range\n            const { data: sessionsInRange, error: rangeError } = await ctx.supabaseUser.from('sessions').select('id, session_time, session_type').gte('session_time', startDateStr).lte('session_time', endDateStr).order('session_time', {\n                ascending: true\n            });\n            if (rangeError) throw rangeError;\n            // Get sessions by type\n            const { data: sessionTypes, error: typesError } = await ctx.supabaseUser.rpc('get_sessions_by_type');\n            if (typesError) throw typesError;\n            // Get upcoming sessions\n            const now = new Date().toISOString();\n            const { data: upcomingSessions, error: upcomingError } = await ctx.supabaseUser.from('sessions').select('id, session_time, contact_id, contacts(full_name)').gt('session_time', now).order('session_time', {\n                ascending: true\n            }).limit(5);\n            if (upcomingError) throw upcomingError;\n            // Calculate sessions per day for chart\n            const sessionsByDay = new Map();\n            const dayMs = 24 * 60 * 60 * 1000;\n            // Initialize all days in range with 0 sessions\n            for(let d = new Date(startDate); d <= endDate; d = new Date(d.getTime() + dayMs)){\n                const dateStr = d.toISOString().split('T')[0];\n                sessionsByDay.set(dateStr, 0);\n            }\n            // Count sessions per day\n            sessionsInRange?.forEach((session)=>{\n                const dateStr = new Date(session.session_time).toISOString().split('T')[0];\n                sessionsByDay.set(dateStr, (sessionsByDay.get(dateStr) || 0) + 1);\n            });\n            // Convert to array for chart data\n            const sessionTrend = Array.from(sessionsByDay.entries()).map(([date, count])=>({\n                    date,\n                    count\n                }));\n            return {\n                totalSessions: totalSessions || 0,\n                sessionsInRange: sessionsInRange?.length || 0,\n                sessionTypeDistribution: sessionTypes || [],\n                upcomingSessions: upcomingSessions || [],\n                sessionTrend\n            };\n        } catch (error) {\n            console.error('Error fetching session metrics:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch session metrics',\n                cause: error\n            });\n        }\n    }),\n    // Get AI action metrics\n    aiActionMetrics: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(dateRangeSchema.optional()).query(async ({ ctx, input })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        try {\n            // Default to last 30 days if no date range provided\n            const endDate = input?.endDate ? new Date(input.endDate) : new Date();\n            const startDate = input?.startDate ? new Date(input.startDate) : new Date(endDate.getTime() - 30 * 24 * 60 * 60 * 1000);\n            const startDateStr = startDate.toISOString();\n            const endDateStr = endDate.toISOString();\n            // Get total AI actions count\n            const { count: totalActions, error: countError } = await ctx.supabaseUser.from('ai_actions').select('*', {\n                count: 'exact',\n                head: true\n            });\n            if (countError) throw countError;\n            // Get AI actions by status\n            const { data: actionsByStatus, error: statusError } = await ctx.supabaseUser.rpc('get_ai_actions_by_status');\n            if (statusError) throw statusError;\n            // Get AI actions by type\n            const { data: actionsByType, error: typeError } = await ctx.supabaseUser.rpc('get_ai_actions_by_type');\n            if (typeError) throw typeError;\n            // Get recent AI actions\n            const { data: recentActions, error: recentError } = await ctx.supabaseUser.from('ai_actions').select('id, action_type, suggestion, status, created_at').order('created_at', {\n                ascending: false\n            }).limit(5);\n            if (recentError) throw recentError;\n            // Get implementation rate\n            const { data: implementedActions, error: implementedError } = await ctx.supabaseUser.from('ai_actions').select('id').eq('implemented', true);\n            if (implementedError) throw implementedError;\n            const implementationRate = totalActions ? (implementedActions?.length || 0) / totalActions : 0;\n            return {\n                totalActions: totalActions || 0,\n                actionsByStatus: actionsByStatus || [],\n                actionsByType: actionsByType || [],\n                recentActions: recentActions || [],\n                implementationRate\n            };\n        } catch (error) {\n            console.error('Error fetching AI action metrics:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch AI action metrics',\n                cause: error\n            });\n        }\n    }),\n    // Get overall dashboard summary\n    summary: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(dateRangeSchema.optional()).query(async ({ ctx, input })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        try {\n            // Default to last 30 days if no date range provided\n            const endDate = input?.endDate ? new Date(input.endDate) : new Date();\n            const startDate = input?.startDate ? new Date(input.startDate) : new Date(endDate.getTime() - 30 * 24 * 60 * 60 * 1000);\n            const startDateStr = startDate.toISOString();\n            const endDateStr = endDate.toISOString();\n            // Get counts for key metrics\n            const [{ count: totalContacts }, { count: totalSessions }, { count: totalActions }, { count: totalNotes }, { data: newContacts }, { data: upcomingSessions }, { data: pendingActions }] = await Promise.all([\n                ctx.supabaseUser.from('contacts').select('*', {\n                    count: 'exact',\n                    head: true\n                }),\n                ctx.supabaseUser.from('sessions').select('*', {\n                    count: 'exact',\n                    head: true\n                }),\n                ctx.supabaseUser.from('ai_actions').select('*', {\n                    count: 'exact',\n                    head: true\n                }),\n                ctx.supabaseUser.from('notes').select('*', {\n                    count: 'exact',\n                    head: true\n                }),\n                ctx.supabaseUser.from('contacts').select('id').gte('created_at', startDateStr).lte('created_at', endDateStr),\n                ctx.supabaseUser.from('sessions').select('id').gt('session_time', new Date().toISOString()),\n                ctx.supabaseUser.from('ai_actions').select('id').eq('status', 'pending')\n            ]);\n            return {\n                totalContacts: totalContacts || 0,\n                totalSessions: totalSessions || 0,\n                totalAiActions: totalActions || 0,\n                totalNotes: totalNotes || 0,\n                newContactsCount: newContacts?.length || 0,\n                upcomingSessionsCount: upcomingSessions?.length || 0,\n                pendingActionsCount: pendingActions?.length || 0,\n                dateRange: {\n                    startDate: startDateStr,\n                    endDate: endDateStr\n                }\n            };\n        } catch (error) {\n            console.error('Error fetching dashboard summary:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch dashboard summary',\n                cause: error\n            });\n        }\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2VydmVyL3NyYy9yb3V0ZXJzL2Rhc2hib2FyZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXlDO0FBQ2pCO0FBRTZCO0FBRXJELG9DQUFvQztBQUNwQyxNQUFNSSxrQkFBa0JILHlDQUFRLENBQUM7SUFDL0JLLFdBQVdMLHlDQUFRLEdBQUdPLFFBQVEsR0FBR0MsUUFBUTtJQUN6Q0MsU0FBU1QseUNBQVEsR0FBR08sUUFBUSxHQUFHQyxRQUFRO0FBQ3pDO0FBRUEsOEJBQThCO0FBQ3ZCLE1BQU1FLGtCQUFrQlQsNkNBQU1BLENBQUM7SUFDcEMsc0JBQXNCO0lBQ3RCVSxnQkFBZ0JULHFEQUFrQkEsQ0FDL0JVLEtBQUssQ0FBQ1QsZ0JBQWdCSyxRQUFRLElBQzlCSyxLQUFLLENBQUMsT0FBTyxFQUFFQyxHQUFHLEVBQUVGLEtBQUssRUFBRTtRQUMxQixJQUFJLENBQUNFLElBQUlDLElBQUksRUFBRTtZQUNiLE1BQU0sSUFBSWhCLG1EQUFTQSxDQUFDO2dCQUFFaUIsTUFBTTtZQUFlO1FBQzdDO1FBRUEsSUFBSTtZQUNGLG9EQUFvRDtZQUNwRCxNQUFNUCxVQUFVRyxPQUFPSCxVQUFVLElBQUlRLEtBQUtMLE1BQU1ILE9BQU8sSUFBSSxJQUFJUTtZQUMvRCxNQUFNWixZQUFZTyxPQUFPUCxZQUNyQixJQUFJWSxLQUFLTCxNQUFNUCxTQUFTLElBQ3hCLElBQUlZLEtBQUtSLFFBQVFTLE9BQU8sS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO1lBRXJELE1BQU1DLGVBQWVkLFVBQVVlLFdBQVc7WUFDMUMsTUFBTUMsYUFBYVosUUFBUVcsV0FBVztZQUV0QywyQkFBMkI7WUFDM0IsTUFBTSxFQUFFRSxPQUFPQyxhQUFhLEVBQUVDLE9BQU9DLFVBQVUsRUFBRSxHQUFHLE1BQU1YLElBQUlZLFlBQVksQ0FDdkVDLElBQUksQ0FBQyxZQUNMQyxNQUFNLENBQUMsS0FBSztnQkFBRU4sT0FBTztnQkFBU08sTUFBTTtZQUFLO1lBRTVDLElB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M0VmLElBQUlZLFlBQVksQ0FBQ0MsSUFBSSxDQUFDLGNBQWNDLE1BQU0sQ0FBQyxLQUFLO29CQUFFTixPQUFPO29CQUFTTyxNQUFNO2dCQUFLO2dCQUM3RWYsSUFBSVksWUFBWSxDQUFDQyxJQUFJLENBQUMsU0FBU0MsTUFBTSxDQUFDLEtBQUs7b0JBQUVOLE9BQU87b0JBQVNPLE1BQU07Z0JBQUs7Z0JBQ3hFZixJQUFJWSxZQUFZLENBQUNDLElBQUksQ0FBQyxZQUFZQyxNQUFNLENBQUMsTUFBTUssR0FBRyxDQUFDLGNBQWNkLGNBQWNlLEdBQUcsQ0FBQyxjQUFjYjtnQkFDakdQLElBQUlZLFlBQVksQ0FBQ0MsSUFBSSxDQUFDLFlBQVlDLE1BQU0sQ0FBQyxNQUFNNkIsRUFBRSxDQUFDLGdCQUFnQixJQUFJeEMsT0FBT0csV0FBVztnQkFDeEZOLElBQUlZLFlBQVksQ0FBQ0MsSUFBSSxDQUFDLGNBQWNDLE1BQU0sQ0FBQyxNQUFNeUQsRUFBRSxDQUFDLFVBQVU7YUFDL0Q7WUFFRCxPQUFPO2dCQUNMOUQsZUFBZUEsaUJBQWlCO2dCQUNoQzBCLGVBQWVBLGlCQUFpQjtnQkFDaEMyQyxnQkFBZ0JoQixnQkFBZ0I7Z0JBQ2hDWSxZQUFZQSxjQUFjO2dCQUMxQkssa0JBQWtCOUQsYUFBYVksVUFBVTtnQkFDekNtRCx1QkFBdUJ2QyxrQkFBa0JaLFVBQVU7Z0JBQ25Eb0QscUJBQXFCTixnQkFBZ0I5QyxVQUFVO2dCQUMvQ3FELFdBQVc7b0JBQ1QzRixXQUFXYztvQkFDWFYsU0FBU1k7Z0JBQ1g7WUFDRjtRQUNGLEVBQUUsT0FBT0csT0FBTztZQUNkcUIsUUFBUXJCLEtBQUssQ0FBQyxxQ0FBcUNBO1lBQ25ELE1BQU0sSUFBSXpCLG1EQUFTQSxDQUFDO2dCQUNsQmlCLE1BQU07Z0JBQ044QixTQUFTO2dCQUNUQyxPQUFPdkI7WUFDVDtRQUNGO0lBQ0Y7QUFDSixHQUFHIiwic291cmNlcyI6WyIvVXNlcnMvcGV0ZXJqYW1lc2JsaXp6YXJkL3Byb2plY3RzL2FwcF9jb2RleGNybWFwcC9wYWNrYWdlcy9zZXJ2ZXIvc3JjL3JvdXRlcnMvZGFzaGJvYXJkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRSUENFcnJvciB9IGZyb20gJ0B0cnBjL3NlcnZlcic7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcblxuaW1wb3J0IHsgcm91dGVyLCBwcm90ZWN0ZWRQcm9jZWR1cmUgfSBmcm9tICcuLi90cnBjJztcblxuLy8gRGVmaW5lIFpvZCBzY2hlbWFzIGZvciB2YWxpZGF0aW9uXG5jb25zdCBkYXRlUmFuZ2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHN0YXJ0RGF0ZTogei5zdHJpbmcoKS5kYXRldGltZSgpLm9wdGlvbmFsKCksXG4gIGVuZERhdGU6IHouc3RyaW5nKCkuZGF0ZXRpbWUoKS5vcHRpb25hbCgpLFxufSk7XG5cbi8vIERlZmluZSB0aGUgZGFzaGJvYXJkIHJvdXRlclxuZXhwb3J0IGNvbnN0IGRhc2hib2FyZFJvdXRlciA9IHJvdXRlcih7XG4gIC8vIEdldCBjb250YWN0IG1ldHJpY3NcbiAgY29udGFjdE1ldHJpY3M6IHByb3RlY3RlZFByb2NlZHVyZVxuICAgIC5pbnB1dChkYXRlUmFuZ2VTY2hlbWEub3B0aW9uYWwoKSlcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBpZiAoIWN0eC51c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnVU5BVVRIT1JJWkVEJyB9KTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gRGVmYXVsdCB0byBsYXN0IDMwIGRheXMgaWYgbm8gZGF0ZSByYW5nZSBwcm92aWRlZFxuICAgICAgICBjb25zdCBlbmREYXRlID0gaW5wdXQ/LmVuZERhdGUgPyBuZXcgRGF0ZShpbnB1dC5lbmREYXRlKSA6IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IGlucHV0Py5zdGFydERhdGUgXG4gICAgICAgICAgPyBuZXcgRGF0ZShpbnB1dC5zdGFydERhdGUpIFxuICAgICAgICAgIDogbmV3IERhdGUoZW5kRGF0ZS5nZXRUaW1lKCkgLSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xuXG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZVN0ciA9IHN0YXJ0RGF0ZS50b0lTT1N0cmluZygpO1xuICAgICAgICBjb25zdCBlbmREYXRlU3RyID0gZW5kRGF0ZS50b0lTT1N0cmluZygpO1xuXG4gICAgICAgIC8vIEdldCB0b3RhbCBjb250YWN0cyBjb3VudFxuICAgICAgICBjb25zdCB7IGNvdW50OiB0b3RhbENvbnRhY3RzLCBlcnJvcjogY291bnRFcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlVXNlclxuICAgICAgICAgIC5mcm9tKCdjb250YWN0cycpXG4gICAgICAgICAgLnNlbGVjdCgnKicsIHsgY291bnQ6ICdleGFjdCcsIGhlYWQ6IHRydWUgfSk7XG5cbiAgICAgICAgaWYgKGNvdW50RXJyb3IpIHRocm93IGNvdW50RXJyb3I7XG5cbiAgICAgICAgLy8gR2V0IG5ldyBjb250YWN0cyBpbiBkYXRlIHJhbmdlXG4gICAgICAgIGNvbnN0IHsgZGF0YTogbmV3Q29udGFjdHMsIGVycm9yOiBuZXdDb250YWN0c0Vycm9yIH0gPSBhd2FpdCBjdHguc3VwYWJhc2VVc2VyXG4gICAgICAgICAgLmZyb20oJ2NvbnRhY3RzJylcbiAgICAgICAgICAuc2VsZWN0KCdpZCcpXG4gICAgICAgICAgLmd0ZSgnY3JlYXRlZF9hdCcsIHN0YXJ0RGF0ZVN0cilcbiAgICAgICAgICAubHRlKCdjcmVhdGVkX2F0JywgZW5kRGF0ZVN0cik7XG5cbiAgICAgICAgaWYgKG5ld0NvbnRhY3RzRXJyb3IpIHRocm93IG5ld0NvbnRhY3RzRXJyb3I7XG5cbiAgICAgICAgLy8gR2V0IGNvbnRhY3RzIGJ5IHdlbGxuZXNzIGpvdXJuZXkgc3RhZ2VcbiAgICAgICAgY29uc3QgeyBkYXRhOiBqb3VybmV5U3RhZ2VzLCBlcnJvcjogam91cm5leUVycm9yIH0gPSBhd2FpdCBjdHguc3VwYWJhc2VVc2VyXG4gICAgICAgICAgLnJwYygnZ2V0X2NvbnRhY3RzX2J5X2pvdXJuZXlfc3RhZ2UnKTtcblxuICAgICAgICBpZiAoam91cm5leUVycm9yKSB0aHJvdyBqb3VybmV5RXJyb3I7XG5cbiAgICAgICAgLy8gR2V0IGNvbnRhY3RzIHdpdGggcmVjZW50IGFjdGl2aXR5XG4gICAgICAgIGNvbnN0IHsgZGF0YTogcmVjZW50QWN0aXZpdHksIGVycm9yOiBhY3Rpdml0eUVycm9yIH0gPSBhd2FpdCBjdHguc3VwYWJhc2VVc2VyXG4gICAgICAgICAgLmZyb20oJ2NvbnRhY3RzJylcbiAgICAgICAgICAuc2VsZWN0KCdpZCwgZnVsbF9uYW1lLCBsYXN0X2NvbnRhY3RlZF9hdCcpXG4gICAgICAgICAgLm9yZGVyKCdsYXN0X2NvbnRhY3RlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgICAgICAgIC5saW1pdCg1KTtcblxuICAgICAgICBpZiAoYWN0aXZpdHlFcnJvcikgdGhyb3cgYWN0aXZpdHlFcnJvcjtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRvdGFsQ29udGFjdHM6IHRvdGFsQ29udGFjdHMgfHwgMCxcbiAgICAgICAgICBuZXdDb250YWN0czogbmV3Q29udGFjdHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgIGpvdXJuZXlTdGFnZURpc3RyaWJ1dGlvbjogam91cm5leVN0YWdlcyB8fCBbXSxcbiAgICAgICAgICByZWNlbnRBY3Rpdml0eTogcmVjZW50QWN0aXZpdHkgfHwgW10sXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjb250YWN0IG1ldHJpY3M6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIGNvbnRhY3QgbWV0cmljcycsXG4gICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KSxcblxuICAvLyBHZXQgc2Vzc2lvbiBtZXRyaWNzXG4gIHNlc3Npb25NZXRyaWNzOiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAuaW5wdXQoZGF0ZVJhbmdlU2NoZW1hLm9wdGlvbmFsKCkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgaWYgKCFjdHgudXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ1VOQVVUSE9SSVpFRCcgfSk7XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIERlZmF1bHQgdG8gbGFzdCAzMCBkYXlzIGlmIG5vIGRhdGUgcmFuZ2UgcHJvdmlkZWRcbiAgICAgICAgY29uc3QgZW5kRGF0ZSA9IGlucHV0Py5lbmREYXRlID8gbmV3IERhdGUoaW5wdXQuZW5kRGF0ZSkgOiBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBzdGFydERhdGUgPSBpbnB1dD8uc3RhcnREYXRlIFxuICAgICAgICAgID8gbmV3IERhdGUoaW5wdXQuc3RhcnREYXRlKSBcbiAgICAgICAgICA6IG5ldyBEYXRlKGVuZERhdGUuZ2V0VGltZSgpIC0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcblxuICAgICAgICBjb25zdCBzdGFydERhdGVTdHIgPSBzdGFydERhdGUudG9JU09TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgZW5kRGF0ZVN0ciA9IGVuZERhdGUudG9JU09TdHJpbmcoKTtcblxuICAgICAgICAvLyBHZXQgdG90YWwgc2Vzc2lvbnMgY291bnRcbiAgICAgICAgY29uc3QgeyBjb3VudDogdG90YWxTZXNzaW9ucywgZXJyb3I6IGNvdW50RXJyb3IgfSA9IGF3YWl0IGN0eC5zdXBhYmFzZVVzZXJcbiAgICAgICAgICAuZnJvbSgnc2Vzc2lvbnMnKVxuICAgICAgICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pO1xuXG4gICAgICAgIGlmIChjb3VudEVycm9yKSB0aHJvdyBjb3VudEVycm9yO1xuXG4gICAgICAgIC8vIEdldCBzZXNzaW9ucyBpbiBkYXRlIHJhbmdlXG4gICAgICAgIGNvbnN0IHsgZGF0YTogc2Vzc2lvbnNJblJhbmdlLCBlcnJvcjogcmFuZ2VFcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlVXNlclxuICAgICAgICAgIC5mcm9tKCdzZXNzaW9ucycpXG4gICAgICAgICAgLnNlbGVjdCgnaWQsIHNlc3Npb25fdGltZSwgc2Vzc2lvbl90eXBlJylcbiAgICAgICAgICAuZ3RlKCdzZXNzaW9uX3RpbWUnLCBzdGFydERhdGVTdHIpXG4gICAgICAgICAgLmx0ZSgnc2Vzc2lvbl90aW1lJywgZW5kRGF0ZVN0cilcbiAgICAgICAgICAub3JkZXIoJ3Nlc3Npb25fdGltZScsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xuXG4gICAgICAgIGlmIChyYW5nZUVycm9yKSB0aHJvdyByYW5nZUVycm9yO1xuXG4gICAgICAgIC8vIEdldCBzZXNzaW9ucyBieSB0eXBlXG4gICAgICAgIGNvbnN0IHsgZGF0YTogc2Vzc2lvblR5cGVzLCBlcnJvcjogdHlwZXNFcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlVXNlclxuICAgICAgICAgIC5ycGMoJ2dldF9zZXNzaW9uc19ieV90eXBlJyk7XG5cbiAgICAgICAgaWYgKHR5cGVzRXJyb3IpIHRocm93IHR5cGVzRXJyb3I7XG5cbiAgICAgICAgLy8gR2V0IHVwY29taW5nIHNlc3Npb25zXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgeyBkYXRhOiB1cGNvbWluZ1Nlc3Npb25zLCBlcnJvcjogdXBjb21pbmdFcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlVXNlclxuICAgICAgICAgIC5mcm9tKCdzZXNzaW9ucycpXG4gICAgICAgICAgLnNlbGVjdCgnaWQsIHNlc3Npb25fdGltZSwgY29udGFjdF9pZCwgY29udGFjdHMoZnVsbF9uYW1lKScpXG4gICAgICAgICAgLmd0KCdzZXNzaW9uX3RpbWUnLCBub3cpXG4gICAgICAgICAgLm9yZGVyKCdzZXNzaW9uX3RpbWUnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KVxuICAgICAgICAgIC5saW1pdCg1KTtcblxuICAgICAgICBpZiAodXBjb21pbmdFcnJvcikgdGhyb3cgdXBjb21pbmdFcnJvcjtcblxuICAgICAgICAvLyBDYWxjdWxhdGUgc2Vzc2lvbnMgcGVyIGRheSBmb3IgY2hhcnRcbiAgICAgICAgY29uc3Qgc2Vzc2lvbnNCeURheSA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgZGF5TXMgPSAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgICBcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBhbGwgZGF5cyBpbiByYW5nZSB3aXRoIDAgc2Vzc2lvbnNcbiAgICAgICAgZm9yIChsZXQgZCA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSk7IGQgPD0gZW5kRGF0ZTsgZCA9IG5ldyBEYXRlKGQuZ2V0VGltZSgpICsgZGF5TXMpKSB7XG4gICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGQudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICAgIHNlc3Npb25zQnlEYXkuc2V0KGRhdGVTdHIsIDApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDb3VudCBzZXNzaW9ucyBwZXIgZGF5XG4gICAgICAgIHNlc3Npb25zSW5SYW5nZT8uZm9yRWFjaCgoc2Vzc2lvbjogeyBzZXNzaW9uX3RpbWU6IHN0cmluZyB9KSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IG5ldyBEYXRlKHNlc3Npb24uc2Vzc2lvbl90aW1lKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICAgICAgc2Vzc2lvbnNCeURheS5zZXQoZGF0ZVN0ciwgKHNlc3Npb25zQnlEYXkuZ2V0KGRhdGVTdHIpIHx8IDApICsgMSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29udmVydCB0byBhcnJheSBmb3IgY2hhcnQgZGF0YVxuICAgICAgICBjb25zdCBzZXNzaW9uVHJlbmQgPSBBcnJheS5mcm9tKHNlc3Npb25zQnlEYXkuZW50cmllcygpKS5tYXAoKFtkYXRlLCBjb3VudF0pID0+ICh7XG4gICAgICAgICAgZGF0ZSxcbiAgICAgICAgICBjb3VudCxcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdG90YWxTZXNzaW9uczogdG90YWxTZXNzaW9ucyB8fCAwLFxuICAgICAgICAgIHNlc3Npb25zSW5SYW5nZTogc2Vzc2lvbnNJblJhbmdlPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICBzZXNzaW9uVHlwZURpc3RyaWJ1dGlvbjogc2Vzc2lvblR5cGVzIHx8IFtdLFxuICAgICAgICAgIHVwY29taW5nU2Vzc2lvbnM6IHVwY29taW5nU2Vzc2lvbnMgfHwgW10sXG4gICAgICAgICAgc2Vzc2lvblRyZW5kLFxuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc2Vzc2lvbiBtZXRyaWNzOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCBzZXNzaW9uIG1ldHJpY3MnLFxuICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSksXG5cbiAgLy8gR2V0IEFJIGFjdGlvbiBtZXRyaWNzXG4gIGFpQWN0aW9uTWV0cmljczogcHJvdGVjdGVkUHJvY2VkdXJlXG4gICAgLmlucHV0KGRhdGVSYW5nZVNjaGVtYS5vcHRpb25hbCgpKVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGlmICghY3R4LnVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdVTkFVVEhPUklaRUQnIH0pO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBEZWZhdWx0IHRvIGxhc3QgMzAgZGF5cyBpZiBubyBkYXRlIHJhbmdlIHByb3ZpZGVkXG4gICAgICAgIGNvbnN0IGVuZERhdGUgPSBpbnB1dD8uZW5kRGF0ZSA/IG5ldyBEYXRlKGlucHV0LmVuZERhdGUpIDogbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gaW5wdXQ/LnN0YXJ0RGF0ZSBcbiAgICAgICAgICA/IG5ldyBEYXRlKGlucHV0LnN0YXJ0RGF0ZSkgXG4gICAgICAgICAgOiBuZXcgRGF0ZShlbmREYXRlLmdldFRpbWUoKSAtIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG5cbiAgICAgICAgY29uc3Qgc3RhcnREYXRlU3RyID0gc3RhcnREYXRlLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IGVuZERhdGVTdHIgPSBlbmREYXRlLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgICAgLy8gR2V0IHRvdGFsIEFJIGFjdGlvbnMgY291bnRcbiAgICAgICAgY29uc3QgeyBjb3VudDogdG90YWxBY3Rpb25zLCBlcnJvcjogY291bnRFcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlVXNlclxuICAgICAgICAgIC5mcm9tKCdhaV9hY3Rpb25zJylcbiAgICAgICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KTtcblxuICAgICAgICBpZiAoY291bnRFcnJvcikgdGhyb3cgY291bnRFcnJvcjtcblxuICAgICAgICAvLyBHZXQgQUkgYWN0aW9ucyBieSBzdGF0dXNcbiAgICAgICAgY29uc3QgeyBkYXRhOiBhY3Rpb25zQnlTdGF0dXMsIGVycm9yOiBzdGF0dXNFcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlVXNlclxuICAgICAgICAgIC5ycGMoJ2dldF9haV9hY3Rpb25zX2J5X3N0YXR1cycpO1xuXG4gICAgICAgIGlmIChzdGF0dXNFcnJvcikgdGhyb3cgc3RhdHVzRXJyb3I7XG5cbiAgICAgICAgLy8gR2V0IEFJIGFjdGlvbnMgYnkgdHlwZVxuICAgICAgICBjb25zdCB7IGRhdGE6IGFjdGlvbnNCeVR5cGUsIGVycm9yOiB0eXBlRXJyb3IgfSA9IGF3YWl0IGN0eC5zdXBhYmFzZVVzZXJcbiAgICAgICAgICAucnBjKCdnZXRfYWlfYWN0aW9uc19ieV90eXBlJyk7XG5cbiAgICAgICAgaWYgKHR5cGVFcnJvcikgdGhyb3cgdHlwZUVycm9yO1xuXG4gICAgICAgIC8vIEdldCByZWNlbnQgQUkgYWN0aW9uc1xuICAgICAgICBjb25zdCB7IGRhdGE6IHJlY2VudEFjdGlvbnMsIGVycm9yOiByZWNlbnRFcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlVXNlclxuICAgICAgICAgIC5mcm9tKCdhaV9hY3Rpb25zJylcbiAgICAgICAgICAuc2VsZWN0KCdpZCwgYWN0aW9uX3R5cGUsIHN1Z2dlc3Rpb24sIHN0YXR1cywgY3JlYXRlZF9hdCcpXG4gICAgICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAgICAgLmxpbWl0KDUpO1xuXG4gICAgICAgIGlmIChyZWNlbnRFcnJvcikgdGhyb3cgcmVjZW50RXJyb3I7XG5cbiAgICAgICAgLy8gR2V0IGltcGxlbWVudGF0aW9uIHJhdGVcbiAgICAgICAgY29uc3QgeyBkYXRhOiBpbXBsZW1lbnRlZEFjdGlvbnMsIGVycm9yOiBpbXBsZW1lbnRlZEVycm9yIH0gPSBhd2FpdCBjdHguc3VwYWJhc2VVc2VyXG4gICAgICAgICAgLmZyb20oJ2FpX2FjdGlvbnMnKVxuICAgICAgICAgIC5zZWxlY3QoJ2lkJylcbiAgICAgICAgICAuZXEoJ2ltcGxlbWVudGVkJywgdHJ1ZSk7XG5cbiAgICAgICAgaWYgKGltcGxlbWVudGVkRXJyb3IpIHRocm93IGltcGxlbWVudGVkRXJyb3I7XG5cbiAgICAgICAgY29uc3QgaW1wbGVtZW50YXRpb25SYXRlID0gdG90YWxBY3Rpb25zID8gKGltcGxlbWVudGVkQWN0aW9ucz8ubGVuZ3RoIHx8IDApIC8gdG90YWxBY3Rpb25zIDogMDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRvdGFsQWN0aW9uczogdG90YWxBY3Rpb25zIHx8IDAsXG4gICAgICAgICAgYWN0aW9uc0J5U3RhdHVzOiBhY3Rpb25zQnlTdGF0dXMgfHwgW10sXG4gICAgICAgICAgYWN0aW9uc0J5VHlwZTogYWN0aW9uc0J5VHlwZSB8fCBbXSxcbiAgICAgICAgICByZWNlbnRBY3Rpb25zOiByZWNlbnRBY3Rpb25zIHx8IFtdLFxuICAgICAgICAgIGltcGxlbWVudGF0aW9uUmF0ZSxcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIEFJIGFjdGlvbiBtZXRyaWNzOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCBBSSBhY3Rpb24gbWV0cmljcycsXG4gICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KSxcblxuICAvLyBHZXQgb3ZlcmFsbCBkYXNoYm9hcmQgc3VtbWFyeVxuICBzdW1tYXJ5OiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAuaW5wdXQoZGF0ZVJhbmdlU2NoZW1hLm9wdGlvbmFsKCkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgaWYgKCFjdHgudXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ1VOQVVUSE9SSVpFRCcgfSk7XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIERlZmF1bHQgdG8gbGFzdCAzMCBkYXlzIGlmIG5vIGRhdGUgcmFuZ2UgcHJvdmlkZWRcbiAgICAgICAgY29uc3QgZW5kRGF0ZSA9IGlucHV0Py5lbmREYXRlID8gbmV3IERhdGUoaW5wdXQuZW5kRGF0ZSkgOiBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBzdGFydERhdGUgPSBpbnB1dD8uc3RhcnREYXRlIFxuICAgICAgICAgID8gbmV3IERhdGUoaW5wdXQuc3RhcnREYXRlKSBcbiAgICAgICAgICA6IG5ldyBEYXRlKGVuZERhdGUuZ2V0VGltZSgpIC0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcblxuICAgICAgICBjb25zdCBzdGFydERhdGVTdHIgPSBzdGFydERhdGUudG9JU09TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgZW5kRGF0ZVN0ciA9IGVuZERhdGUudG9JU09TdHJpbmcoKTtcblxuICAgICAgICAvLyBHZXQgY291bnRzIGZvciBrZXkgbWV0cmljc1xuICAgICAgICBjb25zdCBbXG4gICAgICAgICAgeyBjb3VudDogdG90YWxDb250YWN0cyB9LFxuICAgICAgICAgIHsgY291bnQ6IHRvdGFsU2Vzc2lvbnMgfSxcbiAgICAgICAgICB7IGNvdW50OiB0b3RhbEFjdGlvbnMgfSxcbiAgICAgICAgICB7IGNvdW50OiB0b3RhbE5vdGVzIH0sXG4gICAgICAgICAgeyBkYXRhOiBuZXdDb250YWN0cyB9LFxuICAgICAgICAgIHsgZGF0YTogdXBjb21pbmdTZXNzaW9ucyB9LFxuICAgICAgICAgIHsgZGF0YTogcGVuZGluZ0FjdGlvbnMgfSxcbiAgICAgICAgXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICBjdHguc3VwYWJhc2VVc2VyLmZyb20oJ2NvbnRhY3RzJykuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KSxcbiAgICAgICAgICBjdHguc3VwYWJhc2VVc2VyLmZyb20oJ3Nlc3Npb25zJykuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KSxcbiAgICAgICAgICBjdHguc3VwYWJhc2VVc2VyLmZyb20oJ2FpX2FjdGlvbnMnKS5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pLFxuICAgICAgICAgIGN0eC5zdXBhYmFzZVVzZXIuZnJvbSgnbm90ZXMnKS5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pLFxuICAgICAgICAgIGN0eC5zdXBhYmFzZVVzZXIuZnJvbSgnY29udGFjdHMnKS5zZWxlY3QoJ2lkJykuZ3RlKCdjcmVhdGVkX2F0Jywgc3RhcnREYXRlU3RyKS5sdGUoJ2NyZWF0ZWRfYXQnLCBlbmREYXRlU3RyKSxcbiAgICAgICAgICBjdHguc3VwYWJhc2VVc2VyLmZyb20oJ3Nlc3Npb25zJykuc2VsZWN0KCdpZCcpLmd0KCdzZXNzaW9uX3RpbWUnLCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkpLFxuICAgICAgICAgIGN0eC5zdXBhYmFzZVVzZXIuZnJvbSgnYWlfYWN0aW9ucycpLnNlbGVjdCgnaWQnKS5lcSgnc3RhdHVzJywgJ3BlbmRpbmcnKSxcbiAgICAgICAgXSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0b3RhbENvbnRhY3RzOiB0b3RhbENvbnRhY3RzIHx8IDAsXG4gICAgICAgICAgdG90YWxTZXNzaW9uczogdG90YWxTZXNzaW9ucyB8fCAwLFxuICAgICAgICAgIHRvdGFsQWlBY3Rpb25zOiB0b3RhbEFjdGlvbnMgfHwgMCxcbiAgICAgICAgICB0b3RhbE5vdGVzOiB0b3RhbE5vdGVzIHx8IDAsXG4gICAgICAgICAgbmV3Q29udGFjdHNDb3VudDogbmV3Q29udGFjdHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgIHVwY29taW5nU2Vzc2lvbnNDb3VudDogdXBjb21pbmdTZXNzaW9ucz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgcGVuZGluZ0FjdGlvbnNDb3VudDogcGVuZGluZ0FjdGlvbnM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgIGRhdGVSYW5nZToge1xuICAgICAgICAgICAgc3RhcnREYXRlOiBzdGFydERhdGVTdHIsXG4gICAgICAgICAgICBlbmREYXRlOiBlbmREYXRlU3RyLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBkYXNoYm9hcmQgc3VtbWFyeTonLCBlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggZGFzaGJvYXJkIHN1bW1hcnknLFxuICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSksXG59KTsiXSwibmFtZXMiOlsiVFJQQ0Vycm9yIiwieiIsInJvdXRlciIsInByb3RlY3RlZFByb2NlZHVyZSIsImRhdGVSYW5nZVNjaGVtYSIsIm9iamVjdCIsInN0YXJ0RGF0ZSIsInN0cmluZyIsImRhdGV0aW1lIiwib3B0aW9uYWwiLCJlbmREYXRlIiwiZGFzaGJvYXJkUm91dGVyIiwiY29udGFjdE1ldHJpY3MiLCJpbnB1dCIsInF1ZXJ5IiwiY3R4IiwidXNlciIsImNvZGUiLCJEYXRlIiwiZ2V0VGltZSIsInN0YXJ0RGF0ZVN0ciIsInRvSVNPU3RyaW5nIiwiZW5kRGF0ZVN0ciIsImNvdW50IiwidG90YWxDb250YWN0cyIsImVycm9yIiwiY291bnRFcnJvciIsInN1cGFiYXNlVXNlciIsImZyb20iLCJzZWxlY3QiLCJoZWFkIiwiZGF0YSIsIm5ld0NvbnRhY3RzIiwibmV3Q29udGFjdHNFcnJvciIsImd0ZSIsImx0ZSIsImpvdXJuZXlTdGFnZXMiLCJqb3VybmV5RXJyb3IiLCJycGMiLCJyZWNlbnRBY3Rpdml0eSIsImFjdGl2aXR5RXJyb3IiLCJvcmRlciIsImFzY2VuZGluZyIsImxpbWl0IiwibGVuZ3RoIiwiam91cm5leVN0YWdlRGlzdHJpYnV0aW9uIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJjYXVzZSIsInNlc3Npb25NZXRyaWNzIiwidG90YWxTZXNzaW9ucyIsInNlc3Npb25zSW5SYW5nZSIsInJhbmdlRXJyb3IiLCJzZXNzaW9uVHlwZXMiLCJ0eXBlc0Vycm9yIiwibm93IiwidXBjb21pbmdTZXNzaW9ucyIsInVwY29taW5nRXJyb3IiLCJndCIsInNlc3Npb25zQnlEYXkiLCJNYXAiLCJkYXlNcyIsImQiLCJkYXRlU3RyIiwic3BsaXQiLCJzZXQiLCJmb3JFYWNoIiwic2Vzc2lvbiIsInNlc3Npb25fdGltZSIsImdldCIsInNlc3Npb25UcmVuZCIsIkFycmF5IiwiZW50cmllcyIsIm1hcCIsImRhdGUiLCJzZXNzaW9uVHlwZURpc3RyaWJ1dGlvbiIsImFpQWN0aW9uTWV0cmljcyIsInRvdGFsQWN0aW9ucyIsImFjdGlvbnNCeVN0YXR1cyIsInN0YXR1c0Vycm9yIiwiYWN0aW9uc0J5VHlwZSIsInR5cGVFcnJvciIsInJlY2VudEFjdGlvbnMiLCJyZWNlbnRFcnJvciIsImltcGxlbWVudGVkQWN0aW9ucyIsImltcGxlbWVudGVkRXJyb3IiLCJlcSIsImltcGxlbWVudGF0aW9uUmF0ZSIsInN1bW1hcnkiLCJ0b3RhbE5vdGVzIiwicGVuZGluZ0FjdGlvbnMiLCJQcm9taXNlIiwiYWxsIiwidG90YWxBaUFjdGlvbnMiLCJuZXdDb250YWN0c0NvdW50IiwidXBjb21pbmdTZXNzaW9uc0NvdW50IiwicGVuZGluZ0FjdGlvbnNDb3VudCIsImRhdGVSYW5nZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../packages/server/src/routers/dashboard.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/server/src/routers/group.ts":
/*!**************************************************!*\
  !*** ../../packages/server/src/routers/group.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   groupRouter: () => (/* binding */ groupRouter)\n/* harmony export */ });\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/../../node_modules/.pnpm/@trpc+server@11.4.2_typescript@5.8.3/node_modules/@trpc/server/dist/tracked-gU3ttYjg.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/../../node_modules/.pnpm/zod@3.25.67/node_modules/zod/dist/esm/index.js\");\n/* harmony import */ var _trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../trpc */ \"(rsc)/../../packages/server/src/trpc.ts\");\n\n\n\n// Schema for group input validation\nconst groupInputSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().uuid().optional(),\n    name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().min(1, 'Group name is required').max(100, 'Name too long'),\n    description: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().max(500, 'Description too long').optional().nullable(),\n    color: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().regex(/^#([0-9a-f]{3}){1,2}$/i, 'Must be a valid hex color').optional().nullable(),\n    emoji: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().max(2, 'Emoji should be 1-2 characters').or(zod__WEBPACK_IMPORTED_MODULE_0__.z.literal('')).nullable().optional().transform((val)=>val === '' ? null : val)\n});\n// Group to contact relationship schema\nconst groupContactSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    groupId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().uuid(),\n    contactId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().uuid()\n});\nconst groupRouter = (0,_trpc__WEBPACK_IMPORTED_MODULE_1__.router)({\n    // Get all groups for a specific contact\n    getGroupsForContact: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        contactId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().uuid()\n    })).query(async ({ input, ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        try {\n            const { data: memberData, error: memberError } = await ctx.supabaseUser.from('group_members').select('group_id').eq('contact_id', input.contactId);\n            if (memberError) {\n                console.error('Error fetching group members:', memberError);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                    code: 'INTERNAL_SERVER_ERROR',\n                    message: 'Failed to fetch group memberships'\n                });\n            }\n            if (!memberData || memberData.length === 0) {\n                return [];\n            }\n            const groupIds = memberData.map((item)=>item.group_id);\n            const { data: groupsData, error: groupsError } = await ctx.supabaseUser.from('groups').select('id, name, description, color, created_at, updated_at').eq('user_id', ctx.user.id).in('id', groupIds);\n            if (groupsError) {\n                console.error('Error fetching groups for contact:', groupsError);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                    code: 'INTERNAL_SERVER_ERROR',\n                    message: 'Failed to fetch groups for contact'\n                });\n            }\n            return groupsData || [];\n        } catch (err) {\n            console.error('Unexpected error in getGroupsForContact:', err);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: err instanceof Error ? err.message : 'An unknown error occurred'\n            });\n        }\n    }),\n    // List all groups for the authenticated user\n    list: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.query(async ({ ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        const { data, error } = await ctx.supabaseUser.from('groups').select('*, group_members(*)').order('name');\n        if (error) {\n            console.error('Error fetching groups with contact counts:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch groups'\n            });\n        }\n        return (data || []).map((group)=>{\n            const contactCount = Array.isArray(group.group_members) ? group.group_members.length : 0;\n            const { group_members, ...groupFields } = group;\n            return {\n                ...groupFields,\n                contactCount\n            };\n        });\n    }),\n    // Get a single group by ID\n    getById: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        groupId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().uuid()\n    })).query(async ({ input, ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        const { data, error } = await ctx.supabaseUser.from('groups').select('*').eq('id', input.groupId).single();\n        if (error) {\n            console.error('Error fetching group by ID:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch group'\n            });\n        }\n        return data;\n    }),\n    // Create or update a group\n    save: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(groupInputSchema).mutation(async ({ input, ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        const isUpdate = !!input.id;\n        const groupData = {\n            ...input,\n            user_id: ctx.user.id,\n            updated_at: new Date().toISOString()\n        };\n        if (!isUpdate) {\n            delete groupData.id;\n        }\n        const { data, error } = await ctx.supabaseUser.from('groups').upsert(groupData).select().single();\n        if (error) {\n            console.error('Error saving group:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: `Failed to ${isUpdate ? 'update' : 'create'} group`\n            });\n        }\n        return data;\n    }),\n    // Delete a group\n    delete: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        groupId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().uuid()\n    })).mutation(async ({ input, ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        const { error } = await ctx.supabaseUser.from('groups').delete().eq('id', input.groupId).eq('user_id', ctx.user.id);\n        if (error) {\n            console.error('Error deleting group:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to delete group'\n            });\n        }\n        return {\n            success: true,\n            deletedGroupId: input.groupId\n        };\n    }),\n    // Add a contact to a group\n    addContact: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(groupContactSchema).mutation(async ({ input, ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        const { data: existing, error: existingError } = await ctx.supabaseUser.from('group_members').select('id').eq('group_id', input.groupId).eq('contact_id', input.contactId).single();\n        if (existingError && existingError.code !== 'PGRST116') {\n            console.error('Error checking for existing group member:', existingError);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Could not verify group membership.'\n            });\n        }\n        if (existing) {\n            return {\n                success: true,\n                message: 'Contact already in group.'\n            };\n        }\n        const { error } = await ctx.supabaseUser.from('group_members').insert([\n            {\n                group_id: input.groupId,\n                contact_id: input.contactId\n            }\n        ]);\n        if (error) {\n            console.error('Detailed error adding contact to group:', JSON.stringify(error, null, 2));\n            console.error('Original error object adding contact to group:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to add contact to group'\n            });\n        }\n        return {\n            success: true\n        };\n    }),\n    // Remove a contact from a group\n    removeContact: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(groupContactSchema).mutation(async ({ input, ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        const { error } = await ctx.supabaseUser.from('group_members').delete().eq('contact_id', input.contactId).eq('group_id', input.groupId);\n        if (error) {\n            console.error('Error removing contact from group:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to remove contact from group'\n            });\n        }\n        return {\n            success: true\n        };\n    }),\n    // Get all contacts in a group\n    getContacts: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        groupId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().uuid()\n    })).query(async ({ input, ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        const { data: group, error: groupError } = await ctx.supabaseUser.from('groups').select('id').eq('id', input.groupId).single();\n        if (groupError || !group) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'NOT_FOUND',\n                message: 'Group not found'\n            });\n        }\n        const { data, error } = await ctx.supabaseUser.from('group_members').select('contacts:contact_id (*)').eq('group_id', input.groupId);\n        if (error) {\n            console.error('Error fetching contacts in group:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch contacts in group'\n            });\n        }\n        if (!data) {\n            return [];\n        }\n        return data.map((item)=>item.contacts).filter(Boolean);\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2VydmVyL3NyYy9yb3V0ZXJzL2dyb3VwLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBeUM7QUFDakI7QUFFNkI7QUFXckQsb0NBQW9DO0FBQ3BDLE1BQU1JLG1CQUFtQkgseUNBQVEsQ0FBQztJQUNoQ0ssSUFBSUwseUNBQVEsR0FBR08sSUFBSSxHQUFHQyxRQUFRO0lBQzlCQyxNQUFNVCx5Q0FBUSxHQUFHVSxHQUFHLENBQUMsR0FBRywwQkFBMEJDLEdBQUcsQ0FBQyxLQUFLO0lBQzNEQyxhQUFhWix5Q0FDSixHQUNOVyxHQUFHLENBQUMsS0FBSyx3QkFDVEgsUUFBUSxHQUNSSyxRQUFRO0lBQ1hDLE9BQU9kLHlDQUNFLEdBQ05lLEtBQUssQ0FBQywwQkFBMEIsNkJBQ2hDUCxRQUFRLEdBQ1JLLFFBQVE7SUFDWEcsT0FBT2hCLHlDQUNFLEdBQ05XLEdBQUcsQ0FBQyxHQUFHLGtDQUNQTSxFQUFFLENBQUNqQiwwQ0FBUyxDQUFDLEtBQ2JhLFFBQVEsR0FDUkwsUUFBUSxHQUNSVyxTQUFTLENBQUMsQ0FBQ0MsTUFBU0EsUUFBUSxLQUFLLE9BQU9BO0FBQzdDO0FBRUEsdUNBQXVDO0FBQ3ZDLE1BQU1DLHFCQUFxQnJCLHlDQUFRLENBQUM7SUFDbENzQixTQUFTdEIseUNBQVEsR0FBR08sSUFBSTtJQUN4QmdCLFdBQVd2Qix5Q0FBUSxHQUFHTyxJQUFJO0FBQzVCO0FBRU8sTUFBTWlCLGNBQWN2Qiw2Q0FBTUEsQ0FBQztJQUNoQyx3Q0FBd0M7SUFDeEN3QixxQkFBcUJ2QixxREFBa0JBLENBQ3BDd0IsS0FBSyxDQUFDMUIseUNBQVEsQ0FBQztRQUFFdUIsV0FBV3ZCLHlDQUFRLEdBQUdPLElBQUk7SUFBRyxJQUM5Q29CLEtBQUssQ0FBQyxPQUFPLEVBQUVELEtBQUssRUFBRUUsR0FBRyxFQUFFO1FBQzFCLElBQUksQ0FBQ0EsSUFBSUMsSUFBSSxFQUFFO1lBQ2IsTUFBTSxJQUFJOUIsbURBQVNBLENBQUM7Z0JBQUUrQixNQUFN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QUNULE9BQU8sRUFBRTtRQUNYO1FBRUEsT0FBT0EsS0FBS1ksR0FBRyxDQUFDLENBQUNDLE9BQWNBLEtBQUt1QyxRQUFRLEVBQUVDLE1BQU0sQ0FBQ0M7SUFDdkQ7QUFDSixHQUFHIiwic291cmNlcyI6WyIvVXNlcnMvcGV0ZXJqYW1lc2JsaXp6YXJkL3Byb2plY3RzL2FwcF9jb2RleGNybWFwcC9wYWNrYWdlcy9zZXJ2ZXIvc3JjL3JvdXRlcnMvZ3JvdXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVFJQQ0Vycm9yIH0gZnJvbSAnQHRycGMvc2VydmVyJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuXG5pbXBvcnQgeyByb3V0ZXIsIHByb3RlY3RlZFByb2NlZHVyZSB9IGZyb20gJy4uL3RycGMnO1xuXG5pbnRlcmZhY2UgR3JvdXAge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nIHwgbnVsbDtcbiAgY29sb3I/OiBzdHJpbmcgfCBudWxsO1xuICBlbW9qaT86IHN0cmluZyB8IG51bGw7XG4gIGdyb3VwX21lbWJlcnM/OiBBcnJheTx7IGlkOiBzdHJpbmc7IGNvbnRhY3RfaWQ6IHN0cmluZzsgZ3JvdXBfaWQ6IHN0cmluZyB9Pjtcbn1cblxuLy8gU2NoZW1hIGZvciBncm91cCBpbnB1dCB2YWxpZGF0aW9uXG5jb25zdCBncm91cElucHV0U2NoZW1hID0gei5vYmplY3Qoe1xuICBpZDogei5zdHJpbmcoKS51dWlkKCkub3B0aW9uYWwoKSwgLy8gT3B0aW9uYWwgZm9yIGNyZWF0aW9uXG4gIG5hbWU6IHouc3RyaW5nKCkubWluKDEsICdHcm91cCBuYW1lIGlzIHJlcXVpcmVkJykubWF4KDEwMCwgJ05hbWUgdG9vIGxvbmcnKSxcbiAgZGVzY3JpcHRpb246IHpcbiAgICAuc3RyaW5nKClcbiAgICAubWF4KDUwMCwgJ0Rlc2NyaXB0aW9uIHRvbyBsb25nJylcbiAgICAub3B0aW9uYWwoKVxuICAgIC5udWxsYWJsZSgpLFxuICBjb2xvcjogelxuICAgIC5zdHJpbmcoKVxuICAgIC5yZWdleCgvXiMoWzAtOWEtZl17M30pezEsMn0kL2ksICdNdXN0IGJlIGEgdmFsaWQgaGV4IGNvbG9yJylcbiAgICAub3B0aW9uYWwoKVxuICAgIC5udWxsYWJsZSgpLFxuICBlbW9qaTogelxuICAgIC5zdHJpbmcoKVxuICAgIC5tYXgoMiwgJ0Vtb2ppIHNob3VsZCBiZSAxLTIgY2hhcmFjdGVycycpXG4gICAgLm9yKHoubGl0ZXJhbCgnJykpXG4gICAgLm51bGxhYmxlKClcbiAgICAub3B0aW9uYWwoKVxuICAgIC50cmFuc2Zvcm0oKHZhbCkgPT4gKHZhbCA9PT0gJycgPyBudWxsIDogdmFsKSksXG59KTtcblxuLy8gR3JvdXAgdG8gY29udGFjdCByZWxhdGlvbnNoaXAgc2NoZW1hXG5jb25zdCBncm91cENvbnRhY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGdyb3VwSWQ6IHouc3RyaW5nKCkudXVpZCgpLFxuICBjb250YWN0SWQ6IHouc3RyaW5nKCkudXVpZCgpLFxufSk7XG5cbmV4cG9ydCBjb25zdCBncm91cFJvdXRlciA9IHJvdXRlcih7XG4gIC8vIEdldCBhbGwgZ3JvdXBzIGZvciBhIHNwZWNpZmljIGNvbnRhY3RcbiAgZ2V0R3JvdXBzRm9yQ29udGFjdDogcHJvdGVjdGVkUHJvY2VkdXJlXG4gICAgLmlucHV0KHoub2JqZWN0KHsgY29udGFjdElkOiB6LnN0cmluZygpLnV1aWQoKSB9KSlcbiAgICAucXVlcnkoYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICBpZiAoIWN0eC51c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnVU5BVVRIT1JJWkVEJyB9KTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiBtZW1iZXJEYXRhLCBlcnJvcjogbWVtYmVyRXJyb3IgfSA9IGF3YWl0IGN0eC5zdXBhYmFzZVVzZXJcbiAgICAgICAgICAuZnJvbSgnZ3JvdXBfbWVtYmVycycpXG4gICAgICAgICAgLnNlbGVjdCgnZ3JvdXBfaWQnKVxuICAgICAgICAgIC5lcSgnY29udGFjdF9pZCcsIGlucHV0LmNvbnRhY3RJZCk7XG5cbiAgICAgICAgaWYgKG1lbWJlckVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZ3JvdXAgbWVtYmVyczonLCBtZW1iZXJFcnJvcik7XG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggZ3JvdXAgbWVtYmVyc2hpcHMnLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFtZW1iZXJEYXRhIHx8IG1lbWJlckRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZ3JvdXBJZHMgPSBtZW1iZXJEYXRhLm1hcChcbiAgICAgICAgICAoaXRlbTogeyBncm91cF9pZDogc3RyaW5nIH0pID0+IGl0ZW0uZ3JvdXBfaWRcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCB7IGRhdGE6IGdyb3Vwc0RhdGEsIGVycm9yOiBncm91cHNFcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlVXNlclxuICAgICAgICAgIC5mcm9tKCdncm91cHMnKVxuICAgICAgICAgIC5zZWxlY3QoJ2lkLCBuYW1lLCBkZXNjcmlwdGlvbiwgY29sb3IsIGNyZWF0ZWRfYXQsIHVwZGF0ZWRfYXQnKVxuICAgICAgICAgIC5lcSgndXNlcl9pZCcsIGN0eC51c2VyLmlkKVxuICAgICAgICAgIC5pbignaWQnLCBncm91cElkcyk7XG5cbiAgICAgICAgaWYgKGdyb3Vwc0Vycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZ3JvdXBzIGZvciBjb250YWN0OicsIGdyb3Vwc0Vycm9yKTtcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCBncm91cHMgZm9yIGNvbnRhY3QnLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdyb3Vwc0RhdGEgfHwgW107XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignVW5leHBlY3RlZCBlcnJvciBpbiBnZXRHcm91cHNGb3JDb250YWN0OicsIGVycik7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6XG4gICAgICAgICAgICBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQnLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KSxcblxuICAvLyBMaXN0IGFsbCBncm91cHMgZm9yIHRoZSBhdXRoZW50aWNhdGVkIHVzZXJcbiAgbGlzdDogcHJvdGVjdGVkUHJvY2VkdXJlLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgaWYgKCFjdHgudXNlcikge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdVTkFVVEhPUklaRUQnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IGN0eC5zdXBhYmFzZVVzZXJcbiAgICAgIC5mcm9tKCdncm91cHMnKVxuICAgICAgLnNlbGVjdCgnKiwgZ3JvdXBfbWVtYmVycygqKScpXG4gICAgICAub3JkZXIoJ25hbWUnKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZ3JvdXBzIHdpdGggY29udGFjdCBjb3VudHM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIGdyb3VwcycsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gKGRhdGEgfHwgW10pLm1hcCgoZ3JvdXA6IEdyb3VwKSA9PiB7XG4gICAgICBjb25zdCBjb250YWN0Q291bnQgPSBBcnJheS5pc0FycmF5KGdyb3VwLmdyb3VwX21lbWJlcnMpXG4gICAgICAgID8gZ3JvdXAuZ3JvdXBfbWVtYmVycy5sZW5ndGhcbiAgICAgICAgOiAwO1xuICAgICAgY29uc3QgeyBncm91cF9tZW1iZXJzLCAuLi5ncm91cEZpZWxkcyB9ID0gZ3JvdXA7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5ncm91cEZpZWxkcyxcbiAgICAgICAgY29udGFjdENvdW50LFxuICAgICAgfTtcbiAgICB9KTtcbiAgfSksXG5cbiAgLy8gR2V0IGEgc2luZ2xlIGdyb3VwIGJ5IElEXG4gIGdldEJ5SWQ6IHByb3RlY3RlZFByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7IGdyb3VwSWQ6IHouc3RyaW5nKCkudXVpZCgpIH0pKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIGlmICghY3R4LnVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdVTkFVVEhPUklaRUQnIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBjdHguc3VwYWJhc2VVc2VyXG4gICAgICAgIC5mcm9tKCdncm91cHMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdpZCcsIGlucHV0Lmdyb3VwSWQpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGdyb3VwIGJ5IElEOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCBncm91cCcsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KSxcblxuICAvLyBDcmVhdGUgb3IgdXBkYXRlIGEgZ3JvdXBcbiAgc2F2ZTogcHJvdGVjdGVkUHJvY2VkdXJlXG4gICAgLmlucHV0KGdyb3VwSW5wdXRTY2hlbWEpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgaWYgKCFjdHgudXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ1VOQVVUSE9SSVpFRCcgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzVXBkYXRlID0gISFpbnB1dC5pZDtcbiAgICAgIGNvbnN0IGdyb3VwRGF0YSA9IHtcbiAgICAgICAgLi4uaW5wdXQsXG4gICAgICAgIHVzZXJfaWQ6IGN0eC51c2VyLmlkLFxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9O1xuXG4gICAgICBpZiAoIWlzVXBkYXRlKSB7XG4gICAgICAgIGRlbGV0ZSBncm91cERhdGEuaWQ7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IGN0eC5zdXBhYmFzZVVzZXJcbiAgICAgICAgLmZyb20oJ2dyb3VwcycpXG4gICAgICAgIC51cHNlcnQoZ3JvdXBEYXRhKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIGdyb3VwOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogYEZhaWxlZCB0byAke2lzVXBkYXRlID8gJ3VwZGF0ZScgOiAnY3JlYXRlJ30gZ3JvdXBgLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSksXG5cbiAgLy8gRGVsZXRlIGEgZ3JvdXBcbiAgZGVsZXRlOiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBncm91cElkOiB6LnN0cmluZygpLnV1aWQoKSB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICBpZiAoIWN0eC51c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnVU5BVVRIT1JJWkVEJyB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlVXNlclxuICAgICAgICAuZnJvbSgnZ3JvdXBzJylcbiAgICAgICAgLmRlbGV0ZSgpXG4gICAgICAgIC5lcSgnaWQnLCBpbnB1dC5ncm91cElkKVxuICAgICAgICAuZXEoJ3VzZXJfaWQnLCBjdHgudXNlci5pZCk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBncm91cDonLCBlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZGVsZXRlIGdyb3VwJyxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRlbGV0ZWRHcm91cElkOiBpbnB1dC5ncm91cElkIH07XG4gICAgfSksXG5cbiAgLy8gQWRkIGEgY29udGFjdCB0byBhIGdyb3VwXG4gIGFkZENvbnRhY3Q6IHByb3RlY3RlZFByb2NlZHVyZVxuICAgIC5pbnB1dChncm91cENvbnRhY3RTY2hlbWEpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgaWYgKCFjdHgudXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ1VOQVVUSE9SSVpFRCcgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmcsIGVycm9yOiBleGlzdGluZ0Vycm9yIH0gPSBhd2FpdCBjdHguc3VwYWJhc2VVc2VyXG4gICAgICAgIC5mcm9tKCdncm91cF9tZW1iZXJzJylcbiAgICAgICAgLnNlbGVjdCgnaWQnKVxuICAgICAgICAuZXEoJ2dyb3VwX2lkJywgaW5wdXQuZ3JvdXBJZClcbiAgICAgICAgLmVxKCdjb250YWN0X2lkJywgaW5wdXQuY29udGFjdElkKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGlmIChleGlzdGluZ0Vycm9yICYmIGV4aXN0aW5nRXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBmb3IgZXhpc3RpbmcgZ3JvdXAgbWVtYmVyOicsIGV4aXN0aW5nRXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnQ291bGQgbm90IHZlcmlmeSBncm91cCBtZW1iZXJzaGlwLicsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ0NvbnRhY3QgYWxyZWFkeSBpbiBncm91cC4nIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IGN0eC5zdXBhYmFzZVVzZXIuZnJvbSgnZ3JvdXBfbWVtYmVycycpLmluc2VydChbXG4gICAgICAgIHtcbiAgICAgICAgICBncm91cF9pZDogaW5wdXQuZ3JvdXBJZCxcbiAgICAgICAgICBjb250YWN0X2lkOiBpbnB1dC5jb250YWN0SWQsXG4gICAgICAgICAgLy8gdXNlcl9pZCBmaWVsZCByZW1vdmVkIGFzIGl0IGRvZXNuJ3QgZXhpc3QgaW4gdGhlIHRhYmxlIHNjaGVtYVxuICAgICAgICB9LFxuICAgICAgXSk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdEZXRhaWxlZCBlcnJvciBhZGRpbmcgY29udGFjdCB0byBncm91cDonLCBKU09OLnN0cmluZ2lmeShlcnJvciwgbnVsbCwgMikpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdPcmlnaW5hbCBlcnJvciBvYmplY3QgYWRkaW5nIGNvbnRhY3QgdG8gZ3JvdXA6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGFkZCBjb250YWN0IHRvIGdyb3VwJyxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICB9KSxcblxuICAvLyBSZW1vdmUgYSBjb250YWN0IGZyb20gYSBncm91cFxuICByZW1vdmVDb250YWN0OiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAuaW5wdXQoZ3JvdXBDb250YWN0U2NoZW1hKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIGlmICghY3R4LnVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdVTkFVVEhPUklaRUQnIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBjdHguc3VwYWJhc2VVc2VyXG4gICAgICAgIC5mcm9tKCdncm91cF9tZW1iZXJzJylcbiAgICAgICAgLmRlbGV0ZSgpXG4gICAgICAgIC5lcSgnY29udGFjdF9pZCcsIGlucHV0LmNvbnRhY3RJZClcbiAgICAgICAgLmVxKCdncm91cF9pZCcsIGlucHV0Lmdyb3VwSWQpO1xuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVtb3ZpbmcgY29udGFjdCBmcm9tIGdyb3VwOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byByZW1vdmUgY29udGFjdCBmcm9tIGdyb3VwJyxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICB9KSxcblxuICAvLyBHZXQgYWxsIGNvbnRhY3RzIGluIGEgZ3JvdXBcbiAgZ2V0Q29udGFjdHM6IHByb3RlY3RlZFByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7IGdyb3VwSWQ6IHouc3RyaW5nKCkudXVpZCgpIH0pKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIGlmICghY3R4LnVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdVTkFVVEhPUklaRUQnIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7IGRhdGE6IGdyb3VwLCBlcnJvcjogZ3JvdXBFcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlVXNlclxuICAgICAgICAuZnJvbSgnZ3JvdXBzJylcbiAgICAgICAgLnNlbGVjdCgnaWQnKVxuICAgICAgICAuZXEoJ2lkJywgaW5wdXQuZ3JvdXBJZClcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBpZiAoZ3JvdXBFcnJvciB8fCAhZ3JvdXApIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnLCBtZXNzYWdlOiAnR3JvdXAgbm90IGZvdW5kJyB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlVXNlclxuICAgICAgICAuZnJvbSgnZ3JvdXBfbWVtYmVycycpXG4gICAgICAgIC5zZWxlY3QoJ2NvbnRhY3RzOmNvbnRhY3RfaWQgKCopJylcbiAgICAgICAgLmVxKCdncm91cF9pZCcsIGlucHV0Lmdyb3VwSWQpO1xuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY29udGFjdHMgaW4gZ3JvdXA6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIGNvbnRhY3RzIGluIGdyb3VwJyxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhLm1hcCgoaXRlbTogYW55KSA9PiBpdGVtLmNvbnRhY3RzKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgfSksXG59KTtcbiJdLCJuYW1lcyI6WyJUUlBDRXJyb3IiLCJ6Iiwicm91dGVyIiwicHJvdGVjdGVkUHJvY2VkdXJlIiwiZ3JvdXBJbnB1dFNjaGVtYSIsIm9iamVjdCIsImlkIiwic3RyaW5nIiwidXVpZCIsIm9wdGlvbmFsIiwibmFtZSIsIm1pbiIsIm1heCIsImRlc2NyaXB0aW9uIiwibnVsbGFibGUiLCJjb2xvciIsInJlZ2V4IiwiZW1vamkiLCJvciIsImxpdGVyYWwiLCJ0cmFuc2Zvcm0iLCJ2YWwiLCJncm91cENvbnRhY3RTY2hlbWEiLCJncm91cElkIiwiY29udGFjdElkIiwiZ3JvdXBSb3V0ZXIiLCJnZXRHcm91cHNGb3JDb250YWN0IiwiaW5wdXQiLCJxdWVyeSIsImN0eCIsInVzZXIiLCJjb2RlIiwiZGF0YSIsIm1lbWJlckRhdGEiLCJlcnJvciIsIm1lbWJlckVycm9yIiwic3VwYWJhc2VVc2VyIiwiZnJvbSIsInNlbGVjdCIsImVxIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJsZW5ndGgiLCJncm91cElkcyIsIm1hcCIsIml0ZW0iLCJncm91cF9pZCIsImdyb3Vwc0RhdGEiLCJncm91cHNFcnJvciIsImluIiwiZXJyIiwiRXJyb3IiLCJsaXN0Iiwib3JkZXIiLCJncm91cCIsImNvbnRhY3RDb3VudCIsIkFycmF5IiwiaXNBcnJheSIsImdyb3VwX21lbWJlcnMiLCJncm91cEZpZWxkcyIsImdldEJ5SWQiLCJzaW5nbGUiLCJzYXZlIiwibXV0YXRpb24iLCJpc1VwZGF0ZSIsImdyb3VwRGF0YSIsInVzZXJfaWQiLCJ1cGRhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidXBzZXJ0IiwiZGVsZXRlIiwic3VjY2VzcyIsImRlbGV0ZWRHcm91cElkIiwiYWRkQ29udGFjdCIsImV4aXN0aW5nIiwiZXhpc3RpbmdFcnJvciIsImluc2VydCIsImNvbnRhY3RfaWQiLCJKU09OIiwic3RyaW5naWZ5IiwicmVtb3ZlQ29udGFjdCIsImdldENvbnRhY3RzIiwiZ3JvdXBFcnJvciIsImNvbnRhY3RzIiwiZmlsdGVyIiwiQm9vbGVhbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../packages/server/src/routers/group.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/server/src/routers/import.ts":
/*!***************************************************!*\
  !*** ../../packages/server/src/routers/import.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   importRouter: () => (/* binding */ importRouter)\n/* harmony export */ });\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/../../node_modules/.pnpm/@trpc+server@11.4.2_typescript@5.8.3/node_modules/@trpc/server/dist/tracked-gU3ttYjg.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/../../node_modules/.pnpm/zod@3.25.67/node_modules/zod/dist/esm/index.js\");\n/* harmony import */ var _trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../trpc */ \"(rsc)/../../packages/server/src/trpc.ts\");\n\n\n\n// Schema for CSV import contact data\nconst csvContactInputSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    full_name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().min(1, 'Full name is required'),\n    email: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().email('Invalid email address').optional().nullable(),\n    phone: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    phone_country_code: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    company: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    job_title: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    website: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    notes: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n    tags: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional().nullable(),\n    social_handles: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional().nullable(),\n    address: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable()\n});\nconst importRouter = (0,_trpc__WEBPACK_IMPORTED_MODULE_1__.router)({\n    // Bulk import contacts from CSV\n    contacts: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.array(csvContactInputSchema)).mutation(async ({ input, ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        if (input.length === 0) {\n            return {\n                success: true,\n                imported: 0,\n                errors: []\n            };\n        }\n        const importResults = {\n            success: true,\n            imported: 0,\n            errors: [],\n            skipped: 0\n        };\n        // Transform CSV data to database format\n        const contactsToInsert = input.map((contact)=>({\n                full_name: contact.full_name,\n                email: contact.email,\n                phone: contact.phone,\n                phone_country_code: contact.phone_country_code,\n                company_name: contact.company,\n                job_title: contact.job_title,\n                website: contact.website,\n                notes: contact.notes,\n                tags: contact.tags,\n                social_handles: contact.social_handles,\n                address_street: contact.address,\n                user_id: ctx.user.id\n            }));\n        try {\n            const { data, error } = await ctx.supabaseUser.from('contacts').insert(contactsToInsert).select('id, full_name, email');\n            if (error) {\n                importResults.success = false;\n                importResults.errors.push(`Database error: ${error.message}`);\n                return importResults;\n            }\n            importResults.imported = data?.length ?? 0;\n            return importResults;\n        } catch (error) {\n            importResults.success = false;\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n            importResults.errors.push(errorMessage);\n            return importResults;\n        }\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2VydmVyL3NyYy9yb3V0ZXJzL2ltcG9ydC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXlDO0FBQ2pCO0FBRTZCO0FBRXJELHFDQUFxQztBQUNyQyxNQUFNSSx3QkFBd0JILHlDQUFRLENBQUM7SUFDckNLLFdBQVdMLHlDQUFRLEdBQUdPLEdBQUcsQ0FBQyxHQUFHO0lBQzdCQyxPQUFPUix5Q0FBUSxHQUFHUSxLQUFLLENBQUMseUJBQXlCQyxRQUFRLEdBQUdDLFFBQVE7SUFDcEVDLE9BQU9YLHlDQUFRLEdBQUdTLFFBQVEsR0FBR0MsUUFBUTtJQUNyQ0Usb0JBQW9CWix5Q0FBUSxHQUFHUyxRQUFRLEdBQUdDLFFBQVE7SUFDbERHLFNBQVNiLHlDQUFRLEdBQUdTLFFBQVEsR0FBR0MsUUFBUTtJQUN2Q0ksV0FBV2QseUNBQVEsR0FBR1MsUUFBUSxHQUFHQyxRQUFRO0lBQ3pDSyxTQUFTZix5Q0FBUSxHQUFHUyxRQUFRLEdBQUdDLFFBQVE7SUFDdkNNLE9BQU9oQix5Q0FBUSxHQUFHUyxRQUFRLEdBQUdDLFFBQVE7SUFDckNPLE1BQU1qQix3Q0FBTyxDQUFDQSx5Q0FBUSxJQUFJUyxRQUFRLEdBQUdDLFFBQVE7SUFDN0NTLGdCQUFnQm5CLHdDQUFPLENBQUNBLHlDQUFRLElBQUlTLFFBQVEsR0FBR0MsUUFBUTtJQUN2RFUsU0FBU3BCLHlDQUFRLEdBQUdTLFFBQVEsR0FBR0MsUUFBUTtBQUN6QztBQUVPLE1BQU1XLGVBQWVwQiw2Q0FBTUEsQ0FBQztJQUNqQyxnQ0FBZ0M7SUFDaENxQixVQUFVcEIscURBQWtCQSxDQUN6QnFCLEtBQUssQ0FBQ3ZCLHdDQUFPLENBQUNHLHdCQUNkcUIsUUFBUSxDQUFDLE9BQU8sRUFBRUQsS0FBSyxFQUFFRSxHQUFHLEVBQUU7UUFDN0IsSUFBSSxDQUFDQSxJQUFJQyxJQUFJLEVBQUU7WUFDYixNQUFNLElBQUkzQixtREFBU0EsQ0FBQztnQkFBRTRCLE1BQU07WUFBZTtRQUM3QztRQUVBLElBQUlKLE1BQU1LLE1BQU0sS0FBSyxHQUFHO1lBQ3RCLE9BQU87Z0JBQUVDLFNBQVM7Z0JBQU1DLFVBQVU7Z0JBQUdDLFFBQVEsRUFBRTtZQUFDO1FBQ2xEO1FBRUEsTUFBTUMsZ0JBQWdCO1lBQ3BCSCxTQUFTO1lBQ1RDLFVBQVU7WUFDVkMsUUFBUSxFQUFFO1lBQ1ZFLFNBQVM7UUFDWDtRQUVBLHdDQUF3QztRQUN4QyxNQUFNQyxtQkFBbUJYLE1BQU1ZLEdBQUcsQ0FBQyxDQUFDQyxVQUFhO2dCQUMvQy9CLFdBQVcrQixRQUFRL0IsU0FBUztnQkFDNUJHLE9BQU80QixRQUFRNUIsS0FBSztnQkFDcEJHLE9BQU95QixRQUFRekIsS0FBSztnQkFDcEJDLG9CQUFvQndCLFFBQVF4QixrQkFBa0I7Z0JBQzlDeUIsY0FBY0QsUUFBUXZCLE9BQU87Z0JBQzdCQyxXQUFXc0IsUUFBUXRCLFNBQVM7Z0JBQzVCQyxTQUFTcUIsUUFBUXJCLE9BQU87Z0JBQ3hCQyxPQUFPb0IsUUFBUXBCLEtBQUs7Z0JBQ3BCQyxNQUFNbUIsUUFBUW5CLElBQUk7Z0JBQ2xCRSxnQkFBZ0JpQixRQUFRakIsY0FBYztnQkFDdENtQixnQkFBZ0JGLFFBQVFoQixPQUFPO2dCQUMvQm1CLFNBQVNkLElBQUlDLElBQUksQ0FBQ2MsRUFBRTtZQUN0QjtRQUVBLElBQUk7WUFDRixNQUFNLEVBQUVDLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTWpCLElBQUlrQixZQUFZLENBQzNDQyxJQUFJLENBQUMsWUFDTEMsTUFBTSxDQUFDWCxrQkFDUFksTUFBTSxDQUFDO1lBRVYsSUFBSUosT0FBTztnQkFDVFYsY0FBY0gsT0FBTyxHQUFHO2dCQUN4QkcsY0FBY0QsTUFBTSxDQUFDZ0IsSUFBSSxDQUFDLENBQUMsZ0JBQWdCLEVBQUVMLE1BQU1NLE9BQU8sRUFBRTtnQkFDNUQsT0FBT2hCO1lBQ1Q7WUFFQUEsY0FBY0YsUUFBUSxHQUFHVyxNQUFNYixVQUFVO1lBQ3pDLE9BQU9JO1FBRVQsRUFBRSxPQUFPVSxPQUFPO1lBQ2RWLGNBQWNILE9BQU8sR0FBRztZQUN4QixNQUFNb0IsZUFBZVAsaUJBQWlCUSxRQUFRUixNQUFNTSxPQUFPLEdBQUc7WUFDOURoQixjQUFjRCxNQUFNLENBQUNnQixJQUFJLENBQUNFO1lBQzFCLE9BQU9qQjtRQUNUO0lBQ0Y7QUFDSixHQUFHIiwic291cmNlcyI6WyIvVXNlcnMvcGV0ZXJqYW1lc2JsaXp6YXJkL3Byb2plY3RzL2FwcF9jb2RleGNybWFwcC9wYWNrYWdlcy9zZXJ2ZXIvc3JjL3JvdXRlcnMvaW1wb3J0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRSUENFcnJvciB9IGZyb20gJ0B0cnBjL3NlcnZlcic7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcblxuaW1wb3J0IHsgcm91dGVyLCBwcm90ZWN0ZWRQcm9jZWR1cmUgfSBmcm9tICcuLi90cnBjJztcblxuLy8gU2NoZW1hIGZvciBDU1YgaW1wb3J0IGNvbnRhY3QgZGF0YVxuY29uc3QgY3N2Q29udGFjdElucHV0U2NoZW1hID0gei5vYmplY3Qoe1xuICBmdWxsX25hbWU6IHouc3RyaW5nKCkubWluKDEsICdGdWxsIG5hbWUgaXMgcmVxdWlyZWQnKSxcbiAgZW1haWw6IHouc3RyaW5nKCkuZW1haWwoJ0ludmFsaWQgZW1haWwgYWRkcmVzcycpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgcGhvbmU6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICBwaG9uZV9jb3VudHJ5X2NvZGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICBjb21wYW55OiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSwgLy8gTm90ZTogbWFwcyB0byBjb21wYW55X25hbWUgaW4gREJcbiAgam9iX3RpdGxlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgd2Vic2l0ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gIG5vdGVzOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgdGFnczogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksIC8vIEFscmVhZHkgY29udmVydGVkIHRvIGFycmF5IGJ5IENTViBwcm9jZXNzaW5nXG4gIHNvY2lhbF9oYW5kbGVzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgYWRkcmVzczogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG59KTtcblxuZXhwb3J0IGNvbnN0IGltcG9ydFJvdXRlciA9IHJvdXRlcih7XG4gIC8vIEJ1bGsgaW1wb3J0IGNvbnRhY3RzIGZyb20gQ1NWXG4gIGNvbnRhY3RzOiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAuaW5wdXQoei5hcnJheShjc3ZDb250YWN0SW5wdXRTY2hlbWEpKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIGlmICghY3R4LnVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdVTkFVVEhPUklaRUQnIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoaW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGltcG9ydGVkOiAwLCBlcnJvcnM6IFtdIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGltcG9ydFJlc3VsdHMgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGltcG9ydGVkOiAwLFxuICAgICAgICBlcnJvcnM6IFtdIGFzIHN0cmluZ1tdLFxuICAgICAgICBza2lwcGVkOiAwLFxuICAgICAgfTtcblxuICAgICAgLy8gVHJhbnNmb3JtIENTViBkYXRhIHRvIGRhdGFiYXNlIGZvcm1hdFxuICAgICAgY29uc3QgY29udGFjdHNUb0luc2VydCA9IGlucHV0Lm1hcCgoY29udGFjdCkgPT4gKHtcbiAgICAgICAgZnVsbF9uYW1lOiBjb250YWN0LmZ1bGxfbmFtZSxcbiAgICAgICAgZW1haWw6IGNvbnRhY3QuZW1haWwsXG4gICAgICAgIHBob25lOiBjb250YWN0LnBob25lLFxuICAgICAgICBwaG9uZV9jb3VudHJ5X2NvZGU6IGNvbnRhY3QucGhvbmVfY291bnRyeV9jb2RlLFxuICAgICAgICBjb21wYW55X25hbWU6IGNvbnRhY3QuY29tcGFueSwgLy8gTWFwIGNvbXBhbnkgdG8gY29tcGFueV9uYW1lXG4gICAgICAgIGpvYl90aXRsZTogY29udGFjdC5qb2JfdGl0bGUsXG4gICAgICAgIHdlYnNpdGU6IGNvbnRhY3Qud2Vic2l0ZSxcbiAgICAgICAgbm90ZXM6IGNvbnRhY3Qubm90ZXMsXG4gICAgICAgIHRhZ3M6IGNvbnRhY3QudGFncywgLy8gQWxyZWFkeSBjb252ZXJ0ZWQgdG8gYXJyYXkgYnkgQ1NWIHByb2Nlc3NpbmdcbiAgICAgICAgc29jaWFsX2hhbmRsZXM6IGNvbnRhY3Quc29jaWFsX2hhbmRsZXMsXG4gICAgICAgIGFkZHJlc3Nfc3RyZWV0OiBjb250YWN0LmFkZHJlc3MsIC8vIE1hcCBhZGRyZXNzIHRvIGFkZHJlc3Nfc3RyZWV0XG4gICAgICAgIHVzZXJfaWQ6IGN0eC51c2VyLmlkLFxuICAgICAgfSkpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBjdHguc3VwYWJhc2VVc2VyXG4gICAgICAgICAgLmZyb20oJ2NvbnRhY3RzJylcbiAgICAgICAgICAuaW5zZXJ0KGNvbnRhY3RzVG9JbnNlcnQpXG4gICAgICAgICAgLnNlbGVjdCgnaWQsIGZ1bGxfbmFtZSwgZW1haWwnKTtcblxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICBpbXBvcnRSZXN1bHRzLnN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICBpbXBvcnRSZXN1bHRzLmVycm9ycy5wdXNoKGBEYXRhYmFzZSBlcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgIHJldHVybiBpbXBvcnRSZXN1bHRzO1xuICAgICAgICB9XG5cbiAgICAgICAgaW1wb3J0UmVzdWx0cy5pbXBvcnRlZCA9IGRhdGE/Lmxlbmd0aCA/PyAwO1xuICAgICAgICByZXR1cm4gaW1wb3J0UmVzdWx0cztcblxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaW1wb3J0UmVzdWx0cy5zdWNjZXNzID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnO1xuICAgICAgICBpbXBvcnRSZXN1bHRzLmVycm9ycy5wdXNoKGVycm9yTWVzc2FnZSk7XG4gICAgICAgIHJldHVybiBpbXBvcnRSZXN1bHRzO1xuICAgICAgfVxuICAgIH0pLFxufSk7Il0sIm5hbWVzIjpbIlRSUENFcnJvciIsInoiLCJyb3V0ZXIiLCJwcm90ZWN0ZWRQcm9jZWR1cmUiLCJjc3ZDb250YWN0SW5wdXRTY2hlbWEiLCJvYmplY3QiLCJmdWxsX25hbWUiLCJzdHJpbmciLCJtaW4iLCJlbWFpbCIsIm9wdGlvbmFsIiwibnVsbGFibGUiLCJwaG9uZSIsInBob25lX2NvdW50cnlfY29kZSIsImNvbXBhbnkiLCJqb2JfdGl0bGUiLCJ3ZWJzaXRlIiwibm90ZXMiLCJ0YWdzIiwiYXJyYXkiLCJzb2NpYWxfaGFuZGxlcyIsImFkZHJlc3MiLCJpbXBvcnRSb3V0ZXIiLCJjb250YWN0cyIsImlucHV0IiwibXV0YXRpb24iLCJjdHgiLCJ1c2VyIiwiY29kZSIsImxlbmd0aCIsInN1Y2Nlc3MiLCJpbXBvcnRlZCIsImVycm9ycyIsImltcG9ydFJlc3VsdHMiLCJza2lwcGVkIiwiY29udGFjdHNUb0luc2VydCIsIm1hcCIsImNvbnRhY3QiLCJjb21wYW55X25hbWUiLCJhZGRyZXNzX3N0cmVldCIsInVzZXJfaWQiLCJpZCIsImRhdGEiLCJlcnJvciIsInN1cGFiYXNlVXNlciIsImZyb20iLCJpbnNlcnQiLCJzZWxlY3QiLCJwdXNoIiwibWVzc2FnZSIsImVycm9yTWVzc2FnZSIsIkVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../packages/server/src/routers/import.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/server/src/routers/storage.ts":
/*!****************************************************!*\
  !*** ../../packages/server/src/routers/storage.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   storageRouter: () => (/* binding */ storageRouter)\n/* harmony export */ });\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/../../node_modules/.pnpm/@trpc+server@11.4.2_typescript@5.8.3/node_modules/@trpc/server/dist/tracked-gU3ttYjg.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/../../node_modules/.pnpm/zod@3.25.67/node_modules/zod/dist/esm/index.js\");\n/* harmony import */ var _trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../trpc */ \"(rsc)/../../packages/server/src/trpc.ts\");\n\n\n\nconst storageRouter = (0,_trpc__WEBPACK_IMPORTED_MODULE_1__.router)({\n    // Generate a presigned upload URL for direct browser-to-storage uploads\n    getUploadUrl: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        fileName: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        contentType: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        folderPath: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().default('contacts')\n    })).mutation(async ({ input, ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        try {\n            // Create a unique file path\n            const filePath = `${input.folderPath}/${ctx.user.id}/${input.fileName}`;\n            // Generate a signed URL for direct upload\n            const { data, error } = await ctx.supabaseAdmin.storage.from('contact-profile-photo').createSignedUploadUrl(filePath);\n            if (error) {\n                console.error('Supabase createSignedUploadUrl error:', error);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                    code: 'INTERNAL_SERVER_ERROR',\n                    message: `Failed to generate upload URL: ${error.message}`\n                });\n            }\n            return {\n                signedUrl: data.signedUrl,\n                path: data.path,\n                token: data.token\n            };\n        } catch (error) {\n            console.error('Error generating upload URL:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: error instanceof Error ? error.message : 'Failed to generate upload URL'\n            });\n        }\n    }),\n    // Get a private URL for a specific file\n    getFileUrl: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        filePath: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        try {\n            // Generate a signed URL for private access\n            const { data, error } = await ctx.supabaseAdmin.storage.from('contact-profile-photo').createSignedUrl(input.filePath, 3600); // URL valid for 1 hour\n            if (error) {\n                console.error('Supabase createSignedUrl error:', error);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                    code: 'INTERNAL_SERVER_ERROR',\n                    message: `Failed to generate signed URL: ${error.message}`\n                });\n            }\n            return {\n                signedUrl: data.signedUrl\n            };\n        } catch (error) {\n            console.error('Error generating signed URL:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: error instanceof Error ? error.message : 'Failed to generate signed URL'\n            });\n        }\n    }),\n    // Delete a file from storage\n    deleteFile: _trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        filePath: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).mutation(async ({ input, ctx })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED'\n            });\n        }\n        try {\n            // Only allow users to delete their own files\n            if (!input.filePath.includes(`/${ctx.user.id}/`)) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                    code: 'FORBIDDEN',\n                    message: 'You can only delete your own files'\n                });\n            }\n            // Delete the file\n            const { error } = await ctx.supabaseAdmin.storage.from('contact-profile-photo').remove([\n                input.filePath\n            ]);\n            if (error) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                    code: 'INTERNAL_SERVER_ERROR',\n                    message: `Failed to delete file: ${error.message}`\n                });\n            }\n            return {\n                success: true\n            };\n        } catch (error) {\n            console.error('Error deleting file:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: error instanceof Error ? error.message : 'Failed to delete file'\n            });\n        }\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2VydmVyL3NyYy9yb3V0ZXJzL3N0b3JhZ2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF5QztBQUNqQjtBQUU2QjtBQUU5QyxNQUFNSSxnQkFBZ0JGLDZDQUFNQSxDQUFDO0lBQ2xDLHdFQUF3RTtJQUN4RUcsY0FBY0YscURBQWtCQSxDQUM3QkcsS0FBSyxDQUNKTCx5Q0FBUSxDQUFDO1FBQ1BPLFVBQVVQLHlDQUFRO1FBQ2xCUyxhQUFhVCx5Q0FBUTtRQUNyQlUsWUFBWVYseUNBQVEsR0FBR1csT0FBTyxDQUFDO0lBQ2pDLElBRURDLFFBQVEsQ0FBQyxPQUFPLEVBQUVQLEtBQUssRUFBRVEsR0FBRyxFQUFFO1FBQzdCLElBQUksQ0FBQ0EsSUFBSUMsSUFBSSxFQUFFO1lBQ2IsTUFBTSxJQUFJZixtREFBU0EsQ0FBQztnQkFBRWdCLE1BQU07WUFBZTtRQUM3QztRQUVBLElBQUk7WUFDRiw0QkFBNEI7WUFDNUIsTUFBTUMsV0FBVyxHQUFHWCxNQUFNSyxVQUFVLENBQUMsQ0FBQyxFQUFFRyxJQUFJQyxJQUFJLENBQUNHLEVBQUUsQ0FBQyxDQUFDLEVBQUVaLE1BQU1FLFFBQVEsRUFBRTtZQUV2RSwwQ0FBMEM7WUFDMUMsTUFBTSxFQUFFVyxJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1OLElBQUlPLGFBQWEsQ0FBQ0MsT0FBTyxDQUNwREMsSUFBSSxDQUFDLHlCQUNMQyxxQkFBcUIsQ0FBQ1A7WUFFekIsSUFBSUcsT0FBTztnQkFDVEssUUFBUUwsS0FBSyxDQUFDLHlDQUF5Q0E7Z0JBQ3ZELE1BQU0sSUFBSXBCLG1EQUFTQSxDQUFDO29CQUNsQmdCLE1BQU07b0JBQ05VLFNBQVMsQ0FBQywrQkFBK0IsRUFBRU4sTUFBTU0sT0FBTyxFQUFFO2dCQUM1RDtZQUNGO1lBRUEsT0FBTztnQkFDTEMsV0FBV1IsS0FBS1EsU0FBUztnQkFDekJDLE1BQU1ULEtBQUtTLElBQUk7Z0JBQ2ZDLE9BQU9WLEtBQUtVLEtBQUs7WUFD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cHAvcGFja2FnZXMvc2VydmVyL3NyYy9yb3V0ZXJzL3N0b3JhZ2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVFJQQ0Vycm9yIH0gZnJvbSAnQHRycGMvc2VydmVyJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuXG5pbXBvcnQgeyByb3V0ZXIsIHByb3RlY3RlZFByb2NlZHVyZSB9IGZyb20gJy4uL3RycGMnO1xuXG5leHBvcnQgY29uc3Qgc3RvcmFnZVJvdXRlciA9IHJvdXRlcih7XG4gIC8vIEdlbmVyYXRlIGEgcHJlc2lnbmVkIHVwbG9hZCBVUkwgZm9yIGRpcmVjdCBicm93c2VyLXRvLXN0b3JhZ2UgdXBsb2Fkc1xuICBnZXRVcGxvYWRVcmw6IHByb3RlY3RlZFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgZmlsZU5hbWU6IHouc3RyaW5nKCksXG4gICAgICAgIGNvbnRlbnRUeXBlOiB6LnN0cmluZygpLFxuICAgICAgICBmb2xkZXJQYXRoOiB6LnN0cmluZygpLmRlZmF1bHQoJ2NvbnRhY3RzJyksXG4gICAgICB9KVxuICAgIClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICBpZiAoIWN0eC51c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnVU5BVVRIT1JJWkVEJyB9KTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgdW5pcXVlIGZpbGUgcGF0aFxuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAke2lucHV0LmZvbGRlclBhdGh9LyR7Y3R4LnVzZXIuaWR9LyR7aW5wdXQuZmlsZU5hbWV9YDtcblxuICAgICAgICAvLyBHZW5lcmF0ZSBhIHNpZ25lZCBVUkwgZm9yIGRpcmVjdCB1cGxvYWRcbiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlQWRtaW4uc3RvcmFnZVxuICAgICAgICAgIC5mcm9tKCdjb250YWN0LXByb2ZpbGUtcGhvdG8nKVxuICAgICAgICAgIC5jcmVhdGVTaWduZWRVcGxvYWRVcmwoZmlsZVBhdGgpO1xuXG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGNyZWF0ZVNpZ25lZFVwbG9hZFVybCBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gZ2VuZXJhdGUgdXBsb2FkIFVSTDogJHtlcnJvci5tZXNzYWdlfWAsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNpZ25lZFVybDogZGF0YS5zaWduZWRVcmwsXG4gICAgICAgICAgcGF0aDogZGF0YS5wYXRoLFxuICAgICAgICAgIHRva2VuOiBkYXRhLnRva2VuLFxuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyB1cGxvYWQgVVJMOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTpcbiAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3JcbiAgICAgICAgICAgICAgPyBlcnJvci5tZXNzYWdlXG4gICAgICAgICAgICAgIDogJ0ZhaWxlZCB0byBnZW5lcmF0ZSB1cGxvYWQgVVJMJyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSksXG5cbiAgLy8gR2V0IGEgcHJpdmF0ZSBVUkwgZm9yIGEgc3BlY2lmaWMgZmlsZVxuICBnZXRGaWxlVXJsOiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIGZpbGVQYXRoOiB6LnN0cmluZygpLFxuICAgICAgfSlcbiAgICApXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgaWYgKCFjdHgudXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ1VOQVVUSE9SSVpFRCcgfSk7XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEdlbmVyYXRlIGEgc2lnbmVkIFVSTCBmb3IgcHJpdmF0ZSBhY2Nlc3NcbiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgY3R4LnN1cGFiYXNlQWRtaW4uc3RvcmFnZVxuICAgICAgICAgIC5mcm9tKCdjb250YWN0LXByb2ZpbGUtcGhvdG8nKVxuICAgICAgICAgIC5jcmVhdGVTaWduZWRVcmwoaW5wdXQuZmlsZVBhdGgsIDM2MDApOyAvLyBVUkwgdmFsaWQgZm9yIDEgaG91clxuXG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGNyZWF0ZVNpZ25lZFVybCBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gZ2VuZXJhdGUgc2lnbmVkIFVSTDogJHtlcnJvci5tZXNzYWdlfWAsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNpZ25lZFVybDogZGF0YS5zaWduZWRVcmwsXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIHNpZ25lZCBVUkw6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvclxuICAgICAgICAgICAgICA/IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgICAgICAgOiAnRmFpbGVkIHRvIGdlbmVyYXRlIHNpZ25lZCBVUkwnLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KSxcblxuICAvLyBEZWxldGUgYSBmaWxlIGZyb20gc3RvcmFnZVxuICBkZWxldGVGaWxlOiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIGZpbGVQYXRoOiB6LnN0cmluZygpLFxuICAgICAgfSlcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgaWYgKCFjdHgudXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ1VOQVVUSE9SSVpFRCcgfSk7XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIE9ubHkgYWxsb3cgdXNlcnMgdG8gZGVsZXRlIHRoZWlyIG93biBmaWxlc1xuICAgICAgICBpZiAoIWlucHV0LmZpbGVQYXRoLmluY2x1ZGVzKGAvJHtjdHgudXNlci5pZH0vYCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6ICdGT1JCSURERU4nLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1lvdSBjYW4gb25seSBkZWxldGUgeW91ciBvd24gZmlsZXMnLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVsZXRlIHRoZSBmaWxlXG4gICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IGN0eC5zdXBhYmFzZUFkbWluLnN0b3JhZ2VcbiAgICAgICAgICAuZnJvbSgnY29udGFjdC1wcm9maWxlLXBob3RvJylcbiAgICAgICAgICAucmVtb3ZlKFtpbnB1dC5maWxlUGF0aF0pO1xuXG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGRlbGV0ZSBmaWxlOiAke2Vycm9yLm1lc3NhZ2V9YCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGZpbGU6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGRlbGV0ZSBmaWxlJyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSksXG59KTtcbiJdLCJuYW1lcyI6WyJUUlBDRXJyb3IiLCJ6Iiwicm91dGVyIiwicHJvdGVjdGVkUHJvY2VkdXJlIiwic3RvcmFnZVJvdXRlciIsImdldFVwbG9hZFVybCIsImlucHV0Iiwib2JqZWN0IiwiZmlsZU5hbWUiLCJzdHJpbmciLCJjb250ZW50VHlwZSIsImZvbGRlclBhdGgiLCJkZWZhdWx0IiwibXV0YXRpb24iLCJjdHgiLCJ1c2VyIiwiY29kZSIsImZpbGVQYXRoIiwiaWQiLCJkYXRhIiwiZXJyb3IiLCJzdXBhYmFzZUFkbWluIiwic3RvcmFnZSIsImZyb20iLCJjcmVhdGVTaWduZWRVcGxvYWRVcmwiLCJjb25zb2xlIiwibWVzc2FnZSIsInNpZ25lZFVybCIsInBhdGgiLCJ0b2tlbiIsIkVycm9yIiwiZ2V0RmlsZVVybCIsInF1ZXJ5IiwiY3JlYXRlU2lnbmVkVXJsIiwiZGVsZXRlRmlsZSIsImluY2x1ZGVzIiwicmVtb3ZlIiwic3VjY2VzcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../packages/server/src/routers/storage.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/server/src/supabaseAdmin.ts":
/*!**************************************************!*\
  !*** ../../packages/server/src/supabaseAdmin.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/../../node_modules/.pnpm/@supabase+supabase-js@2.50.0/node_modules/@supabase/supabase-js/dist/module/index.js\");\n// packages/server/src/supabaseAdmin.ts\n\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://ppzaajcutzyluffvbnrg.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vcGFja2FnZXMvc2VydmVyL3NyYy9zdXBhYmFzZUFkbWluLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsdUNBQXVDO0FBQ2M7QUFFOUMsTUFBTUMsZ0JBQWdCRCxtRUFBWUEsQ0FDdkNFLDBDQUFvQyxFQUNwQ0EsUUFBUUMsR0FBRyxDQUFDRSx5QkFBeUIsRUFDckM7SUFDRUMsTUFBTTtRQUFFQyxrQkFBa0I7UUFBT0MsZ0JBQWdCO0lBQU07QUFDekQsR0FDQSIsInNvdXJjZXMiOlsiL1VzZXJzL3BldGVyamFtZXNibGl6emFyZC9wcm9qZWN0cy9hcHBfY29kZXhjcm1hcHAvcGFja2FnZXMvc2VydmVyL3NyYy9zdXBhYmFzZUFkbWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhY2thZ2VzL3NlcnZlci9zcmMvc3VwYWJhc2VBZG1pbi50c1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlQWRtaW4gPSBjcmVhdGVDbGllbnQoXG4gIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkhLFxuICB7XG4gICAgYXV0aDogeyBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSwgcGVyc2lzdFNlc3Npb246IGZhbHNlIH0sXG4gIH1cbik7XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VBZG1pbiIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiYXV0aCIsImF1dG9SZWZyZXNoVG9rZW4iLCJwZXJzaXN0U2Vzc2lvbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../packages/server/src/supabaseAdmin.ts\n");

/***/ }),

/***/ "(rsc)/../../packages/server/src/trpc.ts":
/*!*****************************************!*\
  !*** ../../packages/server/src/trpc.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hasRole: () => (/* binding */ hasRole),\n/* harmony export */   middleware: () => (/* binding */ middleware),\n/* harmony export */   protectedProcedure: () => (/* binding */ protectedProcedure),\n/* harmony export */   publicProcedure: () => (/* binding */ publicProcedure),\n/* harmony export */   rateLimit: () => (/* binding */ rateLimit),\n/* harmony export */   router: () => (/* binding */ router)\n/* harmony export */ });\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/../../node_modules/.pnpm/@trpc+server@11.4.2_typescript@5.8.3/node_modules/@trpc/server/dist/initTRPC-IT_6ZYJd.mjs\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/../../node_modules/.pnpm/@trpc+server@11.4.2_typescript@5.8.3/node_modules/@trpc/server/dist/tracked-gU3ttYjg.mjs\");\n/* harmony import */ var superjson__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! superjson */ \"(rsc)/../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/index.js\");\n\n\nconst t = _trpc_server__WEBPACK_IMPORTED_MODULE_1__.initTRPC.context().create({\n    transformer: superjson__WEBPACK_IMPORTED_MODULE_0__[\"default\"]\n});\nconst router = t.router;\nconst publicProcedure = t.procedure;\nconst middleware = t.middleware;\n/**\n * Authentication middleware\n * Checks if the user is authenticated and adds the user to the context\n */ const isAuthed = t.middleware(({ ctx, next })=>{\n    if (!ctx.user) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n        code: 'UNAUTHORIZED',\n        message: 'You must be logged in to access this resource'\n    });\n    return next({\n        ctx: {\n            ...ctx,\n            user: ctx.user\n        }\n    });\n});\n/**\n * Role-based authorization middleware\n * Checks if the user has the required role\n * @param requiredRoles Array of roles that are allowed to access the resource\n */ const hasRole = (requiredRoles)=>t.middleware(({ ctx, next })=>{\n        if (!ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'UNAUTHORIZED',\n                message: 'You must be logged in to access this resource'\n            });\n        }\n        // Get user roles from the session claims\n        const userRoles = ctx.session?.user?.app_metadata?.roles || [];\n        // Check if the user has any of the required roles\n        const hasRequiredRole = requiredRoles.some((role)=>userRoles.includes(role));\n        if (!hasRequiredRole) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'FORBIDDEN',\n                message: 'You do not have permission to access this resource'\n            });\n        }\n        return next({\n            ctx: {\n                ...ctx,\n                user: ctx.user,\n                roles: userRoles\n            }\n        });\n    });\n/**\n * Rate limiting middleware\n * Limits the number of requests a user can make in a given time period\n * @param limit Maximum number of requests\n * @param timeWindowMs Time window in milliseconds\n */ const rateLimit = (limit, timeWindowMs = 60000)=>{\n    // Simple in-memory store for rate limiting\n    // In production, use Redis or another distributed store\n    const store = new Map();\n    return t.middleware(({ ctx, next })=>{\n        if (!ctx.user) {\n            return next({\n                ctx\n            });\n        }\n        const userId = ctx.user.id;\n        const now = Date.now();\n        const userRateLimit = store.get(userId);\n        if (!userRateLimit || now > userRateLimit.resetTime) {\n            // First request or reset time has passed\n            store.set(userId, {\n                count: 1,\n                resetTime: now + timeWindowMs\n            });\n            return next({\n                ctx\n            });\n        }\n        if (userRateLimit.count >= limit) {\n            // Rate limit exceeded\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'TOO_MANY_REQUESTS',\n                message: 'Rate limit exceeded. Please try again later.'\n            });\n        }\n        // Increment request count\n        userRateLimit.count += 1;\n        store.set(userId, userRateLimit);\n        return next({\n            ctx\n        });\n    });\n};\n// Export procedures with middleware\nconst protectedProcedure = t.procedure.use(isAuthed);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cUJ0QyxFQUFFTSxTQUFTLENBQUNpQyxHQUFHLENBQUMvQixVQUFVIiwic291cmNlcyI6WyIvVXNlcnMvcGV0ZXJqYW1lc2JsaXp6YXJkL3Byb2plY3RzL2FwcF9jb2RleGNybWFwcC9wYWNrYWdlcy9zZXJ2ZXIvc3JjL3RycGMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5pdFRSUEMsIFRSUENFcnJvciwgaW5mZXJQcm9jZWR1cmVPdXRwdXQgfSBmcm9tICdAdHJwYy9zZXJ2ZXInO1xuaW1wb3J0IHN1cGVyanNvbiBmcm9tICdzdXBlcmpzb24nO1xuXG5pbXBvcnQgdHlwZSB7IGNyZWF0ZUNvbnRleHQgfSBmcm9tICcuL2NvbnRleHQnO1xuXG5jb25zdCB0ID0gaW5pdFRSUEMuY29udGV4dDx0eXBlb2YgY3JlYXRlQ29udGV4dD4oKS5jcmVhdGUoe1xuICB0cmFuc2Zvcm1lcjogc3VwZXJqc29uLFxufSk7XG5cbmV4cG9ydCBjb25zdCByb3V0ZXIgPSB0LnJvdXRlcjtcbmV4cG9ydCBjb25zdCBwdWJsaWNQcm9jZWR1cmUgPSB0LnByb2NlZHVyZTtcbmV4cG9ydCBjb25zdCBtaWRkbGV3YXJlID0gdC5taWRkbGV3YXJlO1xuXG4vKipcbiAqIEF1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmVcbiAqIENoZWNrcyBpZiB0aGUgdXNlciBpcyBhdXRoZW50aWNhdGVkIGFuZCBhZGRzIHRoZSB1c2VyIHRvIHRoZSBjb250ZXh0XG4gKi9cbmNvbnN0IGlzQXV0aGVkID0gdC5taWRkbGV3YXJlKCh7IGN0eCwgbmV4dCB9KSA9PiB7XG4gIGlmICghY3R4LnVzZXIpIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgIGNvZGU6ICdVTkFVVEhPUklaRUQnLFxuICAgIG1lc3NhZ2U6ICdZb3UgbXVzdCBiZSBsb2dnZWQgaW4gdG8gYWNjZXNzIHRoaXMgcmVzb3VyY2UnXG4gIH0pO1xuICByZXR1cm4gbmV4dCh7IGN0eDogeyAuLi5jdHgsIHVzZXI6IGN0eC51c2VyISB9IH0pO1xufSk7XG5cbi8qKlxuICogUm9sZS1iYXNlZCBhdXRob3JpemF0aW9uIG1pZGRsZXdhcmVcbiAqIENoZWNrcyBpZiB0aGUgdXNlciBoYXMgdGhlIHJlcXVpcmVkIHJvbGVcbiAqIEBwYXJhbSByZXF1aXJlZFJvbGVzIEFycmF5IG9mIHJvbGVzIHRoYXQgYXJlIGFsbG93ZWQgdG8gYWNjZXNzIHRoZSByZXNvdXJjZVxuICovXG5leHBvcnQgY29uc3QgaGFzUm9sZSA9IChyZXF1aXJlZFJvbGVzOiBzdHJpbmdbXSkgPT5cbiAgdC5taWRkbGV3YXJlKCh7IGN0eCwgbmV4dCB9KSA9PiB7XG4gICAgaWYgKCFjdHgudXNlcikge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6ICdVTkFVVEhPUklaRUQnLFxuICAgICAgICBtZXNzYWdlOiAnWW91IG11c3QgYmUgbG9nZ2VkIGluIHRvIGFjY2VzcyB0aGlzIHJlc291cmNlJyxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEdldCB1c2VyIHJvbGVzIGZyb20gdGhlIHNlc3Npb24gY2xhaW1zXG4gICAgY29uc3QgdXNlclJvbGVzID0gY3R4LnNlc3Npb24/LnVzZXI/LmFwcF9tZXRhZGF0YT8ucm9sZXMgfHwgW107XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHVzZXIgaGFzIGFueSBvZiB0aGUgcmVxdWlyZWQgcm9sZXNcbiAgICBjb25zdCBoYXNSZXF1aXJlZFJvbGUgPSByZXF1aXJlZFJvbGVzLnNvbWUocm9sZSA9PiB1c2VyUm9sZXMuaW5jbHVkZXMocm9sZSkpO1xuICAgIFxuICAgIGlmICghaGFzUmVxdWlyZWRSb2xlKSB7XG4gICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgY29kZTogJ0ZPUkJJRERFTicsXG4gICAgICAgIG1lc3NhZ2U6ICdZb3UgZG8gbm90IGhhdmUgcGVybWlzc2lvbiB0byBhY2Nlc3MgdGhpcyByZXNvdXJjZScsXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgY3R4OiB7XG4gICAgICAgIC4uLmN0eCxcbiAgICAgICAgdXNlcjogY3R4LnVzZXIsXG4gICAgICAgIHJvbGVzOiB1c2VyUm9sZXMsXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuLyoqXG4gKiBSYXRlIGxpbWl0aW5nIG1pZGRsZXdhcmVcbiAqIExpbWl0cyB0aGUgbnVtYmVyIG9mIHJlcXVlc3RzIGEgdXNlciBjYW4gbWFrZSBpbiBhIGdpdmVuIHRpbWUgcGVyaW9kXG4gKiBAcGFyYW0gbGltaXQgTWF4aW11bSBudW1iZXIgb2YgcmVxdWVzdHNcbiAqIEBwYXJhbSB0aW1lV2luZG93TXMgVGltZSB3aW5kb3cgaW4gbWlsbGlzZWNvbmRzXG4gKi9cbmV4cG9ydCBjb25zdCByYXRlTGltaXQgPSAobGltaXQ6IG51bWJlciwgdGltZVdpbmRvd01zOiBudW1iZXIgPSA2MDAwMCkgPT4ge1xuICAvLyBTaW1wbGUgaW4tbWVtb3J5IHN0b3JlIGZvciByYXRlIGxpbWl0aW5nXG4gIC8vIEluIHByb2R1Y3Rpb24sIHVzZSBSZWRpcyBvciBhbm90aGVyIGRpc3RyaWJ1dGVkIHN0b3JlXG4gIGNvbnN0IHN0b3JlID0gbmV3IE1hcDxzdHJpbmcsIHsgY291bnQ6IG51bWJlciwgcmVzZXRUaW1lOiBudW1iZXIgfT4oKTtcbiAgXG4gIHJldHVybiB0Lm1pZGRsZXdhcmUoKHsgY3R4LCBuZXh0IH0pID0+IHtcbiAgICBpZiAoIWN0eC51c2VyKSB7XG4gICAgICByZXR1cm4gbmV4dCh7IGN0eCB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdXNlcklkID0gY3R4LnVzZXIuaWQ7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCB1c2VyUmF0ZUxpbWl0ID0gc3RvcmUuZ2V0KHVzZXJJZCk7XG4gICAgXG4gICAgaWYgKCF1c2VyUmF0ZUxpbWl0IHx8IG5vdyA+IHVzZXJSYXRlTGltaXQucmVzZXRUaW1lKSB7XG4gICAgICAvLyBGaXJzdCByZXF1ZXN0IG9yIHJlc2V0IHRpbWUgaGFzIHBhc3NlZFxuICAgICAgc3RvcmUuc2V0KHVzZXJJZCwgeyBjb3VudDogMSwgcmVzZXRUaW1lOiBub3cgKyB0aW1lV2luZG93TXMgfSk7XG4gICAgICByZXR1cm4gbmV4dCh7IGN0eCB9KTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHVzZXJSYXRlTGltaXQuY291bnQgPj0gbGltaXQpIHtcbiAgICAgIC8vIFJhdGUgbGltaXQgZXhjZWVkZWRcbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICBjb2RlOiAnVE9PX01BTllfUkVRVUVTVFMnLFxuICAgICAgICBtZXNzYWdlOiAnUmF0ZSBsaW1pdCBleGNlZWRlZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEluY3JlbWVudCByZXF1ZXN0IGNvdW50XG4gICAgdXNlclJhdGVMaW1pdC5jb3VudCArPSAxO1xuICAgIHN0b3JlLnNldCh1c2VySWQsIHVzZXJSYXRlTGltaXQpO1xuICAgIFxuICAgIHJldHVybiBuZXh0KHsgY3R4IH0pO1xuICB9KTtcbn07XG5cbi8vIEV4cG9ydCBwcm9jZWR1cmVzIHdpdGggbWlkZGxld2FyZVxuZXhwb3J0IGNvbnN0IHByb3RlY3RlZFByb2NlZHVyZSA9IHQucHJvY2VkdXJlLnVzZShpc0F1dGhlZCk7XG4iXSwibmFtZXMiOlsiaW5pdFRSUEMiLCJUUlBDRXJyb3IiLCJzdXBlcmpzb24iLCJ0IiwiY29udGV4dCIsImNyZWF0ZSIsInRyYW5zZm9ybWVyIiwicm91dGVyIiwicHVibGljUHJvY2VkdXJlIiwicHJvY2VkdXJlIiwibWlkZGxld2FyZSIsImlzQXV0aGVkIiwiY3R4IiwibmV4dCIsInVzZXIiLCJjb2RlIiwibWVzc2FnZSIsImhhc1JvbGUiLCJyZXF1aXJlZFJvbGVzIiwidXNlclJvbGVzIiwic2Vzc2lvbiIsImFwcF9tZXRhZGF0YSIsInJvbGVzIiwiaGFzUmVxdWlyZWRSb2xlIiwic29tZSIsInJvbGUiLCJpbmNsdWRlcyIsInJhdGVMaW1pdCIsImxpbWl0IiwidGltZVdpbmRvd01zIiwic3RvcmUiLCJNYXAiLCJ1c2VySWQiLCJpZCIsIm5vdyIsIkRhdGUiLCJ1c2VyUmF0ZUxpbWl0IiwiZ2V0IiwicmVzZXRUaW1lIiwic2V0IiwiY291bnQiLCJwcm90ZWN0ZWRQcm9jZWR1cmUiLCJ1c2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../packages/server/src/trpc.ts\n");

/***/ }),

/***/ "(rsc)/./app/api/trpc/[trpc]/route.ts":
/*!**************************************!*\
  !*** ./app/api/trpc/[trpc]/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   HEAD: () => (/* binding */ HEAD),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   PATCH: () => (/* binding */ PATCH),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_app_render_work_unit_async_storage_external_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/app-render/work-unit-async-storage.external.js */ \"./work-unit-async-storage.external\");\n/* harmony import */ var next_dist_server_app_render_work_unit_async_storage_external_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_work_unit_async_storage_external_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _codexcrm_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @codexcrm/server */ \"(rsc)/../../packages/server/src/index.ts\");\n/* harmony import */ var _trpc_server_adapters_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @trpc/server/adapters/fetch */ \"(rsc)/../../node_modules/.pnpm/@trpc+server@11.4.2_typescript@5.8.3/node_modules/@trpc/server/dist/adapters/fetch/index.mjs\");\n/* harmony import */ var _sentry_nextjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sentry/nextjs */ \"(rsc)/../../node_modules/.pnpm/@sentry+nextjs@9.30.0_@opentelemetry+context-async-hooks@1.30.1_@opentelemetry+api@1.9._03a156d3e61bcf2107ae8fdb31670b94/node_modules/@sentry/nextjs/build/cjs/index.server.js\");\n/* harmony import */ var _sentry_nextjs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_sentry_nextjs__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\n/**\n * tRPC API endpoint configuration\n * Handles both GET and POST requests for tRPC procedures\n */ // Define the tRPC endpoint path as a constant for maintainability\nconst TRPC_ENDPOINT = '/api/trpc';\n/**\n * Main request handler for tRPC API calls\n */ const GET$1 = async (req)=>{\n    console.warn(`[TRPC API] Handling ${req.method} request to ${req.url}`);\n    try {\n        // Log the headers at debug level for detailed troubleshooting only\n        if (true) {\n            const headers = Object.fromEntries(req.headers.entries());\n            // Use debug level for potentially sensitive or verbose information\n            console.warn('[TRPC API] Request headers:', JSON.stringify(headers, null, 2));\n        }\n        // Handle the request with tRPC's fetchRequestHandler\n        const response = await (0,_trpc_server_adapters_fetch__WEBPACK_IMPORTED_MODULE_2__.fetchRequestHandler)({\n            endpoint: TRPC_ENDPOINT,\n            req,\n            router: _codexcrm_server__WEBPACK_IMPORTED_MODULE_1__.appRouter,\n            // Pass the request object to createContext with proper error handling\n            createContext: async ()=>{\n                try {\n                    const ctx = await (0,_codexcrm_server__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n                        req\n                    });\n                    return ctx;\n                } catch (contextError) {\n                    console.error('[TRPC API] Context creation error:', contextError);\n                    throw contextError;\n                }\n            },\n            // Configure error handling based on environment\n            onError:  true ? ({ path, error })=>{\n                console.error(`❌ [TRPC API] Failed on ${path}: ${error.message}`);\n                console.error(error.stack);\n            } : 0\n        });\n        console.warn(`[TRPC API] Response status: ${response.status}`);\n        return response;\n    } catch (error) {\n        console.error('[TRPC API] Unhandled error:', error);\n        // Create a standardized error response\n        const errorResponse = {\n            error: 'Internal Server Error',\n            // Provide generic message in production, detailed in development\n            message: 'An unexpected error occurred.',\n            // Log detailed error information on the server for debugging purposes\n            ...error instanceof Error ? {\n                debugInfo: {\n                    message: error.message,\n                    stack: error.stack\n                }\n            } : {},\n            // Add error code for easier client-side handling\n            code: 'INTERNAL_SERVER_ERROR'\n        };\n        return new Response(JSON.stringify(errorResponse), {\n            status: 500,\n            headers: {\n                'content-type': 'application/json'\n            }\n        });\n    }\n};\n// Use the same handler for POST requests\nconst POST$1 = GET$1;\n\n// @ts-expect-error Because we cannot be sure if the RequestAsyncStorage module exists (it is not part of the Next.js public\n// API) we use a shim if it doesn't exist. The logic for this is in the wrapping loader.\n\nconst asyncStorageModule = { ...next_dist_server_app_render_work_unit_async_storage_external_js__WEBPACK_IMPORTED_MODULE_0__ } ;\n\nconst requestAsyncStorage =\n  'workUnitAsyncStorage' in asyncStorageModule\n    ? asyncStorageModule.workUnitAsyncStorage\n    : 'requestAsyncStorage' in asyncStorageModule\n      ? asyncStorageModule.requestAsyncStorage\n      : undefined;\n\nfunction wrapHandler(handler, method) {\n  // Running the instrumentation code during the build phase will mark any function as \"dynamic\" because we're accessing\n  // the Request object. We do not want to turn handlers dynamic so we skip instrumentation in the build phase.\n  if (process.env.NEXT_PHASE === 'phase-production-build') {\n    return handler;\n  }\n\n  if (typeof handler !== 'function') {\n    return handler;\n  }\n\n  return new Proxy(handler, {\n    apply: (originalFunction, thisArg, args) => {\n      let headers = undefined;\n\n      // We try-catch here just in case the API around `requestAsyncStorage` changes unexpectedly since it is not public API\n      try {\n        const requestAsyncStore = requestAsyncStorage?.getStore() ;\n        headers = requestAsyncStore?.headers;\n      } catch (e) {\n        /** empty */\n      }\n\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      return _sentry_nextjs__WEBPACK_IMPORTED_MODULE_3__.wrapRouteHandlerWithSentry(originalFunction , {\n        method,\n        parameterizedRoute: '/api/trpc/[trpc]',\n        headers,\n      }).apply(thisArg, args);\n    },\n  });\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst GET = wrapHandler(GET$1 , 'GET');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst POST = wrapHandler(POST$1 , 'POST');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst PUT = wrapHandler(undefined , 'PUT');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst PATCH = wrapHandler(undefined , 'PATCH');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst DELETE = wrapHandler(undefined , 'DELETE');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst HEAD = wrapHandler(undefined , 'HEAD');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst OPTIONS = wrapHandler(undefined , 'OPTIONS');\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTZCLEdBQUcsU0FBUyIsInNvdXJjZXMiOlsiYXBwL2FwaS90cnBjL1t0cnBjXS9yb3V0ZS50cyIsInNlbnRyeS13cmFwcGVyLW1vZHVsZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhcHBSb3V0ZXIsIGNyZWF0ZUNvbnRleHQgfSBmcm9tICdAY29kZXhjcm0vc2VydmVyJztcbmltcG9ydCB7IGZldGNoUmVxdWVzdEhhbmRsZXIgfSBmcm9tICdAdHJwYy9zZXJ2ZXIvYWRhcHRlcnMvZmV0Y2gnO1xuaW1wb3J0IHR5cGUgeyBBbnlSb3V0ZXIgfSBmcm9tICdAdHJwYy9zZXJ2ZXInO1xuXG4vKipcbiAqIHRSUEMgQVBJIGVuZHBvaW50IGNvbmZpZ3VyYXRpb25cbiAqIEhhbmRsZXMgYm90aCBHRVQgYW5kIFBPU1QgcmVxdWVzdHMgZm9yIHRSUEMgcHJvY2VkdXJlc1xuICovXG5cbi8vIERlZmluZSB0aGUgdFJQQyBlbmRwb2ludCBwYXRoIGFzIGEgY29uc3RhbnQgZm9yIG1haW50YWluYWJpbGl0eVxuY29uc3QgVFJQQ19FTkRQT0lOVCA9ICcvYXBpL3RycGMnO1xuXG4vLyBSZW1vdmUgZWRnZSBydW50aW1lIHRvIHVzZSBOb2RlLmpzIGZvciBiZXR0ZXIgY29tcGF0aWJpbGl0eSB3aXRoIHRSUEMgYW5kIFN1cGFiYXNlXG4vLyBleHBvcnQgY29uc3QgcnVudGltZSA9ICdlZGdlJztcblxuLyoqXG4gKiBTdGFuZGFyZCBlcnJvciByZXNwb25zZSBmb3JtYXQgZm9yIGNvbnNpc3RlbmN5XG4gKi9cbnR5cGUgQXBpRXJyb3JSZXNwb25zZSA9IHtcbiAgZXJyb3I6IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBjb2RlPzogc3RyaW5nO1xufTtcblxuLyoqXG4gKiBNYWluIHJlcXVlc3QgaGFuZGxlciBmb3IgdFJQQyBBUEkgY2FsbHNcbiAqL1xuZXhwb3J0IGNvbnN0IEdFVCA9IGFzeW5jIChyZXE6IFJlcXVlc3QpID0+IHtcbiAgY29uc29sZS53YXJuKGBbVFJQQyBBUEldIEhhbmRsaW5nICR7cmVxLm1ldGhvZH0gcmVxdWVzdCB0byAke3JlcS51cmx9YCk7XG5cbiAgdHJ5IHtcbiAgICAvLyBMb2cgdGhlIGhlYWRlcnMgYXQgZGVidWcgbGV2ZWwgZm9yIGRldGFpbGVkIHRyb3VibGVzaG9vdGluZyBvbmx5XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICBjb25zdCBoZWFkZXJzID0gT2JqZWN0LmZyb21FbnRyaWVzKHJlcS5oZWFkZXJzLmVudHJpZXMoKSk7XG4gICAgICAvLyBVc2UgZGVidWcgbGV2ZWwgZm9yIHBvdGVudGlhbGx5IHNlbnNpdGl2ZSBvciB2ZXJib3NlIGluZm9ybWF0aW9uXG4gICAgICBjb25zb2xlLndhcm4oJ1tUUlBDIEFQSV0gUmVxdWVzdCBoZWFkZXJzOicsIEpTT04uc3RyaW5naWZ5KGhlYWRlcnMsIG51bGwsIDIpKTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgdGhlIHJlcXVlc3Qgd2l0aCB0UlBDJ3MgZmV0Y2hSZXF1ZXN0SGFuZGxlclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hSZXF1ZXN0SGFuZGxlcih7XG4gICAgICBlbmRwb2ludDogVFJQQ19FTkRQT0lOVCxcbiAgICAgIHJlcSxcbiAgICAgIHJvdXRlcjogYXBwUm91dGVyIGFzIHVua25vd24gYXMgQW55Um91dGVyLFxuICAgICAgLy8gUGFzcyB0aGUgcmVxdWVzdCBvYmplY3QgdG8gY3JlYXRlQ29udGV4dCB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZ1xuICAgICAgY3JlYXRlQ29udGV4dDogYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGN0eCA9IGF3YWl0IGNyZWF0ZUNvbnRleHQoeyByZXEgfSk7XG4gICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgfSBjYXRjaCAoY29udGV4dEVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignW1RSUEMgQVBJXSBDb250ZXh0IGNyZWF0aW9uIGVycm9yOicsIGNvbnRleHRFcnJvcik7XG4gICAgICAgICAgdGhyb3cgY29udGV4dEVycm9yO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLy8gQ29uZmlndXJlIGVycm9yIGhhbmRsaW5nIGJhc2VkIG9uIGVudmlyb25tZW50XG4gICAgICBvbkVycm9yOlxuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50J1xuICAgICAgICAgID8gKHsgcGF0aCwgZXJyb3IgfSkgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgW1RSUEMgQVBJXSBGYWlsZWQgb24gJHtwYXRofTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLnN0YWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6ICh7IHBhdGggfSkgPT4ge1xuICAgICAgICAgICAgICAvLyBMb2cgZXJyb3JzIGluIHByb2R1Y3Rpb24gYnV0IHdpdGhvdXQgc2Vuc2l0aXZlIGRldGFpbHNcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW1RSUEMgQVBJXSBFcnJvciBpbiBwcm9jZWR1cmU6ICR7cGF0aH1gKTtcbiAgICAgICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLndhcm4oYFtUUlBDIEFQSV0gUmVzcG9uc2Ugc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW1RSUEMgQVBJXSBVbmhhbmRsZWQgZXJyb3I6JywgZXJyb3IpO1xuXG4gICAgLy8gQ3JlYXRlIGEgc3RhbmRhcmRpemVkIGVycm9yIHJlc3BvbnNlXG4gICAgY29uc3QgZXJyb3JSZXNwb25zZTogQXBpRXJyb3JSZXNwb25zZSA9IHtcbiAgICAgIGVycm9yOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyxcbiAgICAgIC8vIFByb3ZpZGUgZ2VuZXJpYyBtZXNzYWdlIGluIHByb2R1Y3Rpb24sIGRldGFpbGVkIGluIGRldmVsb3BtZW50XG4gICAgICBtZXNzYWdlOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC4nLFxuICAgICAgLy8gTG9nIGRldGFpbGVkIGVycm9yIGluZm9ybWF0aW9uIG9uIHRoZSBzZXJ2ZXIgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlc1xuICAgICAgLi4uKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgZXJyb3IgaW5zdGFuY2VvZiBFcnJvclxuICAgICAgICA/IHsgZGVidWdJbmZvOiB7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsIHN0YWNrOiBlcnJvci5zdGFjayB9IH1cbiAgICAgICAgOiB7fSksXG4gICAgICAvLyBBZGQgZXJyb3IgY29kZSBmb3IgZWFzaWVyIGNsaWVudC1zaWRlIGhhbmRsaW5nXG4gICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeShlcnJvclJlc3BvbnNlKSwge1xuICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICBoZWFkZXJzOiB7ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gVXNlIHRoZSBzYW1lIGhhbmRsZXIgZm9yIFBPU1QgcmVxdWVzdHNcbmV4cG9ydCBjb25zdCBQT1NUID0gR0VUO1xuIiwiaW1wb3J0ICogYXMgb3JpZ01vZHVsZSBmcm9tICduZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvd29yay11bml0LWFzeW5jLXN0b3JhZ2UuZXh0ZXJuYWwuanMnO1xuaW1wb3J0ICogYXMgc2VydmVyQ29tcG9uZW50TW9kdWxlIGZyb20gJ19fU0VOVFJZX1dSQVBQSU5HX1RBUkdFVF9GSUxFX18uY2pzJztcbmV4cG9ydCAqIGZyb20gJ19fU0VOVFJZX1dSQVBQSU5HX1RBUkdFVF9GSUxFX18uY2pzJztcbmV4cG9ydCB7fSBmcm9tICdfX1NFTlRSWV9XUkFQUElOR19UQVJHRVRfRklMRV9fLmNqcyc7XG5pbXBvcnQgKiBhcyBTZW50cnkgZnJvbSAnQHNlbnRyeS9uZXh0anMnO1xuXG4vLyBAdHMtZXhwZWN0LWVycm9yIEJlY2F1c2Ugd2UgY2Fubm90IGJlIHN1cmUgaWYgdGhlIFJlcXVlc3RBc3luY1N0b3JhZ2UgbW9kdWxlIGV4aXN0cyAoaXQgaXMgbm90IHBhcnQgb2YgdGhlIE5leHQuanMgcHVibGljXG4vLyBBUEkpIHdlIHVzZSBhIHNoaW0gaWYgaXQgZG9lc24ndCBleGlzdC4gVGhlIGxvZ2ljIGZvciB0aGlzIGlzIGluIHRoZSB3cmFwcGluZyBsb2FkZXIuXG5cbmNvbnN0IGFzeW5jU3RvcmFnZU1vZHVsZSA9IHsgLi4ub3JpZ01vZHVsZSB9IDtcblxuY29uc3QgcmVxdWVzdEFzeW5jU3RvcmFnZSA9XG4gICd3b3JrVW5pdEFzeW5jU3RvcmFnZScgaW4gYXN5bmNTdG9yYWdlTW9kdWxlXG4gICAgPyBhc3luY1N0b3JhZ2VNb2R1bGUud29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICA6ICdyZXF1ZXN0QXN5bmNTdG9yYWdlJyBpbiBhc3luY1N0b3JhZ2VNb2R1bGVcbiAgICAgID8gYXN5bmNTdG9yYWdlTW9kdWxlLnJlcXVlc3RBc3luY1N0b3JhZ2VcbiAgICAgIDogdW5kZWZpbmVkO1xuXG5mdW5jdGlvbiB3cmFwSGFuZGxlcihoYW5kbGVyLCBtZXRob2QpIHtcbiAgLy8gUnVubmluZyB0aGUgaW5zdHJ1bWVudGF0aW9uIGNvZGUgZHVyaW5nIHRoZSBidWlsZCBwaGFzZSB3aWxsIG1hcmsgYW55IGZ1bmN0aW9uIGFzIFwiZHluYW1pY1wiIGJlY2F1c2Ugd2UncmUgYWNjZXNzaW5nXG4gIC8vIHRoZSBSZXF1ZXN0IG9iamVjdC4gV2UgZG8gbm90IHdhbnQgdG8gdHVybiBoYW5kbGVycyBkeW5hbWljIHNvIHdlIHNraXAgaW5zdHJ1bWVudGF0aW9uIGluIHRoZSBidWlsZCBwaGFzZS5cbiAgaWYgKHByb2Nlc3MuZW52Lk5FWFRfUEhBU0UgPT09ICdwaGFzZS1wcm9kdWN0aW9uLWJ1aWxkJykge1xuICAgIHJldHVybiBoYW5kbGVyO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGhhbmRsZXI7XG4gIH1cblxuICByZXR1cm4gbmV3IFByb3h5KGhhbmRsZXIsIHtcbiAgICBhcHBseTogKG9yaWdpbmFsRnVuY3Rpb24sIHRoaXNBcmcsIGFyZ3MpID0+IHtcbiAgICAgIGxldCBoZWFkZXJzID0gdW5kZWZpbmVkO1xuXG4gICAgICAvLyBXZSB0cnktY2F0Y2ggaGVyZSBqdXN0IGluIGNhc2UgdGhlIEFQSSBhcm91bmQgYHJlcXVlc3RBc3luY1N0b3JhZ2VgIGNoYW5nZXMgdW5leHBlY3RlZGx5IHNpbmNlIGl0IGlzIG5vdCBwdWJsaWMgQVBJXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXF1ZXN0QXN5bmNTdG9yZSA9IHJlcXVlc3RBc3luY1N0b3JhZ2U/LmdldFN0b3JlKCkgO1xuICAgICAgICBoZWFkZXJzID0gcmVxdWVzdEFzeW5jU3RvcmU/LmhlYWRlcnM7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8qKiBlbXB0eSAqL1xuICAgICAgfVxuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgcmV0dXJuIFNlbnRyeS53cmFwUm91dGVIYW5kbGVyV2l0aFNlbnRyeShvcmlnaW5hbEZ1bmN0aW9uICwge1xuICAgICAgICBtZXRob2QsXG4gICAgICAgIHBhcmFtZXRlcml6ZWRSb3V0ZTogJy9hcGkvdHJwYy9bdHJwY10nLFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgfSkuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgfSxcbiAgfSk7XG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbmNvbnN0IEdFVCA9IHdyYXBIYW5kbGVyKHNlcnZlckNvbXBvbmVudE1vZHVsZS5HRVQgLCAnR0VUJyk7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG5jb25zdCBQT1NUID0gd3JhcEhhbmRsZXIoc2VydmVyQ29tcG9uZW50TW9kdWxlLlBPU1QgLCAnUE9TVCcpO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuY29uc3QgUFVUID0gd3JhcEhhbmRsZXIoc2VydmVyQ29tcG9uZW50TW9kdWxlLlBVVCAsICdQVVQnKTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbmNvbnN0IFBBVENIID0gd3JhcEhhbmRsZXIoc2VydmVyQ29tcG9uZW50TW9kdWxlLlBBVENIICwgJ1BBVENIJyk7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG5jb25zdCBERUxFVEUgPSB3cmFwSGFuZGxlcihzZXJ2ZXJDb21wb25lbnRNb2R1bGUuREVMRVRFICwgJ0RFTEVURScpO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuY29uc3QgSEVBRCA9IHdyYXBIYW5kbGVyKHNlcnZlckNvbXBvbmVudE1vZHVsZS5IRUFEICwgJ0hFQUQnKTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbmNvbnN0IE9QVElPTlMgPSB3cmFwSGFuZGxlcihzZXJ2ZXJDb21wb25lbnRNb2R1bGUuT1BUSU9OUyAsICdPUFRJT05TJyk7XG5cbmV4cG9ydCB7IERFTEVURSwgR0VULCBIRUFELCBPUFRJT05TLCBQQVRDSCwgUE9TVCwgUFVUIH07XG4iXSwibmFtZXMiOlsiVFJQQ19FTkRQT0lOVCIsIkdFVCIsInJlcSIsImNvbnNvbGUiLCJ3YXJuIiwibWV0aG9kIiwidXJsIiwiaGVhZGVycyIsIk9iamVjdCIsImZyb21FbnRyaWVzIiwiZW50cmllcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXNwb25zZSIsImZldGNoUmVxdWVzdEhhbmRsZXIiLCJlbmRwb2ludCIsInJvdXRlciIsImFwcFJvdXRlciIsImNyZWF0ZUNvbnRleHQiLCJjdHgiLCJjb250ZXh0RXJyb3IiLCJlcnJvciIsIm9uRXJyb3IiLCJwcm9jZXNzIiwicGF0aCIsIm1lc3NhZ2UiLCJzdGFjayIsInN0YXR1cyIsImVycm9yUmVzcG9uc2UiLCJFcnJvciIsImRlYnVnSW5mbyIsImNvZGUiLCJSZXNwb25zZSIsIlBPU1QiLCJzZXJ2ZXJDb21wb25lbnRNb2R1bGUuR0VUIiwic2VydmVyQ29tcG9uZW50TW9kdWxlLlBPU1QiLCJzZXJ2ZXJDb21wb25lbnRNb2R1bGUuUFVUIiwic2VydmVyQ29tcG9uZW50TW9kdWxlLlBBVENIIiwic2VydmVyQ29tcG9uZW50TW9kdWxlLkRFTEVURSIsInNlcnZlckNvbXBvbmVudE1vZHVsZS5IRUFEIiwic2VydmVyQ29tcG9uZW50TW9kdWxlLk9QVElPTlMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/trpc/[trpc]/route.ts\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/next@15.3.1_@babel+core@7.27.4_@opentelemetry+api@1.9.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@15.3.1_@babel+core@7.27.4_@opentelemetry+api@1.9.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "?322c":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?c822":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "async_hooks":
/*!******************************!*\
  !*** external "async_hooks" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("async_hooks");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "diagnostics_channel":
/*!**************************************!*\
  !*** external "diagnostics_channel" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = require("diagnostics_channel");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "import-in-the-middle":
/*!***************************************!*\
  !*** external "import-in-the-middle" ***!
  \***************************************/
/***/ ((module) => {

"use strict";
module.exports = require("import-in-the-middle");

/***/ }),

/***/ "module":
/*!*************************!*\
  !*** external "module" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("module");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "node:child_process":
/*!*************************************!*\
  !*** external "node:child_process" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:child_process");

/***/ }),

/***/ "node:diagnostics_channel":
/*!*******************************************!*\
  !*** external "node:diagnostics_channel" ***!
  \*******************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:diagnostics_channel");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ "node:https":
/*!*****************************!*\
  !*** external "node:https" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:https");

/***/ }),

/***/ "node:inspector":
/*!*********************************!*\
  !*** external "node:inspector" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:inspector");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:net");

/***/ }),

/***/ "node:os":
/*!**************************!*\
  !*** external "node:os" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:os");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "node:readline":
/*!********************************!*\
  !*** external "node:readline" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:readline");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:tls":
/*!***************************!*\
  !*** external "node:tls" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:tls");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "node:worker_threads":
/*!**************************************!*\
  !*** external "node:worker_threads" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:worker_threads");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "perf_hooks":
/*!*****************************!*\
  !*** external "perf_hooks" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("perf_hooks");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "require-in-the-middle":
/*!****************************************!*\
  !*** external "require-in-the-middle" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("require-in-the-middle");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.3.1_@babel+core@7.27.4_@opentelemetry+api@1.9.0_react-dom@19.1.0_react@19.1.0__react@19.1.0","vendor-chunks/@sentry+core@9.30.0","vendor-chunks/@sentry+node@9.30.0","vendor-chunks/@opentelemetry+semantic-conventions@1.34.0","vendor-chunks/@opentelemetry+semantic-conventions@1.28.0","vendor-chunks/@sentry+nextjs@9.30.0_@opentelemetry+context-async-hooks@1.30.1_@opentelemetry+api@1.9._03a156d3e61bcf2107ae8fdb31670b94","vendor-chunks/@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+core@1.30.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+sdk-trace-base@1.30.1_@opentelemetry+api@1.9.0","vendor-chunks/@sentry+opentelemetry@9.30.0_@opentelemetry+api@1.9.0_@opentelemetry+context-async-hook_b4e16831de4e436fc0ceb619185e4058","vendor-chunks/minimatch@9.0.5","vendor-chunks/@opentelemetry+resources@1.30.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-http@0.57.2_@opentelemetry+api@1.9.0","vendor-chunks/semver@7.7.2","vendor-chunks/@opentelemetry+instrumentation@0.57.2_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-pg@0.51.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-mongodb@0.52.0_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-graphql@0.47.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-amqplib@0.46.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-undici@0.10.1_@opentelemetry+api@1.9.0","vendor-chunks/resolve@1.22.8","vendor-chunks/@opentelemetry+instrumentation-express@0.47.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-hapi@0.45.2_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-redis-4@0.46.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-fs@0.19.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-mysql@0.45.1_@opentelemetry+api@1.9.0","vendor-chunks/color-convert@2.0.1","vendor-chunks/@opentelemetry+instrumentation-mongoose@0.46.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-mysql2@0.45.2_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-knex@0.44.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-kafkajs@0.7.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+context-async-hooks@1.30.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-connect@0.43.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+api-logs@0.57.2","vendor-chunks/@opentelemetry+instrumentation-koa@0.47.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-tedious@0.18.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-ioredis@0.47.1_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-dataloader@0.16.1_@opentelemetry+api@1.9.0","vendor-chunks/chalk@3.0.0","vendor-chunks/@prisma+instrumentation@6.8.2_@opentelemetry+api@1.9.0","vendor-chunks/@opentelemetry+instrumentation-generic-pool@0.43.1_@opentelemetry+api@1.9.0","vendor-chunks/is-core-module@2.16.1","vendor-chunks/forwarded-parse@2.1.2","vendor-chunks/@opentelemetry+instrumentation-lru-memoizer@0.44.1_@opentelemetry+api@1.9.0","vendor-chunks/brace-expansion@2.0.2","vendor-chunks/color-name@1.1.4","vendor-chunks/ansi-styles@4.3.0","vendor-chunks/stacktrace-parser@0.1.11","vendor-chunks/@opentelemetry+sql-common@0.40.1_@opentelemetry+api@1.9.0","vendor-chunks/shimmer@1.2.1","vendor-chunks/@opentelemetry+redis-common@0.36.2","vendor-chunks/supports-color@7.2.0","vendor-chunks/function-bind@1.1.2","vendor-chunks/path-parse@1.0.7","vendor-chunks/balanced-match@1.0.2","vendor-chunks/@swc+helpers@0.5.15","vendor-chunks/has-flag@4.0.0","vendor-chunks/hasown@2.0.2","vendor-chunks/zod@3.25.67","vendor-chunks/tr46@0.0.3","vendor-chunks/@supabase+auth-js@2.70.0","vendor-chunks/@trpc+server@11.4.2_typescript@5.8.3","vendor-chunks/ws@8.18.2","vendor-chunks/@supabase+realtime-js@2.11.10","vendor-chunks/@supabase+postgrest-js@1.19.4","vendor-chunks/@supabase+node-fetch@2.6.15","vendor-chunks/whatwg-url@5.0.0","vendor-chunks/@supabase+storage-js@2.7.1","vendor-chunks/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0","vendor-chunks/superjson@2.2.2","vendor-chunks/@supabase+supabase-js@2.50.0","vendor-chunks/cookie@1.0.2","vendor-chunks/@supabase+functions-js@2.4.4","vendor-chunks/webidl-conversions@3.0.1","vendor-chunks/is-what@4.1.16","vendor-chunks/copy-anything@3.0.5"], () => (__webpack_exec__("(rsc)/../../node_modules/.pnpm/next@15.3.1_@babel+core@7.27.4_@opentelemetry+api@1.9.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=%2FUsers%2Fpeterjamesblizzard%2Fprojects%2Fapp_codexcrmapp%2Fapps%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpeterjamesblizzard%2Fprojects%2Fapp_codexcrmapp%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();